<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"159357254680.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="blog">
<meta property="og:url" content="https://159357254680.github.io/index.html">
<meta property="og:site_name" content="blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://159357254680.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2025/04/16/zustand/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/16/zustand/" class="post-title-link" itemprop="url">zustand</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-04-16 19:00:08" itemprop="dateCreated datePublished" datetime="2025-04-16T19:00:08+08:00">2025-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-04-19 20:39:56" itemprop="dateModified" datetime="2025-04-19T20:39:56+08:00">2025-04-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Zustand"><a href="#Zustand" class="headerlink" title="Zustand"></a>Zustand</h1><h2 id="1-åºï¼š"><a href="#1-åºï¼š" class="headerlink" title="1.åºï¼š"></a>1.åºï¼š</h2><p>â€‹	åœ¨ React ä¸­ï¼Œâ€œçŠ¶æ€ç®¡ç†â€æ˜¯æŒ‡<strong>ç®¡ç†ç»„ä»¶ä¹‹é—´å…±äº«çš„æ•°æ®çŠ¶æ€çš„æ–¹å¼</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ï¼š</p>
<p> <strong>è®©ç»„ä»¶çŸ¥é“æ•°æ®çš„æ¥æºï¼Œå¹¶åœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶æ­£ç¡®åœ°æ›´æ–° UIã€‚</strong></p>
<p>â€‹	ä½†æ˜¯ï¼Œå¦‚æœç»„ä»¶ç»“æ„éå¸¸çš„å¤æ‚ï¼Œå•é useStateå’Œpropså°±ä¸å¤Ÿç”¨äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„å·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†çŠ¶æ€ï¼Œæ¯”å¦‚Zustandã€‚</p>
<h2 id="2-ä¸ºä»€ä¹ˆè¦ç”¨Zustand"><a href="#2-ä¸ºä»€ä¹ˆè¦ç”¨Zustand" class="headerlink" title="2.ä¸ºä»€ä¹ˆè¦ç”¨Zustand:"></a>2.ä¸ºä»€ä¹ˆè¦ç”¨Zustand:</h2><p>â€‹	å¾ˆç®€å•ï¼Œå› ä¸ºå®ƒç®€å•å¥½ç”¨ğŸ˜‹ï¼š</p>
<h3 id="2-1-ç®€å•çš„API-ï¼š"><a href="#2-1-ç®€å•çš„API-ï¼š" class="headerlink" title="2.1 **ç®€å•çš„API **ï¼š"></a>2.1 **ç®€å•çš„API **ï¼š</h3><p>â€‹	Zustand åªéœ€è¦ä¸€ä¸ª <code>create</code> å‡½æ•°æ¥åˆ›å»ºçŠ¶æ€ï¼Œä¸éœ€è¦ reducerã€actionã€dispatchã€middleware ç­‰å¤æ‚æ¦‚å¿µã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">increase</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨ä¹Ÿéå¸¸ç®€å•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">count</span>);</span><br><span class="line"><span class="keyword">const</span> increase = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">increase</span>);</span><br></pre></td></tr></table></figure>

<p>â€‹	å¦‚æœè¦åœ¨åˆ«çš„æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆcreateContext,useContextä¹‹ç±»çš„ä¸œè¥¿äº†ï¼Œåªéœ€importå¯¼å…¥å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import useStore from &#x27;./store&#x27;</span><br></pre></td></tr></table></figure>



<h3 id="2-2-ç®€å•çš„å…±äº«ï¼š"><a href="#2-2-ç®€å•çš„å…±äº«ï¼š" class="headerlink" title="2.2 ç®€å•çš„å…±äº«ï¼š"></a>2.2 ç®€å•çš„å…±äº«ï¼š</h3><p>â€‹	ä¸éœ€è¦ä½¿ç”¨&lt;createContext.Provider&gt;æ¥åŒ…è£¹ï¼Œstoreå…¨å±€ç®¡ç†çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è®¿é—®,è€Œä¸”è¿˜æœ‰å„ç§ä¸åŒçš„è¯»å–æ–¹æ³•ï¼š</p>
<h4 id="2-2-1-å…¨å±€è¯»å–ï¼š-getState"><a href="#2-2-1-å…¨å±€è¯»å–ï¼š-getState" class="headerlink" title="2.2.1 å…¨å±€è¯»å–ï¼š.getState()"></a>2.2.1 å…¨å±€è¯»å–ï¼š.getState()</h4><p>â€‹	zustand åœ¨åˆ›å»º store æ—¶ï¼Œä¼šåœ¨è¿”å›çš„ hook ä¸Šé™„å¸¦ä¸€ä¸ªé™æ€æ–¹æ³•**.getState()<strong>ï¼Œç”¨äº</strong>åœ¨ React ç»„ä»¶ä¹‹å¤–**ï¼Œå³æ—¶è¯»å–å½“å‰çŠ¶æ€å¿«ç…§</p>
<p>â€‹	<strong>æ³¨ï¼š</strong>ä½¿ç”¨ <code>useStore.getState()</code> è·å–çš„çŠ¶æ€ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ å¦‚æœä½ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒæ¥è¯»å–çŠ¶æ€ï¼Œå³ä½¿çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œç»„ä»¶ä¹Ÿä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useStore <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> currentCount = useStore.<span class="title function_">getState</span>().<span class="property">count</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(currentCount);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-å“åº”å¼ç»„ä»¶ï¼šuseStore-selector"><a href="#2-2-2-å“åº”å¼ç»„ä»¶ï¼šuseStore-selector" class="headerlink" title="2.2.2 å“åº”å¼ç»„ä»¶ï¼šuseStore(selector)"></a>2.2.2 å“åº”å¼ç»„ä»¶ï¼šuseStore(selector)</h4><p>â€‹	åœ¨ React ç»„ä»¶å†…ï¼Œç›´æ¥è°ƒç”¨ <code>useStore(selector)</code>ï¼Œzustand åªä¼šè®©<strong>ä½¿ç”¨åˆ°ç‰¹å®šçŠ¶æ€åˆ‡ç‰‡</strong>çš„ç»„ä»¶å‘ç”Ÿé‡æ–°æ¸²æŸ“ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">count</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-è®¢é˜…çŠ¶æ€å˜åŒ–çš„ç›‘å¬å™¨ï¼šsubscribe"><a href="#2-2-3-è®¢é˜…çŠ¶æ€å˜åŒ–çš„ç›‘å¬å™¨ï¼šsubscribe" class="headerlink" title="2.2.3 è®¢é˜…çŠ¶æ€å˜åŒ–çš„ç›‘å¬å™¨ï¼šsubscribe"></a>2.2.3 è®¢é˜…çŠ¶æ€å˜åŒ–çš„ç›‘å¬å™¨ï¼šsubscribe</h4><p>â€‹	zustand è¿˜æä¾›äº†<strong>subscribe</strong>ï¼Œå…è®¸åœ¨ç»„ä»¶å¤–æˆ–æ¨¡å—ä¸­<strong>ç›‘å¬çŠ¶æ€å˜åŒ–</strong>ï¼Œé€‚ç”¨äºéœ€è¦åœ¨çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œç‰¹å®šé€»è¾‘çš„åœºæ™¯ï¼Œå¦‚æ—¥å¿—è®°å½•ç­‰ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> unsub1 = useStore.<span class="title function_">subscribe</span>(<span class="variable language_">console</span>.<span class="property">log</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unsub2 = useStore.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">count</span>, <span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;countå˜åŒ–äº†:&#x27;</span>, count);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h3 id="2-3-ç®€å•çš„å¼‚æ­¥ï¼š"><a href="#2-3-ç®€å•çš„å¼‚æ­¥ï¼š" class="headerlink" title="2.3 ç®€å•çš„å¼‚æ­¥ï¼š"></a>2.3 ç®€å•çš„å¼‚æ­¥ï¼š</h3><p>â€‹	ç›¸å¯¹äºreduxåŸç”Ÿä¸æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œéœ€è¦å¯¼å…¥ä¸­é—´ä»¶ï¼ˆredux-thunkï¼‰ï¼Œzustandç›´æ¥å†™å°±å¯¹äº†ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">kfcvwo50</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">fetchUser</span>: <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/Thursday&#x27;</span>);</span><br><span class="line">    <span class="title function_">set</span>(&#123; <span class="attr">kfcvwo50</span>: res &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<h3 id="2-4-ç®€å•çš„æ¸²æŸ“ï¼š"><a href="#2-4-ç®€å•çš„æ¸²æŸ“ï¼š" class="headerlink" title="2.4 ç®€å•çš„æ¸²æŸ“ï¼š"></a>2.4 ç®€å•çš„æ¸²æŸ“ï¼š</h3><p>â€‹	reactåŸç”Ÿçš„useStateåœ¨æ›´æ–°stateæ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œå“ªæ€•ç»„ä»¶æ²¡æœ‰å®é™…ç”¨åˆ°æ”¹å˜çš„éƒ¨åˆ†ã€‚ä½†æ˜¯zustandåªæœ‰ä¾èµ–ç‰¹å®šçŠ¶æ€çš„ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useContext, createContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AppContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CounterProvider</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">AppContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">count</span>, <span class="attr">setCount</span>, <span class="attr">message</span>, <span class="attr">setMessage</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">AppContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentA</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count &#125; = <span class="title function_">useContext</span>(<span class="title class_">AppContext</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Component A: &#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentB</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; message &#125; = <span class="title function_">useContext</span>(<span class="title class_">AppContext</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Component B: &#123;message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; setCount &#125; = <span class="title function_">useContext</span>(<span class="title class_">AppContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount((prev) =&gt; prev + 1)&#125;&gt;Increment Count<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentA</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentB</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> create <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">  <span class="attr">incrementCount</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentA</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">count</span>);  </span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Component A: &#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentB</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> message = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">message</span>); </span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Component B: &#123;message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> incrementCount = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">incrementCount</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;incrementCount&#125;</span>&gt;</span>Increment Count<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentA</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ComponentB</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	é™¤äº†ä¸Šé¢çš„å¤–ï¼Œzustandè¿˜æœ‰å…¶ä»–ä¼˜ç‚¹ï¼Œæ¯”å¦‚è½»é‡çº§ï¼Œæ˜“äºé›†æˆä¹‹ç±»çš„ã€‚é‚£ä¹ˆï¼Œè¿™ä¹ˆå¥½ç”¨çš„ä¸œè¥¿æ€ä¹ˆç”¨å‘¢ï¼Ÿåˆ«æ€¥ï¼Œä½ å¾ˆæ€¥å—ğŸ˜¡ã€‚</p>
<h2 id="3-zustandçš„å®‰è£…å’Œä½¿ç”¨"><a href="#3-zustandçš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="3.zustandçš„å®‰è£…å’Œä½¿ç”¨:"></a>3.zustandçš„å®‰è£…å’Œä½¿ç”¨:</h2><h3 id="å®‰è£…zustandï¼š"><a href="#å®‰è£…zustandï¼š" class="headerlink" title="å®‰è£…zustandï¼š"></a>å®‰è£…zustandï¼š</h3><p>â€‹	ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Reactåº”ç”¨å¹¶ä¸”å®‰è£… <code>Zustand</code> ä¾èµ–, è¿è¡Œä¸‹çš„çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install zustand</span><br></pre></td></tr></table></figure>

<p>çœæµç‰ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">who</span>: <span class="string">&#x27;å¥¶é¾™&#x27;</span>,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> who = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">who</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hello &#123;who&#125;!</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºå¹¶è®¿é—®storeï¼š"><a href="#åˆ›å»ºå¹¶è®¿é—®storeï¼š" class="headerlink" title="åˆ›å»ºå¹¶è®¿é—®storeï¼š"></a>åˆ›å»ºå¹¶è®¿é—®storeï¼š</h3><p>â€‹	é¦–å…ˆï¼Œæˆ‘ä»¬ä» zustand çš„ create() API ä¸­ä¼ å…¥äº†ä¸€ä¸ªå›è°ƒå‡½æ•°</p>
<p>â€‹	æ¥ç€ï¼Œå›è°ƒå‡½æ•°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„stateã€‚å¦‚æœæƒ³è¦ä½¿ç”¨å®ƒï¼Œå°±å¾—é€šè¿‡createï¼ˆï¼‰è¿”å›çš„ä¸€ä¸ªhookï¼Œä¸€èˆ¬å«useStoreï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥å«ï¼Œå–œæ¬¢å«ä»€ä¹ˆå°±å«ä»€ä¹ˆã€‚</p>
<p>â€‹	æœ€åï¼Œè°ƒç”¨ useStore() æ—¶ï¼ŒZustand ä¼šå°†è®¢é˜…çš„çŠ¶æ€ä¼ å…¥ï¼Œç”±æ­¤ä½ å¯è§£æ„å‡ºä½ éœ€è¦çš„éƒ¨åˆ†è¿”å›ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> create <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function"><span class="params">set</span> =&gt;</span> (&#123;</span><br><span class="line">	<span class="attr">counts</span>:<span class="number">0</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getCounts = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counts</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;getCounts&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure>



<h3 id="æ›´æ–°stateï¼š"><a href="#æ›´æ–°stateï¼š" class="headerlink" title="æ›´æ–°stateï¼š"></a>æ›´æ–°stateï¼š</h3><p>â€‹	æ³¨æ„åˆ°ï¼Œåœ¨ä½¿ç”¨create()çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°é‡Œè¿˜æœ‰ä¸€ä¸ªsetå‚æ•°ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºstateï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹çŠ¶æ€ï¼Œæ¯”å¦‚ä¸‹é¢æ–°å¢äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œå‰è€…è®©countsçš„å€¼åŠ 1ï¼Œåè€…è®©countsçš„å€¼å‡1.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function"><span class="params">set</span> =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">addCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">counts</span>: state.<span class="property">counts</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">decreaseCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">counts</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	åŒç†ï¼Œcreate()ä¹Ÿèƒ½è¿”å›æ“ä½œstateçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getCounts = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counts</span>)</span><br><span class="line"><span class="keyword">const</span> addCounts = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">addVotes</span>); </span><br><span class="line"><span class="keyword">const</span> decreaseCounts = <span class="title function_">useStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">subtractVotes</span>);</span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;getCounts&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;addCounts&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;decreaseCounts&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	è€Œä¸”ï¼Œæ­£å¦‚ä¹‹å‰æ‰€è¯´çš„ï¼Œzustandæ”¯æŒå±€éƒ¨çŠ¶æ€æ›´æ–°ï¼Œå“ªæ€•ä½ çš„storeä¸­åŒ…å«ä¸æ­¢ä¸€ä¸ªå±æ€§ï¼Œä½ åªéœ€è¦å…³æ³¨æ›´æ–°çš„stateï¼Œå…¶ä»–çš„stateè‡ªåŠ¨ä¿æŒåŸæ ·ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const useStore = create((set) =&gt; (&#123;</span><br><span class="line">	count: 0,</span><br><span class="line">    who: &#x27;å¥¶é¾™&#x27;,</span><br><span class="line">    addCounts: () =&gt; set(state =&gt; (&#123; votes: state.counts + 1 &#125;)),</span><br><span class="line">  	subtractCounts: () =&gt; set(state =&gt; (&#123; votes: state.count - 1 &#125;)),</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>â€‹	è§¦å‘addCountsåï¼Œåªæœ‰countsæ›´æ–°äº†ï¼Œè€Œå¥¶é¾™ä¸å˜ã€‚ğŸ˜‹</p>
<p>ä½†æ˜¯stateå°±æ²¡è¿™ä¹ˆæ–¹ä¾¿äº†ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [store, setStore] = <span class="title function_">useState</span>(&#123;  <span class="attr">count</span>: <span class="number">0</span>,<span class="title class_">Who</span>:<span class="string">&#x27;å¥¶é¾™&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addCounts</span> = (<span class="params">counts</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setStore</span>(<span class="function">(<span class="params">prevStore</span>) =&gt;</span> (&#123;</span><br><span class="line">    ...prevStore,</span><br><span class="line">    <span class="attr">counts</span>:counts + <span class="number">1</span></span><br><span class="line">  &#125;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨</strong>ï¼šzustandçš„å±€éƒ¨æ›´æ–°åªé€‚ç”¨äºç¬¬ä¸€å±‚å±æ€§ï¼Œå¦‚æœæ˜¯åµŒå¥—å¯¹è±¡ï¼Œé‚£å°±ä¼šæ— æ•ˆï¼Œæ¯”å¦‚ä¸‹é¢ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useCountStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">nested</span>: &#123;<span class="title class_">Who</span>: <span class="string">&#x27;å¥¶é¾™&#x27;</span>, <span class="attr">counts</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  <span class="attr">addCounts</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">nested</span>: &#123; <span class="attr">counts</span>: state.<span class="property">nested</span>.<span class="property">counts</span> + <span class="number">1</span> &#125;,</span><br><span class="line">    &#125;)),</span><br><span class="line">&#125;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> nested = <span class="title function_">useCountStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">nested</span>)</span><br><span class="line">  <span class="keyword">const</span> addCounts = <span class="title function_">useCountStore</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">addCounts</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;JSON.stringify(nested)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> addCounts()&#125;&gt;addCounts<span class="tag">&lt;/<span class="name">button</span>&gt;</span>//ç‚¹å‡»ä¹‹åï¼Œå¥¶é¾™å°±æ¶ˆå¤±äº†ğŸ˜­</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šï¼Œè¿™æ ·æ‰æ˜¯å¯¹çš„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">nested</span>: &#123; ...state.<span class="property">nested</span>, <span class="attr">count</span>: state.<span class="property">nested</span>.<span class="property">count</span> + <span class="number">1</span> &#125;,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="è®¿é—®å­˜å‚¨çŠ¶æ€ï¼š"><a href="#è®¿é—®å­˜å‚¨çŠ¶æ€ï¼š" class="headerlink" title="è®¿é—®å­˜å‚¨çŠ¶æ€ï¼š"></a>è®¿é—®å­˜å‚¨çŠ¶æ€ï¼š</h3><p>â€‹	æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨set()æ¥åˆ›å»ºçŠ¶æ€ã€‚é‚£ä¹ˆæ ¹æ®ç›¸å¯¹è®ºï¼Œå°±ä¸€å®šæœ‰ä¸€ä¸ªget()ã€‚åŒæ ·çš„ï¼Œåœ¨å‚æ•°ä¸­ä¼ å…¥getï¼Œå°±å¯ä»¥è®¿é—®å­˜å‚¨çŠ¶æ€äº†ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set,get</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">counts</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">addCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">votes</span>: state.<span class="property">counts</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">subtractCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">votes</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> userCounts = <span class="title function_">get</span>().<span class="property">counts</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶æˆ‘å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡è®¿é—®stateï¼Œé‚£æˆ‘è¿˜ç”¨è¿™ä¸ªget()è®¿é—®å­˜å‚¨çŠ¶æ€å¹²å˜›å‘¢ï¼Ÿæ‰€ä»¥è¯´ä½ åªçœ‹åˆ°äº†ç¬¬äºŒå±‚ï¼Œè€Œä½ æŠŠgetæƒ³æˆäº†ç¬¬ä¸€å±‚ï¼Œå®é™…ä¸Šï¼Œå®ƒåœ¨å¤§æ°”å±‚ï¼š</p>
<p>getçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>é¿å…é—­åŒ…é™·é˜±</strong><br> å¦‚æœåœ¨å¼‚æ­¥å‡½æ•°ä¸­ä¸ä½¿ç”¨ <code>get()</code>ï¼Œå¯èƒ½ä¼šæ•è·æ—§çš„çŠ¶æ€å€¼ï¼Œä»è€Œå¯¼è‡´çŠ¶æ€æ›´æ–°ä¸æ­£ç¡®ã€‚<code>get()</code> èƒ½è®©ä½ åœ¨æ‰§è¡Œæ—¶è·å¾—æœ€æ–°çš„çŠ¶æ€ï¼Œä»è€Œé¿å…è¿™ç§é—®é¢˜ã€‚</li>
<li><strong>ç®€åŒ–ä»£ç é€»è¾‘</strong><br> ä½¿ç”¨ <code>get()</code> ä¸éœ€è¦é€šè¿‡ä¼ é€’å‚æ•°æˆ–è€…ç»´æŠ¤é¢å¤–çš„ä¸­é—´å˜é‡ï¼Œå°±å¯ä»¥å³æ—¶è®¿é—®å½“å‰çš„çŠ¶æ€ã€‚å¯¹äºæŸäº›éœ€è¦ä¾èµ–å½“å‰çŠ¶æ€è®¡ç®—ç»“æœæˆ–æ¡ä»¶åˆ¤æ–­çš„é€»è¾‘ï¼Œ<code>get()</code> æä¾›äº†ä¸€ç§éå¸¸ç›´è§‚çš„æ–¹å¼ã€‚</li>
<li><strong>æé«˜æ¨¡å—åŒ–å’Œé‡ç”¨æ€§</strong><br> ç”±äº <code>get()</code> ä¸ <code>set()</code> ä¸€èµ·è¢«ä¼ å…¥åˆ° store åˆ›å»ºå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥æŠŠçŠ¶æ€ç›¸å…³çš„é€»è¾‘éƒ½å°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œè¿™æ ·ä»£ç æ›´å®¹æ˜“æ¨¡å—åŒ–å’Œé‡ç”¨ã€‚</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set, get</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">delayedIncrement</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> currentCount = <span class="title function_">get</span>().<span class="property">count</span>;</span><br><span class="line">      <span class="title function_">set</span>(&#123; <span class="attr">count</span>: currentCount + <span class="number">1</span> &#125;);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>â€‹	<code>get()</code> æ–¹æ³•åœ¨ <code>setTimeout</code> çš„å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶è·å–å½“å‰çš„ <code>count</code> å€¼ï¼Œç¡®ä¿äº†çŠ¶æ€æ›´æ–°çš„å‡†ç¡®æ€§ã€‚æ— è®ºåœ¨è°ƒç”¨ <code>delayedIncrement</code> åçš„ 1 ç§’å†… <code>count</code> çš„å€¼å¦‚ä½•å˜åŒ–ï¼Œ<code>set()</code> éƒ½ä¼šåŸºäºæœ€æ–°çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ã€‚</p>
<h3 id="å¼‚æ­¥è·å–æ•°æ®ï¼š"><a href="#å¼‚æ­¥è·å–æ•°æ®ï¼š" class="headerlink" title="å¼‚æ­¥è·å–æ•°æ®ï¼š"></a>å¼‚æ­¥è·å–æ•°æ®ï¼š</h3><p>â€‹	æ­£å¦‚ä¹‹å‰æ‰€ä»‹ç»çš„ï¼Œzustandä¸éœ€è¦ä¸­é—´ä»¶ï¼Œå¯ä»¥ç›´æ¥å‘èµ·fetchè¯·æ±‚æ¥è·å–å¼‚æ­¥æ•°æ®ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set,get</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">counts</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">addCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">votes</span>: state.<span class="property">counts</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">subtractCounts</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">votes</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">action</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> userCounts = <span class="title function_">get</span>().<span class="property">counts</span></span><br><span class="line">  &#125;</span><br><span class="line">   <span class="attr">fetch</span>: <span class="title function_">async</span> (url) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</span><br><span class="line">    <span class="title function_">set</span>(&#123; <span class="attr">counts</span>: <span class="keyword">await</span> res.<span class="title function_">json</span>() &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å…³äºä¸­é—´ä»¶ï¼š"><a href="#å…³äºä¸­é—´ä»¶ï¼š" class="headerlink" title="å…³äºä¸­é—´ä»¶ï¼š"></a>å…³äºä¸­é—´ä»¶ï¼š</h3><h4 id="1-persistï¼šæŒä¹…åŒ–çŠ¶æ€"><a href="#1-persistï¼šæŒä¹…åŒ–çŠ¶æ€" class="headerlink" title="1.persistï¼šæŒä¹…åŒ–çŠ¶æ€"></a>1.<strong>persist</strong>ï¼šæŒä¹…åŒ–çŠ¶æ€</h4><p>â€‹	æŒä¹…åŒ–çŠ¶æ€æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæ¯”å¦‚åœ¨ æœ‰formçš„ç½‘ç«™ä¸­, ä½ å¸Œæœ›ä¿å­˜ç”¨æˆ·ä¿¡æ¯, å¦‚æœç”¨æˆ·ä¸å°å¿ƒåˆ·æ–°äº†é¡µé¢, å°±ä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®è®°å½•. ä½†æ˜¯æœ‰äº†persistå°±ä¸ä¸€æ ·ï¼Œpersisté€šè¿‡ <code>localStorage</code> æ¥æŒä¹…åŒ–æ¥è‡ªåº”ç”¨ç¨‹åºçš„æ•°æ®, è¿™æ ·, å½“æˆ‘ä»¬åˆ·æ–°é¡µé¢æˆ–è€…å®Œå…¨å…³é—­é¡µé¢æ—¶, çŠ¶æ€ä¸ä¼šé‡ç½®</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; persist &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(</span><br><span class="line">  <span class="title function_">persist</span>(</span><br><span class="line">    <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">increase</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">      <span class="attr">reset</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;my-counter-store&#x27;</span>, </span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Persist</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">count</span>)</span><br><span class="line">    <span class="keyword">const</span> increase = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">increase</span>)</span><br><span class="line">    <span class="keyword">const</span> reset = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">reset</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increase&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;reset&#125;</span>&gt;</span>Reset<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Persist</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-immerï¼šç®€åŒ–ä¸å¯å˜æ•°æ®æ›´æ–°"><a href="#2-immerï¼šç®€åŒ–ä¸å¯å˜æ•°æ®æ›´æ–°" class="headerlink" title="2.immerï¼šç®€åŒ–ä¸å¯å˜æ•°æ®æ›´æ–°:"></a>2.<strong>immer</strong>ï¼šç®€åŒ–ä¸å¯å˜æ•°æ®æ›´æ–°:</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; produce &#125; <span class="keyword">from</span> <span class="string">&#x27;immer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">todos</span>: [<span class="string">&#x27;å­¦ä¹  Zustand&#x27;</span>],</span><br><span class="line">  <span class="attr">increase</span>: <span class="function">() =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(</span><br><span class="line">      <span class="title function_">produce</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">        state.<span class="property">count</span> += <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ),</span><br><span class="line">  <span class="attr">addTodo</span>: <span class="function">(<span class="params"><span class="attr">todo</span>: <span class="built_in">string</span></span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(</span><br><span class="line">      <span class="title function_">produce</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">        state.<span class="property">todos</span>.<span class="title function_">push</span>(todo)</span><br><span class="line">      &#125;)</span><br><span class="line">    ),</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Immer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">count</span>)</span><br><span class="line">    <span class="keyword">const</span> todos = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">todos</span>)</span><br><span class="line">    <span class="keyword">const</span> increase = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">increase</span>)</span><br><span class="line">    <span class="keyword">const</span> addTodo = <span class="title function_">useStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">addTodo</span>)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Count: &#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increase&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Todos:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;todos.map((todo, idx) =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;idx&#125;</span>&gt;</span>&#123;todo&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> addTodo(&#x27;æ–°çš„å¾…åŠé¡¹&#x27;)&#125;&gt;æ·»åŠ  Todo<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Immer</span></span><br></pre></td></tr></table></figure>

<p>â€‹	è¿™é‡Œçš„ <code>produce</code> ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>state</code> çš„å‰¯æœ¬ï¼Œä½ å¯¹å‰¯æœ¬ï¼ˆå³è‰ç¨¿ï¼‰è¿›è¡Œä¿®æ”¹ï¼Œæœ€åä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œè€ŒåŸå§‹çš„çŠ¶æ€ä¸ä¼šè¢«ç›´æ¥ä¿®æ”¹ã€‚</p>
<p>â€‹	produceæ˜¯immeræœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œé™¤äº†è¿™ä¸ªä¹‹å¤–ï¼Œimmerè¿˜å¯ä»¥å¯¼å…¥å…¶ä»–çš„å‡½æ•°ï¼Œæ¯”å¦‚<code>createDraft</code>ç”¨æ¥åˆ›å»ºè‰ç¨¿ï¼Œè‰ç¨¿æ˜¯ä¸€ä¸ªåŸå§‹çŠ¶æ€çš„å¯å˜å‰¯æœ¬ï¼Œå®ƒå¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚åœ¨ä½ ä¿®æ”¹è‰ç¨¿ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ <code>finishDraft</code> å‡½æ•°æ¥å°†å®ƒè½¬å˜ä¸ºä¸å¯å˜å¯¹è±¡ï¼›å¯¼å…¥<code>original</code> å¯ä»¥ç”¨æ¥è·å–çŠ¶æ€æ ‘ä¸­çš„åŸå§‹å¯¹è±¡ã€‚å®ƒå…è®¸ä½ è®¿é—®å’Œæ¯”è¾ƒè‰ç¨¿å¯¹è±¡çš„åŸå§‹çŠ¶æ€ï¼Œç­‰ç­‰ã€‚</p>
<h4 id="3-combine-ç»„åˆå¤šä¸ªçŠ¶æ€ç‰‡æ®µ"><a href="#3-combine-ç»„åˆå¤šä¸ªçŠ¶æ€ç‰‡æ®µ" class="headerlink" title="3.combine:ç»„åˆå¤šä¸ªçŠ¶æ€ç‰‡æ®µ"></a>3.<strong>combine:ç»„åˆå¤šä¸ªçŠ¶æ€ç‰‡æ®µ</strong></h4><p>â€‹	é¡¾åæ€ä¹‰ï¼Œ<code>combine(initialState, createFns)</code> å°±æ˜¯ç»„åˆã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; combine &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(</span><br><span class="line">  <span class="title function_">combine</span>(</span><br><span class="line">    &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;, </span><br><span class="line">    <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">increase</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">      <span class="attr">decrease</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;)),</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸éš¾çœ‹å‡ºï¼Œcombineçš„ç”¨æ³•éå¸¸ç®€å•ï¼Œå°±æ˜¯å°†å€¼å’Œå‡½æ•°åˆæˆä¸€ä¸ªå®Œæ•´çš„ storeã€‚å¦‚æœæ˜¯ç®€å•çš„å…¨å±€çŠ¶æ€ç®¡ç†åˆ™æ²¡å¿…è¦ç”¨åˆ°combineï¼Œcombineé€‚ç”¨äºå®ç°stateä¸ actions åˆ†ç¦»çš„ç»“æ„ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/useAdminStore.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; combine &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userSlice = <span class="title function_">combine</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">user</span>: <span class="literal">null</span> <span class="keyword">as</span> <span class="literal">null</span> | &#123; <span class="attr">id</span>: <span class="built_in">number</span>; <span class="attr">name</span>: <span class="built_in">string</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="function">(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>) =&gt;</span></span><br><span class="line">      <span class="title function_">set</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(), name &#125; &#125;),</span><br><span class="line">    <span class="attr">logout</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">user</span>: <span class="literal">null</span> &#125;),</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> articleSlice = <span class="title function_">combine</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">articles</span>: [] <span class="keyword">as</span> &#123; <span class="attr">id</span>: <span class="built_in">number</span>; <span class="attr">title</span>: <span class="built_in">string</span>; <span class="attr">content</span>: <span class="built_in">string</span> &#125;[],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">addArticle</span>: <span class="function">(<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">content</span>: <span class="built_in">string</span></span>) =&gt;</span></span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">articles</span>: [</span><br><span class="line">          ...state.<span class="property">articles</span>,</span><br><span class="line">          &#123; <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(), title, content &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;)),</span><br><span class="line">    <span class="attr">removeArticle</span>: <span class="function">(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) =&gt;</span></span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">articles</span>: state.<span class="property">articles</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">a</span>) =&gt;</span> a.<span class="property">id</span> !== id),</span><br><span class="line">      &#125;)),</span><br><span class="line">    <span class="attr">updateArticle</span>: <span class="function">(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span>, <span class="attr">newData</span>: &#123; title?: <span class="built_in">string</span>; content?: <span class="built_in">string</span> &#125;</span>) =&gt;</span></span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">articles</span>: state.<span class="property">articles</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">a</span>) =&gt;</span></span><br><span class="line">          a.<span class="property">id</span> === id ? &#123; ...a, ...newData &#125; : a</span><br><span class="line">        ),</span><br><span class="line">      &#125;)),</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> uiSlice = <span class="title function_">combine</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">activeTab</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">setLoading</span>: <span class="function">(<span class="params"><span class="attr">loading</span>: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">isLoading</span>: loading &#125;),</span><br><span class="line">    <span class="attr">setActiveTab</span>: <span class="function">(<span class="params"><span class="attr">tab</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">activeTab</span>: tab &#125;),</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useAdminStore = <span class="title function_">create</span>(<span class="function">(<span class="params">...a</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...<span class="title function_">userSlice</span>(...a),</span><br><span class="line">  ...<span class="title function_">articleSlice</span>(...a),</span><br><span class="line">  ...<span class="title function_">uiSlice</span>(...a),</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useAdminStore</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2025/03/17/http%E4%B8%8EWebSocket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/17/http%E4%B8%8EWebSocket/" class="post-title-link" itemprop="url">httpä¸WebSocket</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-03-17 19:34:58" itemprop="dateCreated datePublished" datetime="2025-03-17T19:34:58+08:00">2025-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-03-23 14:50:38" itemprop="dateModified" datetime="2025-03-23T14:50:38+08:00">2025-03-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-http"><a href="#1-http" class="headerlink" title="1. http"></a>1. http</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯httpï¼š"><a href="#1-1-ä»€ä¹ˆæ˜¯httpï¼š" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯httpï¼š"></a>1.1 ä»€ä¹ˆæ˜¯httpï¼š</h2><p>â€‹	httpï¼Œå³è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯TCP&#x2F;IPåè®®é›†ä¸­çš„ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼Œæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’æ—¶å¿…é¡»éµå¾ªçš„è§„åˆ™ã€‚å®ƒç”¨äºWebæµè§ˆå™¨ä¸WebæœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä»¥åŠæ•°æ®æœ¬èº«çš„æ ¼å¼ï¼Œåº•å±‚åˆ™æ˜¯é TCPè¿›è¡Œå¯é åœ°ä¿¡æ¯ä¼ è¾“ã€‚</p>
<p><strong>é™„</strong>ï¼šé™¤äº†httpï¼Œæˆ‘ä»¬ç»å¸¸èƒ½å¤Ÿçœ‹è§httpsã€‚httpsä¸æ˜¯httpçš„å¤æ•°ï¼Œè€Œæ˜¯åœ¨httpçš„åŸºç¡€ä¸Šè¿›è¡Œäº†åŠ å¯†å·¥ä½œï¼Œå…·ä½“åœ¨åæ–‡è¿›è¡Œä»‹ç»ã€‚</p>
<h2 id="1-2-httpå¦‚ä½•å·¥ä½œï¼š"><a href="#1-2-httpå¦‚ä½•å·¥ä½œï¼š" class="headerlink" title="1.2 httpå¦‚ä½•å·¥ä½œï¼š"></a>1.2 httpå¦‚ä½•å·¥ä½œï¼š</h2><p>â€‹	åœ¨æµè§ˆå™¨çš„ä¸Šæ–¹ï¼Œæœ‰ä¸€ä¸ªåœ°å€æ ã€‚å¦‚æœæˆ‘ä»¬åœ¨å…¶ä¸­è¾“å…¥ä¸€ä¸ªURL,æµè§ˆå™¨å°±ä¼šç»™å¯¹åº”çš„æœåŠ¡å™¨å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå°±ä¼šè¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ä¸€ä¸ªhttpå“åº”ã€‚é‚£ä¹ˆï¼Œå…·ä½“çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p>
<ol>
<li><strong>å»ºç«‹è¿æ¥</strong>ï¼šå®¢æˆ·ç«¯ï¼ˆå¦‚Webæµè§ˆå™¨ï¼‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚è¿™ä¸ªè¿æ¥æ˜¯é€šè¿‡TCPåè®®å®Œæˆçš„ï¼ŒæœŸé—´ç»è¿‡äº†ä¸‰æ¬¡æ¡æ‰‹ã€‚HTTPåè®®æ˜¯çŸ­è¿æ¥çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚ï¼ˆhttp&#x2F;1.1ååˆå¼•å…¥äº†æŒä¹…è¿æ¥Keep-Aliveï¼Œé€šè¿‡å¤ç”¨TCPè¿æ¥æ¥å‘é€å¤šä¸ªhttpè¯·æ±‚å’Œæ¥å—å¤šä¸ªå“åº”ï¼‰</li>
<li><strong>å‘é€è¯·æ±‚</strong>ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚è¯·æ±‚çš„æ ¼å¼åŒ…æ‹¬è¯·æ±‚è¡Œã€è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ã€‚è¯·æ±‚è¡ŒåŒ…å«è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚GETã€POSTï¼‰ã€è¯·æ±‚çš„URLå’ŒHTTPç‰ˆæœ¬ã€‚è¯·æ±‚å¤´åŒ…å«ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œå¦‚ä¸»æœºã€ç”¨æˆ·ä»£ç†ç­‰ã€‚è¯·æ±‚ä½“åˆ™åŒ…å«å®é™…çš„æ•°æ®ã€‚</li>
<li><strong>æœåŠ¡å™¨å“åº”</strong>ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè¿›è¡Œå¤„ç†å¹¶è¿”å›å“åº”ã€‚å“åº”çš„æ ¼å¼åŒ…æ‹¬çŠ¶æ€è¡Œã€å“åº”å¤´å’Œå“åº”ä½“ã€‚çŠ¶æ€è¡ŒåŒ…å«HTTPç‰ˆæœ¬ã€çŠ¶æ€ç å’ŒçŠ¶æ€æè¿°ã€‚å“åº”å¤´åŒ…å«ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œå¦‚æœåŠ¡å™¨ç±»å‹ã€å†…å®¹ç±»å‹ç­‰ã€‚å“åº”ä½“åˆ™åŒ…å«å®é™…çš„æ•°æ®ï¼Œå¦‚HTMLæ–‡æ¡£ã€‚</li>
<li><strong>å…³é—­è¿æ¥</strong>ï¼šæœåŠ¡å™¨å‘é€å®Œå“åº”åï¼Œå…³é—­è¿æ¥ã€‚HTTPæ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡è¯·æ±‚å’Œå“åº”éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¿ç•™è¿æ¥çš„çŠ¶æ€ä¿¡æ¯ã€‚</li>
</ol>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<p>â€‹	<img src="https://th.bing.com/th/id/OIP.YZt-rVLQzDPDZNIff5QXlAHaE6?w=242&h=180&c=7&r=0&o=5&dpr=2&pid=1.7" alt="ç¤ºä¾‹å›¾ç‰‡"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure>

<ul>
<li><code>GET /index.html HTTP/1.1</code>ï¼šè¯·æ±‚æ–¹æ³•+èµ„æºè·¯å¾„+HTTP ç‰ˆæœ¬</li>
<li><code>Host: www.example.com</code>ï¼šç›®æ ‡æœåŠ¡å™¨åœ°å€</li>
<li><code>User-Agent: Mozilla/5.0 ...</code>ï¼šå®¢æˆ·ç«¯ç±»å‹ï¼ˆæµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰</li>
<li><code>Accept: text/html,...</code>ï¼šå®¢æˆ·ç«¯å¯æ¥å—çš„æ•°æ®ç±»å‹</li>
<li><code>Accept-Encoding: gzip,...</code>ï¼šæ”¯æŒçš„å‹ç¼©æ ¼å¼</li>
<li><code>Connection: keep-alive</code>ï¼šè¿æ¥æ–¹å¼ï¼Œæ˜¯å¦ä¿æŒè¿æ¥</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Wed, 19 Mar 2025 12:00:00 GMT</span><br><span class="line">Server: Apache/2.4.41 (Ubuntu)</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Content-Length: 1024</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;&lt;title&gt;ç¤ºä¾‹&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">  &lt;body&gt;&lt;h1&gt;å§œåœ£ï¼&lt;/h1&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>HTTP/1.1 200 OK</code>ï¼šHTTP ç‰ˆæœ¬ + çŠ¶æ€ç  + çŠ¶æ€ä¿¡æ¯</li>
<li><code>Date: Wed, 19 Mar 2025 12:00:00 GMT</code>ï¼šå“åº”æ—¶é—´</li>
<li><code>Server: Apache/2.4.41 (Ubuntu)</code>ï¼šæœåŠ¡å™¨ä¿¡æ¯</li>
<li><code>Content-Length: 1024</code>ï¼šå“åº”ä½“å¤§å°ï¼ˆå­—èŠ‚æ•°ï¼‰</li>
<li><code>Connection: keep-alive</code>ï¼šè¿æ¥æ–¹å¼ï¼Œæ”¯æŒé•¿è¿æ¥</li>
<li><code>å“åº”ä½“</code>ï¼š<code>&lt;html&gt;...&lt;/html&gt;</code> æ˜¯æœåŠ¡å™¨è¿”å›çš„ HTML é¡µé¢</li>
</ul>
<p>**çŸ­è¿æ¥ï¼šHTTP&#x2F;1.0 åŠé»˜è®¤æƒ…å†µï¼Œè¯·æ±‚å®Œæˆåå…³é—­è¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection: close</span><br></pre></td></tr></table></figure>

<p><strong>é•¿è¿æ¥</strong>ï¼šHTTP&#x2F;1.1 åŠä»¥ä¸Šé»˜è®¤å¯ç”¨é•¿è¿æ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure>

<hr>
<p>çœæµå°±æ˜¯ï¼š<strong>ä¸€å‘ä¸€æ”¶ï¼Œä¸€é—®ä¸€ç­”</strong>ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/02dac5e6e5044a8d9a1e663ec55d8abe.png" alt="ç¤ºä¾‹å›¾ç‰‡"></p>
<p>å½“ç„¶ï¼Œåœ¨http&#x2F;2ä¸­ï¼Œè¿˜å¯ä»¥å®ç°å…¶ä»–çš„æ¨¡å¼ï¼š</p>
<ul>
<li><h6 id="ä¸€å‘å¤šæ”¶ï¼ˆä¸€ä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰"><a href="#ä¸€å‘å¤šæ”¶ï¼ˆä¸€ä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰" class="headerlink" title="ä¸€å‘å¤šæ”¶ï¼ˆä¸€ä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰"></a><strong>ä¸€å‘å¤šæ”¶ï¼ˆä¸€ä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰</strong></h6></li>
<li><h6 id="å¤šå‘ä¸€æ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªå“åº”ï¼‰"><a href="#å¤šå‘ä¸€æ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªå“åº”ï¼‰" class="headerlink" title="å¤šå‘ä¸€æ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªå“åº”ï¼‰"></a><strong>å¤šå‘ä¸€æ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªå“åº”ï¼‰</strong></h6></li>
<li><h6 id="å¤šå‘å¤šæ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰"><a href="#å¤šå‘å¤šæ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰" class="headerlink" title="å¤šå‘å¤šæ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰"></a><strong>å¤šå‘å¤šæ”¶ï¼ˆå¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªå“åº”ï¼‰</strong></h6></li>
</ul>
<p>å½“ç„¶éƒ½æ˜¯åè¯äº†ï¼Œç­‰æˆ‘ä¸‹æ¬¡å†è®²ï¼ˆåˆå¯ä»¥æ°´ä¸€æœŸåˆ†äº«äº†ğŸ˜‹ï¼‰</p>
<h2 id="1-3-httpçš„æ–¹æ³•ï¼š"><a href="#1-3-httpçš„æ–¹æ³•ï¼š" class="headerlink" title="1.3 httpçš„æ–¹æ³•ï¼š"></a>1.3 httpçš„æ–¹æ³•ï¼š</h2><h3 id="1-GET"><a href="#1-GET" class="headerlink" title="1. GET"></a>1. <strong>GET</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šè¯·æ±‚æŒ‡å®šçš„èµ„æºã€‚GETè¯·æ±‚é€šå¸¸ç”¨äºè·å–æ•°æ®ï¼Œè€Œä¸ä¼šå¯¹èµ„æºäº§ç”Ÿå‰¯ä½œç”¨ã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯·æ±‚çš„å‚æ•°é™„åŠ åœ¨URLä¸­ï¼ˆæŸ¥è¯¢å­—ç¬¦ä¸²ï¼‰ã€‚</li>
<li>å¯ä»¥è¢«ç¼“å­˜ã€‚</li>
<li>ä¸åº”ä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</li>
<li>å¹‚ç­‰æ€§</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>è·å–ç½‘é¡µå†…å®¹ã€‚</li>
<li>æŸ¥è¯¢æ•°æ®åº“è®°å½•ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-POST"><a href="#2-POST" class="headerlink" title="2. POST"></a>2. <strong>POST</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºæ–°èµ„æºæˆ–è§¦å‘æœåŠ¡å™¨ä¸Šçš„å¤„ç†æ“ä½œã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯·æ±‚çš„å‚æ•°åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</li>
<li>ä¸ä¼šè¢«ç¼“å­˜ã€‚</li>
<li>å¯èƒ½ä¼šä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</li>
<li>ä¸å…·æœ‰å¹‚ç­‰æ€§ã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /submit-form HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">username=ğŸ«š&amp;password=123456</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æäº¤è¡¨å•æ•°æ®ã€‚</li>
<li>ä¸Šä¼ æ–‡ä»¶ã€‚</li>
<li>åˆ›å»ºæ–°èµ„æºï¼ˆå¦‚ç”¨æˆ·æ³¨å†Œï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-PUT"><a href="#3-PUT" class="headerlink" title="3. PUT"></a>3. <strong>PUT</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šæ›´æ–°æŒ‡å®šèµ„æºã€‚å¦‚æœèµ„æºä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°èµ„æºã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯·æ±‚çš„å‚æ•°åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</li>
<li>å¹‚ç­‰æ€§ã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PUT /users/123 HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;: &quot;ğŸ¦ŒğŸŸâš½&quot;, &quot;password&quot;: 159357&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æ›´æ–°ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li>æ›¿æ¢ç°æœ‰èµ„æºã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-DELETE"><a href="#4-DELETE" class="headerlink" title="4. DELETE"></a>4. <strong>DELETE</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šåˆ é™¤æŒ‡å®šçš„èµ„æºã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å¹‚ç­‰æ€§ã€‚</li>
<li>è¯·æ±‚é€šå¸¸æ²¡æœ‰è¯·æ±‚ä½“ã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELETE /users/123 HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>åˆ é™¤ç”¨æˆ·ã€‚</li>
<li>åˆ é™¤æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="5-HEAD"><a href="#5-HEAD" class="headerlink" title="5. HEAD"></a>5. <strong>HEAD</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šè¯·æ±‚èµ„æºçš„å…ƒä¿¡æ¯ï¼Œè€Œä¸è¿”å›å®é™…å†…å®¹ã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å“åº”ä¸­æ²¡æœ‰å“åº”ä½“ã€‚</li>
<li>å¯ä»¥ç”¨äºæ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨æˆ–è·å–èµ„æºçš„å…ƒä¿¡æ¯ï¼ˆå¦‚å¤§å°ã€ç±»å‹ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HEAD /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°ï¼ˆé€šè¿‡<code>Last-Modified</code>æˆ–<code>ETag</code>ï¼‰ã€‚</li>
<li>è·å–èµ„æºçš„å¤§å°å’Œç±»å‹ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="6-OPTIONS"><a href="#6-OPTIONS" class="headerlink" title="6. OPTIONS"></a>6. <strong>OPTIONS</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šè·å–æœåŠ¡å™¨æ”¯æŒçš„HTTPæ–¹æ³•æˆ–å…¶ä»–é€‰é¡¹ã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å“åº”ä¸­åŒ…å«<code>Allow</code>å¤´éƒ¨ï¼Œåˆ—å‡ºæ”¯æŒçš„HTTPæ–¹æ³•ã€‚</li>
<li>å¹‚ç­‰æ€§</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥æœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ã€‚</li>
<li>è·¨åŸŸè¯·æ±‚æ—¶ï¼Œç”¨äºé¢„æ£€è¯·æ±‚ï¼ˆPreflight Requestï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="7-TRACE"><a href="#7-TRACE" class="headerlink" title="7. TRACE"></a>7. <strong>TRACE</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šç”¨äºè¯Šæ–­æˆ–æµ‹è¯•ï¼ŒæœåŠ¡å™¨ä¼šå°†æ”¶åˆ°çš„è¯·æ±‚åŸæ ·è¿”å›,ä»¥ä¾¿å®¢æˆ·ç«¯æ£€æŸ¥è¯·æ±‚æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å“åº”ä¸­åŒ…å«å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä¿¡æ¯ã€‚</li>
<li>é€šå¸¸ç”¨äºè°ƒè¯•ã€‚</li>
<li>å¹‚ç­‰æ€§</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TRACE /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥è¯·æ±‚åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«ä¿®æ”¹ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="8-CONNECT"><a href="#8-CONNECT" class="headerlink" title="8. CONNECT"></a>8. <strong>CONNECT</strong></h3><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šç”¨äºå»ºç«‹ä¸æœåŠ¡å™¨çš„éš§é“è¿æ¥ï¼Œé€šå¸¸ç”¨äºHTTPSä»£ç†ã€‚</p>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯·æ±‚ä¸­åŒ…å«ç›®æ ‡æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£ã€‚</li>
<li>ç”¨äºå®¢æˆ·ç«¯é€šè¿‡ä»£ç†æœåŠ¡å™¨ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚</li>
</ul>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONNECT www.example2.com:443 HTTP/1.1</span><br><span class="line">Host: www.example1.com</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¸¸è§ç”¨é€”</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ä»£ç†æœåŠ¡å™¨å»ºç«‹HTTPSè¿æ¥ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>é™„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://img2020.cnblogs.com/blog/1430250/202010/1430250-20201007103219405-319114234.png" alt="ç¤ºä¾‹å›¾ç‰‡"></p>
<p>â€‹	<strong>å¹‚ç­‰æ€§ï¼š</strong>åœ¨å¿½ç•¥é”™è¯¯æˆ–è¿‡æœŸé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå¤šæ¬¡ç›¸åŒè¯·æ±‚çš„å‰¯ä½œç”¨ä¸ä¸€æ¬¡è¯·æ±‚çš„å‰¯ä½œç”¨ç›¸åŒã€‚æ€»ç»“å°±æ˜¯å¤šæ¬¡æ‰§è¡Œåæ•ˆæœç›¸åŒï¼Œä¸å­˜åœ¨å‰¯ä½œç”¨ã€‚è€Œpostæ¯æ¬¡è¯·æ±‚éƒ½å›åˆ›å»ºæ–°çš„èµ„æºï¼Œå› æ­¤æ˜¯ä¸å¹‚ç­‰çš„ã€‚</p>
<hr>
<h2 id="1-4-httpçš„çŠ¶æ€ç "><a href="#1-4-httpçš„çŠ¶æ€ç " class="headerlink" title="1.4 httpçš„çŠ¶æ€ç "></a>1.4 httpçš„çŠ¶æ€ç </h2><ul>
<li><p><strong>1xxï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰</strong>ï¼šè¡¨ç¤ºè¯·æ±‚å·²è¢«æ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚</p>
</li>
<li><p><strong>2xxï¼ˆæˆåŠŸï¼‰</strong>ï¼š</p>
<ul>
<li><strong>200 OK</strong>ï¼šè¯·æ±‚æˆåŠŸã€‚</li>
<li><strong>201 Created</strong>ï¼šèµ„æºå·²åˆ›å»ºã€‚</li>
<li><strong>204 No Content</strong>ï¼šæˆåŠŸä½†æ— å“åº”ä½“ã€‚</li>
<li>**206 Partial Content :**èŒƒå›´è¯·æ±‚æˆåŠŸ</li>
</ul>
</li>
<li><p><strong>3xxï¼ˆé‡å®šå‘ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>301 Moved Permanently</strong>ï¼šæ°¸ä¹…é‡å®šå‘ï¼ˆèµ„æºè¢«åˆ†é…äº†æ–°çš„URI)ã€‚</li>
<li><strong>302 Found</strong>ï¼šä¸´æ—¶é‡å®šå‘ï¼ˆèµ„æºè¢«åˆ†é…äº†æ–°çš„URIï¼Œä½†æ˜¯æœªæ¥è¿˜æœ‰å¯èƒ½æ”¹å˜ï¼‰ã€‚</li>
<li><strong>304 Not Modified</strong>ï¼šå…è®¸è®¿é—®èµ„æºï¼Œä½†æœªæ»¡è¶³æ¡ä»¶ã€‚</li>
</ul>
</li>
<li><p><strong>4xxï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>400 Bad Request</strong>ï¼šè¯·æ±‚è¯­æ³•é”™è¯¯ã€‚</li>
<li><strong>401 Unauthorized</strong>ï¼šæœªè®¤è¯ã€‚</li>
<li><strong>403 Forbidden</strong>ï¼šæ— æƒé™ã€‚</li>
<li><strong>404 Not Found</strong>ï¼šèµ„æºä¸å­˜åœ¨ã€‚</li>
</ul>
</li>
<li><p><strong>5xxï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>500 Internal Server Error</strong>ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚</li>
<li><strong>502 Bad Gateway</strong>ï¼šç½‘å…³é”™è¯¯ã€‚</li>
<li><strong>503 Service Unavailable</strong>ï¼šæœåŠ¡ä¸å¯ç”¨ï¼ˆå¦‚æ­¦å™¨è¶…è´Ÿè½½æˆ–æ­£åœ¨ç»´æŠ¤ï¼‰ã€‚</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/183f18213593408bb7c612a2175ea749.png#pic_center" alt="ç¤ºä¾‹å›¾ç‰‡"></p>
</li>
</ul>
<hr>
<h2 id="1-5-httpçš„ä¸è¶³ï¼š"><a href="#1-5-httpçš„ä¸è¶³ï¼š" class="headerlink" title="1.5 httpçš„ä¸è¶³ï¼š"></a>1.5 httpçš„ä¸è¶³ï¼š</h2><h3 id="1-æ— çŠ¶æ€æ€§"><a href="#1-æ— çŠ¶æ€æ€§" class="headerlink" title="1.æ— çŠ¶æ€æ€§"></a>1.<strong>æ— çŠ¶æ€æ€§</strong></h3><ul>
<li><p><strong>é—®é¢˜</strong>ï¼š</p>
<p>â€‹	HTTPæ˜¯æ— çŠ¶æ€åè®®ï¼ŒæœåŠ¡å™¨ä¸ä¼šè®°ä½å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¿ç•™ä¹‹å‰çš„è¯·æ±‚ä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>å¢åŠ äº†å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚æ€§ã€‚</li>
<li>éœ€è¦é¢å¤–çš„æœºåˆ¶ï¼ˆå¦‚Cookieã€Sessionï¼Œè¡¥å……åœ¨é™„å½•ï¼‰æ¥ç®¡ç†çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><p><strong>æ”¹è¿›</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Cookieæˆ–Sessionæ¥ç®¡ç†çŠ¶æ€ã€‚</li>
<li>ä½¿ç”¨Tokenè¿›è¡Œæ— çŠ¶æ€è®¤è¯ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-å®‰å…¨é—®é¢˜"><a href="#2-å®‰å…¨é—®é¢˜" class="headerlink" title="2.å®‰å…¨é—®é¢˜"></a>2.å®‰å…¨é—®é¢˜</h3><p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>é€šä¿¡é‡‡ç”¨æ˜æ–‡ï¼Œå†…å®¹å¯èƒ½è¢«çªƒå¬</li>
<li>ä¸éªŒè¯é€šä¿¡åŒæ–¹çš„èº«ä»½ï¼Œå¯èƒ½é­é‡ä¼ªè£…</li>
<li>æ— æ³•éªŒè¯æ˜æ–‡çš„å®Œæ•´æ€§ï¼Œæœ‰å¯èƒ½é­åˆ°ç¯¡æ”¹</li>
</ul>
<p><strong>æ”¹è¿›</strong>ï¼š</p>
<p>â€‹	è¯ç”Ÿäº†httpsï¼Œä½¿ç”¨httpsï¼ˆhttp over SSL&#x2F;TLSï¼‰åŠ å¯†ä¼ è¾“æ•°æ®ã€‚</p>
<p>ï¼ˆhttpsè§é™„å½•ï¼‰</p>
<hr>
<h3 id="3-å¤´éƒ¨å†—ä½™"><a href="#3-å¤´éƒ¨å†—ä½™" class="headerlink" title="3. å¤´éƒ¨å†—ä½™"></a>3. <strong>å¤´éƒ¨å†—ä½™</strong></h3><p><strong>é—®é¢˜</strong>ï¼š</p>
<p>â€‹	HTTPè¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨ä¿¡æ¯æ˜¯æ–‡æœ¬æ ¼å¼çš„ï¼Œä¸”æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå‘é€å®Œæ•´çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¯¼è‡´å†—ä½™ã€‚</p>
<p><strong>æ”¹è¿›</strong>ï¼š</p>
<p>â€‹	http&#x2F;2å¼•å…¥äº†å¤´éƒ¨å‹ç¼©ï¼ˆHPACKï¼‰ï¼Œå‡å°‘äº†å¤´éƒ¨ä¿¡æ¯çš„å†—ä½™ã€‚</p>
<hr>
<h3 id="4-ä¸æ”¯æŒæœåŠ¡å™¨æ¨é€"><a href="#4-ä¸æ”¯æŒæœåŠ¡å™¨æ¨é€" class="headerlink" title="4. ä¸æ”¯æŒæœåŠ¡å™¨æ¨é€"></a>4. <strong>ä¸æ”¯æŒæœåŠ¡å™¨æ¨é€</strong></h3><p><strong>é—®é¢˜</strong>ï¼š</p>
<p>â€‹	HTTP&#x2F;1.xä¸æ”¯æŒæœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ•°æ®ï¼Œå®¢æˆ·ç«¯å¿…é¡»é€šè¿‡è½®è¯¢æˆ–é•¿è½®è¯¢æ¥è·å–æ›´æ–°ï¼Œå¯¼è‡´å®æ—¶æ€§å·®ï¼Œå¢åŠ äº†å®¢æˆ·ç«¯çš„è´Ÿæ‹…ã€‚</p>
<p><strong>æ”¹è¿›</strong>ï¼š</p>
<p>â€‹	HTTP&#x2F;2æ”¯æŒæœåŠ¡å™¨æ¨é€ï¼ˆServer Pushï¼‰ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€èµ„æºã€‚</p>
<p><strong>é™„ï¼š</strong><br>        è½®è¯¢ï¼šå®¢æˆ·ç«¯æ¯éš”ä¸€æ®µæ—¶é—´å‘æœåŠ¡å™¨å‘é€httpè¯·æ±‚ï¼ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚åä¸è®ºæ˜¯å¦æœ‰æ•°æ®æ›´æ–°ï¼Œéƒ½ç›´æ¥	è¿›è¡Œå“åº”ã€‚</p>
<p>â€‹		é•¿è½®è¯¢ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰æ•°æ®æ›´æ–°ï¼Œå°±æŠŠè¯·æ±‚æŒ‚ä½ï¼Œç›´åˆ°æœåŠ¡ç«¯çš„æ•°æ®å‘ç”Ÿ	äº†æ›´æ–°ï¼Œæˆ–è€…è¶…æ—¶ä¾¿ä¼šè¿”å›ã€‚</p>
<hr>
<h3 id="5-æ€§èƒ½é—®é¢˜"><a href="#5-æ€§èƒ½é—®é¢˜" class="headerlink" title="5. æ€§èƒ½é—®é¢˜"></a>5. <strong>æ€§èƒ½é—®é¢˜</strong></h3><p><strong>é—®é¢˜</strong>ï¼š</p>
<p>â€‹	<strong>çŸ­è¿æ¥</strong>ï¼šHTTP&#x2F;1.0é»˜è®¤æ˜¯çŸ­è¿æ¥çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°å»ºç«‹å’Œå…³é—­è¿æ¥ï¼Œå¢åŠ äº†å»¶è¿Ÿå’Œèµ„æºæ¶ˆè€—ã€‚</p>
<p>â€‹	<strong>é˜Ÿå¤´é˜»å¡</strong>ï¼šHTTP&#x2F;1.1è™½ç„¶æ”¯æŒæŒä¹…è¿æ¥ï¼Œä½†ä»ç„¶å­˜åœ¨é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼ˆä¸€ä¸ªè¯·æ±‚çš„å»¶è¿Ÿä¼šå½±å“åç»­è¯·æ±‚ï¼‰ã€‚</p>
<p><strong>æ”¹è¿›</strong>ï¼š</p>
<p>â€‹	ä½¿ç”¨HTTP&#x2F;2çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå…è®¸åœ¨åŒä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚å’Œæ¥æ”¶å¤šä¸ªå“åº”ã€‚</p>
<p>â€‹	ä½¿ç”¨HTTP&#x2F;3çš„QUICåè®®ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<hr>
<p>â€‹	é™¤äº†ä¸Šé¢è¿™ä¹ˆå¤šï¼Œhttpè¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œæ¯”å¦‚ç¼ºä¹ä¼˜å…ˆçº§ï¼Œä¸æ”¯æŒäºŒè¿›åˆ¶ä¼ è¾“ï¼Œå­˜åœ¨è·¨åŸŸé™åˆ¶ç­‰é—®é¢˜ã€‚</p>
<p>ä¸ºäº†è§£å†³httpçš„éƒ¨åˆ†ä¸è¶³ï¼Œä¾¿å¼•å…¥äº†æ–°çš„åè®®ï¼Œå…¶åä¸ºWebSocketã€‚</p>
<hr>
<h1 id="2-WebSocket"><a href="#2-WebSocket" class="headerlink" title="2. WebSocket"></a>2. WebSocket</h1><h2 id="2-1-WebSocket"><a href="#2-1-WebSocket" class="headerlink" title="2.1 WebSocket"></a>2.1 WebSocket</h2><p>â€‹	<strong>WebSocket</strong> æ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œ<strong>å…¨åŒå·¥é€šä¿¡</strong>çš„åè®®ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå®æ—¶ã€åŒå‘çš„æ•°æ®ä¼ è¾“ã€‚å®ƒæ˜¯HTML5è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨è§£å†³HTTPåè®®åœ¨å®æ—¶é€šä¿¡ä¸­çš„å±€é™æ€§ã€‚</p>
<p><strong>é™„ï¼š</strong>æ•°æ®åªèƒ½å•å‘ä¼ é€ä¸º<strong>å•å·¥</strong>ï¼›<br>    æ•°æ®èƒ½åŒå‘ä¼ é€ä½†ä¸èƒ½åŒæ—¶åŒå‘ä¼ é€ç§°ä¸º<strong>åŠåŒå·¥</strong>ï¼›<br>    æ•°æ®èƒ½å¤ŸåŒæ—¶åŒå‘ä¼ é€åˆ™ç§°ä¸º<strong>å…¨åŒå·¥</strong>ã€‚</p>
<h2 id="2-2-WebSocketçš„ä¼˜ç‚¹"><a href="#2-2-WebSocketçš„ä¼˜ç‚¹" class="headerlink" title="2.2 WebSocketçš„ä¼˜ç‚¹"></a>2.2 WebSocketçš„ä¼˜ç‚¹</h2><p><strong>WebSocketçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li><strong>å®æ—¶æ€§ï¼š</strong> ç”±äºWebSocketçš„æŒä¹…åŒ–è¿æ¥ï¼Œå®ƒå¯ä»¥å®ç°å®æ—¶çš„æ•°æ®ä¼ è¾“ï¼Œé¿å…äº†Webåº”ç”¨ç¨‹åºéœ€è¦ä¸æ–­åœ°å‘é€è¯·æ±‚ä»¥è·å–æœ€æ–°æ•°æ®çš„æƒ…å†µã€‚</li>
<li><strong>åŒå‘é€šä¿¡ï¼š</strong> WebSocketåè®®æ”¯æŒåŒå‘é€šä¿¡ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯å‘é€è¯·æ±‚ã€‚</li>
<li><strong>å‡å°‘ç½‘ç»œè´Ÿè½½ï¼š</strong> ç”±äºWebSocketçš„æŒä¹…åŒ–è¿æ¥ï¼Œå®ƒå¯ä»¥å‡å°‘HTTPè¯·æ±‚çš„æ•°é‡ï¼Œä»è€Œå‡å°‘äº†ç½‘ç»œè´Ÿè½½ã€‚</li>
</ul>
<h2 id="2-3WebSocketçš„å·¥ä½œè¿‡ç¨‹"><a href="#2-3WebSocketçš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="2.3WebSocketçš„å·¥ä½œè¿‡ç¨‹"></a>2.3WebSocketçš„å·¥ä½œè¿‡ç¨‹</h2><p>â€‹	WebSocket ç”Ÿå‘½å‘¨æœŸæè¿°äº† WebSocket è¿æ¥ä»åˆ›å»ºåˆ°å…³é—­çš„è¿‡ç¨‹ã€‚ä¸€ä¸ª WebSocket è¿æ¥åŒ…å«ä»¥ä¸‹å››ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<h4 id="è¿æ¥å»ºç«‹é˜¶æ®µï¼š"><a href="#è¿æ¥å»ºç«‹é˜¶æ®µï¼š" class="headerlink" title="è¿æ¥å»ºç«‹é˜¶æ®µï¼š"></a><strong>è¿æ¥å»ºç«‹é˜¶æ®µï¼š</strong></h4><p>â€‹	åœ¨è¿æ¥å»ºç«‹é˜¶æ®µï¼Œå®¢æˆ·ç«¯ä¼šåŸºäºhttpåè®®å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç‰¹æ®Šçš„httpï¼ˆgetï¼‰è¯·æ±‚ï¼Œä¹‹æ‰€ä»¥ç‰¹æ®Šï¼Œæ˜¯å› ä¸ºå…¶è¯·æ±‚å¤´åŒ…å«äº†ä¸€äº›ç‰¹æ®Šçš„å­—æ®µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line">Origin: http://example.com</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Upgrade:websocket</code>   è¡¨ç¤ºå®¢æˆ·ç«¯å¸Œæœ›åè®®å‡çº§ä¸ºWebSocket</li>
<li><code>Connection:Upgrade</code>  è¿›ä¸€æ­¥ç¡®è®¤å®¢æˆ·ç«¯è¯·æ±‚åè®®å‡çº§çš„æ„å›¾</li>
<li><code>Sec-WebSocket-Key</code> ä¸€ä¸ªç”±å®¢æˆ·ç«¯ç”Ÿæˆçš„Base64ç¼–ç çš„éšæœºå¯†é’¥ï¼Œç”¨äºå®‰å…¨è®¤è¯</li>
<li><code>Sec-WebSocket-Version</code> ç”¨äºæŒ‡å®šå®¢æˆ·ç«¯æ”¯æŒçš„WebSocketç‰ˆæœ¬</li>
<li><code>Origin</code>ï¼šæŒ‡å®šè¯·æ±‚çš„æ¥æºï¼ŒæœåŠ¡å™¨ç”¨äºæ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„åŸŸã€‚</li>
</ul>
<p>â€‹	æœåŠ¡å™¨æ¥å—åˆ°è¯·æ±‚åï¼Œä¼šå¯¹å¤´éƒ¨å­—æ®µè¿›è¡ŒéªŒè¯ã€‚å¦‚æœéªŒè¯é€šè¿‡ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰101 Switching Protocolsçš„httpå“åº”ï¼Œè¡¨ç¤ºåŒæ„åè®®å‡çº§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 101 Switching Protocols</span><br><span class="line"></span><br><span class="line">Upgrade: websocket</span><br><span class="line"></span><br><span class="line">Connection: Upgrade</span><br><span class="line"></span><br><span class="line">Sec-WebSocket-Accept: x3JJHMbDL1EzLkh9tC9r0L4BvC6iXgkzB3wIFfEKf4k=</span><br></pre></td></tr></table></figure>

<ul>
<li><code>101 Switching Protocols</code>ï¼šè¡¨ç¤ºæœåŠ¡å™¨åŒæ„å°†åè®®å‡çº§ã€‚</li>
<li><code>Sec-WebSocket-Accept</code>ï¼šæœåŠ¡å™¨é€šè¿‡ <code>Sec-WebSocket-Key</code> å’Œä¸€ä¸ªç‰¹å®šçš„ç®—æ³•è®¡ç®—å‡ºä¸€ä¸ªå€¼å¹¶è¿”å›ï¼Œè¿™ä¸ªå€¼æ˜¯ç”¨æ¥éªŒè¯å®¢æˆ·ç«¯å‘èµ·çš„æ¡æ‰‹æ˜¯å¦åˆæ³•ã€‚</li>
</ul>
<h4 id="è¿æ¥å¼€æ”¾é˜¶æ®µï¼š"><a href="#è¿æ¥å¼€æ”¾é˜¶æ®µï¼š" class="headerlink" title="è¿æ¥å¼€æ”¾é˜¶æ®µï¼š"></a><strong>è¿æ¥å¼€æ”¾é˜¶æ®µï¼š</strong></h4><p>â€‹	è¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¾¿å¯ä»¥é€šè¿‡WebSocketè¿›è¡ŒåŒå‘çš„æ•°æ®ä¼ è¾“ã€‚æ•°æ®ä»¥å¸§ï¼ˆå°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„é‚£ä¸ªï¼‰çš„å½¢å¼è¿›è¡Œä¼ è¾“ã€‚å¸§æœ‰è®¸å¤šç§ç±»å‹ï¼Œæ¯”å¦‚æ–‡æœ¬å¸§ï¼ˆä¼ è¾“æ–‡æœ¬æ•°æ®ï¼‰ï¼ŒäºŒè¿›åˆ¶å¸§ï¼ˆä¼ è¾“äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡ï¼ŒéŸ³é¢‘ç­‰ï¼‰ï¼Œpingå¸§ï¼ˆç”¨äºå¿ƒè·³æ£€æµ‹ï¼‰ï¼Œå…³é—­å¸§ï¼ˆç”¨äºå…³é—­è¿æ¥ï¼‰ã€‚</p>
<h4 id="è¿æ¥å…³é—­é˜¶æ®µï¼š"><a href="#è¿æ¥å…³é—­é˜¶æ®µï¼š" class="headerlink" title="è¿æ¥å…³é—­é˜¶æ®µï¼š"></a><strong>è¿æ¥å…³é—­é˜¶æ®µï¼š</strong></h4><p>â€‹	å¦‚æœæ­¤æ—¶å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯éœ€è¦å…³é—­ä¸€ä¸ªWebSocketè¿æ¥ï¼Œä¾¿ä¼šå‘é€ä¸€ä¸ªå…³é—­å¸§ã€‚å…³é—­å¸§åŒ…å«ä¸€ä¸ªçŠ¶æ€ç å’Œå¯é€‰çš„å…³é—­åŸå› ï¼Œç”¨äºå¯¹æ–¹å…³é—­è¿æ¥çš„åŸå› ã€‚å¦ä¸€æ–¹æ”¶åˆ°å…³é—­å¸§åï¼Œä¼šå“åº”ä¸€ä¸ªå…³é—­å¸§ï¼Œå¹¶å…³é—­è¿æ¥ã€‚è¿™æ ·çš„å…³é—­æ–¹å¼å¯ä»¥ä¿è¯è¿æ¥æ­£å¸¸ç»ˆæ­¢ï¼Œé¿å…æ•°æ®ä¸¢å¤±æˆ–è¿æ¥å¼‚å¸¸ã€‚</p>
<h4 id="è¿æ¥å…³é—­å®Œæˆé˜¶æ®µï¼š"><a href="#è¿æ¥å…³é—­å®Œæˆé˜¶æ®µï¼š" class="headerlink" title="è¿æ¥å…³é—­å®Œæˆé˜¶æ®µï¼š"></a><strong>è¿æ¥å…³é—­å®Œæˆé˜¶æ®µï¼š</strong></h4><p>â€‹	 åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒWebSocket è¿æ¥å·²ç»å®Œå…¨å…³é—­ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä»»ä½•äº¤äº’éƒ½å°†æ— æ•ˆã€‚</p>
<p>å¦‚å›¾ï¼š</p>
<p><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.zVPHvJOfM7m8jlks8SFpHwAAAA?rs=1&pid=ImgDetMain" alt="ç¤ºä¾‹å›¾ç‰‡"></p>
<p>å¼•ç”¨è‡ªä¼Ÿå¤§çš„ğŸ«šåœ£ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://vcnay0rphntt.feishu.cn/wiki/DUmLwwac3ipERmkrwjVckSQQn8d?fromScene=spaceOverview">â€â€¬â€Œâ€Œï»¿â ï»¿â€ï»¿â ï»¿ï»¿â€Œâ€Œâ€Œâ€â ï»¿ï»¿â â â â€â€â€Œâ€Œâ€ï»¿ï»¿â€Œ2-8 WebSocketçš„åº•å±‚é€»è¾‘ - é£ä¹¦äº‘æ–‡æ¡£</a></p>
<h2 id="2-4-WebSocketçš„API"><a href="#2-4-WebSocketçš„API" class="headerlink" title="2.4 WebSocketçš„API"></a>2.4 WebSocketçš„API</h2><p>â€‹	WebSocket API æ˜¯ç”¨äºåœ¨ Web åº”ç”¨ç¨‹åºä¸­åˆ›å»ºå’Œç®¡ç† WebSocket è¿æ¥çš„æ¥å£é›†åˆã€‚WebSocket API ç”±æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ— éœ€ä½¿ç”¨é¢å¤–çš„ JavaScript åº“æˆ–æ¡†æ¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ JavaScript ä¸­ä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ WebSocket APIï¼š</p>
<p>â€‹	<strong>WebSocket æ„é€ å‡½æ•°ï¼š</strong> WebSocket æ„é€ å‡½æ•°ç”¨äºåˆ›å»º WebSocket å¯¹è±¡ã€‚å®ƒæ¥å—ä¸€ä¸ª URL ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºè¦è¿æ¥çš„ WebSocket æœåŠ¡å™¨çš„åœ°å€ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&#x27;ws://example.com/ws&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>WebSocket.send() æ–¹æ³•ï¼š</strong> <code>WebSocket.send()</code> æ–¹æ³•ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦å‘é€çš„æ•°æ®ã€‚æ•°æ®å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€Blob å¯¹è±¡æˆ– ArrayBuffer å¯¹è±¡ï¼ˆå¸¸ç”¨äºå¤„ç†äºŒè¿›åˆ¶ï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ws.send(&#x27;Hello, server!&#x27;);</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>WebSocket.onopen äº‹ä»¶ï¼š</strong> <code>WebSocket.onopen</code> äº‹ä»¶åœ¨ WebSocket è¿æ¥æˆåŠŸå»ºç«‹æ—¶è§¦å‘ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ws.<span class="property">onopen</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;WebSocket è¿æ¥å·²ç»å»ºç«‹ã€‚&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>WebSocket.onmessage äº‹ä»¶ï¼š</strong> <code>WebSocket.onmessage</code> äº‹ä»¶åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯æ—¶è§¦å‘ã€‚å®ƒçš„ event å¯¹è±¡åŒ…å«ä¸€ä¸ª data å±æ€§ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ws.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯ï¼š&#x27;</span>, event.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>WebSocket.onerror äº‹ä»¶ï¼š</strong> <code>WebSocket.onerror</code> äº‹ä»¶åœ¨ WebSocket è¿æ¥å‡ºç°é”™è¯¯æ—¶è§¦å‘ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ws.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;WebSocket è¿æ¥å‡ºç°é”™è¯¯ï¼š&#x27;</span>, event);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>WebSocket.onclose äº‹ä»¶ï¼š</strong> <code>WebSocket.onclose</code> äº‹ä»¶åœ¨ WebSocket è¿æ¥è¢«å…³é—­æ—¶è§¦å‘ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ws.onclose = function() &#123;</span><br><span class="line">  console.log(&#x27;WebSocket è¿æ¥å·²ç»å…³é—­ã€‚&#x27;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„ WebSocket APIã€‚</p>
<h2 id="2-5-WebSocketçš„ä¸è¶³"><a href="#2-5-WebSocketçš„ä¸è¶³" class="headerlink" title="2.5 WebSocketçš„ä¸è¶³"></a>2.5 WebSocketçš„ä¸è¶³</h2><ul>
<li><strong>éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ”¯æŒï¼š</strong> WebSocketæ˜¯ä¸€ç§ç›¸å¯¹æ–°çš„æŠ€æœ¯ï¼Œéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ”¯æŒã€‚ä¸€äº›æ—§çš„æµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯èƒ½ä¸æ”¯æŒWebSocketã€‚</li>
<li><strong>éœ€è¦é¢å¤–çš„å¼€é”€ï¼š</strong> WebSocketéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šç»´æŠ¤é•¿æ—¶é—´çš„è¿æ¥ï¼Œè¿™éœ€è¦é¢å¤–çš„å¼€é”€ï¼ŒåŒ…æ‹¬å†…å­˜å’ŒCPUã€‚</li>
<li><strong>å®‰å…¨é—®é¢˜ï¼š</strong> ç”±äºWebSocketå…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œå¯èƒ½ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚æœåŠ¡å™¨å¿…é¡»ä¿è¯åªå‘åˆæ³•çš„å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚</li>
</ul>
<h2 id="2-6-WebSokcetçš„åº”ç”¨åœºæ™¯"><a href="#2-6-WebSokcetçš„åº”ç”¨åœºæ™¯" class="headerlink" title="2.6 WebSokcetçš„åº”ç”¨åœºæ™¯"></a>2.6 WebSokcetçš„åº”ç”¨åœºæ™¯</h2><ul>
<li>æ¸¸æˆåº”ç”¨ç¨‹åº</li>
<li>èŠå¤©åº”ç”¨ç¨‹åº</li>
<li>å®æ—¶è‚¡ç¥¨ã€å¤–æ±‡ã€åŠ å¯†è´§å¸è¡Œæƒ…</li>
<li>åœ¨çº¿åä½œç¼–è¾‘</li>
</ul>
<h1 id="é™„å½•ï¼š"><a href="#é™„å½•ï¼š" class="headerlink" title="é™„å½•ï¼š"></a>é™„å½•ï¼š</h1><h2 id="Cookieï¼ŒSessionå’ŒTokenï¼š"><a href="#Cookieï¼ŒSessionå’ŒTokenï¼š" class="headerlink" title="Cookieï¼ŒSessionå’ŒTokenï¼š"></a>Cookieï¼ŒSessionå’ŒTokenï¼š</h2><h3 id="å…³äºCookieï¼š"><a href="#å…³äºCookieï¼š" class="headerlink" title="å…³äºCookieï¼š"></a>å…³äºCookieï¼š</h3><p>â€‹	<strong>Cookie æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­çš„å°å‹æ–‡æœ¬æ•°æ®</strong>ï¼Œç”¨äºåœ¨ HTTP è¯·æ±‚ä¹‹é—´ä¿æŒç”¨æˆ·çŠ¶æ€ã€‚ç”±äº HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨æ— æ³•è®°ä½å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼Œè€Œ Cookie å¯ä»¥å¸®åŠ©æœåŠ¡å™¨è·Ÿè¸ªç”¨æˆ·ã€‚æ¯ä¸ª Cookie ä¸èƒ½è¶…è¿‡ <strong>4KB</strong>ï¼Œä¸€ä¸ªç«™ç‚¹æœ€å¤šå¯å­˜å‚¨ <strong>300 ä¸ª Cookie</strong>ï¼Œå•ä¸ªåŸŸåæœ€å¤š <strong>20 ä¸ª Cookie</strong>ã€‚</p>
<p><strong>é™„ï¼š</strong>JSèƒ½å¤Ÿé€šè¿‡document.cookieæ¥è®¿é—®cookieï¼Œä»è€Œè¿›è¡Œèº«ä»½å†’å……è®¿é—®æœåŠ¡å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨Set-Cookieå“åº”å¤´è®¾ç½®HttpOnlyæ¥ç¦æ­¢documnet.cookieè®¿é—®cookieã€‚</p>
<p>â€‹	å½“ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåœ¨httpçš„å“åº”å¤´ä¸­é€šè¿‡Set-Cookieè®¾ç½®cookieï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åï¼Œä¼šå°†å…¶å­˜å‚¨åˆ°æœ¬åœ°ï¼Œä¹‹åï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¯¥ç½‘ç«™ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦cookieï¼ŒæœåŠ¡å™¨ä¹Ÿå°±å¯ä»¥é€šè¿‡cookieæ¥åˆ¤æ–­èº«ä»½ã€‚</p>
<h3 id="å…³äºSessionï¼š"><a href="#å…³äºSessionï¼š" class="headerlink" title="å…³äºSessionï¼š"></a>å…³äºSessionï¼š</h3><p>â€‹	<strong>Session æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ç”¨æˆ·ä¼šè¯æ•°æ®</strong>ï¼Œç”¨äºè®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚ç”±äº Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå®¹æ˜“è¢«ç¯¡æ”¹ï¼Œè€Œ Session å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œç›¸å¯¹æ›´å®‰å…¨ã€‚</p>
<p>â€‹	å½“ç”¨æˆ·è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª Sessionï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª session_idï¼Œç„¶åï¼ŒæœåŠ¡å™¨è¿”å›session_idï¼Œå¹¶è®©å®¢æˆ·ç«¯å­˜å‚¨ï¼ˆé€šå¸¸å­˜å‚¨åœ¨ Cookieï¼‰ï¼Œå®¢æˆ·ç«¯åœ¨åç»­è¯·æ±‚æ—¶æºå¸¦ session_idï¼ŒæœåŠ¡å™¨ä¾¿ä¼šé€šè¿‡session_idæ¥éªŒè¯èº«ä»½ã€‚</p>
<h3 id="å…³äºTokenï¼š"><a href="#å…³äºTokenï¼š" class="headerlink" title="å…³äºTokenï¼š"></a>å…³äºTokenï¼š</h3><p>â€‹	<strong>Tokenæ˜¯ä¸€ç§èº«ä»½éªŒè¯æœºåˆ¶ï¼ŒåŸºäºæ— çŠ¶æ€ï¼ˆStatelessï¼‰è®¤è¯</strong>ï¼Œä¸åŒäº Sessionï¼Œå®ƒä¸éœ€è¦æœåŠ¡å™¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œæ˜¯é€šè¿‡ç­¾åæœºåˆ¶æ¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œ<strong>JWTï¼ˆJSON Web Tokenï¼‰</strong> æ˜¯ä¸€ç§å¸¸è§çš„ token æ ¼å¼ã€‚</p>
<p>â€‹	ç”¨æˆ·ç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆtokenè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ¥å­˜å‚¨è¿™ä¸ªtokenï¼ˆæ¯”å¦‚localStorage.setItem()ï¼‰ï¼Œåç»­æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨Authorizationä¸­æºå¸¦tokenæ¥è®©æœåŠ¡å™¨éªŒè¯ï¼Œå¦‚æœæœ‰æ•ˆï¼Œè§£æç”¨æˆ·ä¿¡æ¯ï¼Œå¦åˆ™æ‹’ç»è¯·æ±‚</p>
<p><strong>é™„ï¼š</strong></p>
<p>â€‹	å•ä¸€tokenå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•å®‰å…¨åœ°å»¶é•¿ç™»é™†çŠ¶æ€ï¼Œè¦ä¹ˆå¼ºåˆ¶ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œè¦ä¹ˆä¸€ç›´æœ‰æ•ˆã€‚å¦‚æœæ˜¯å‰è€…ï¼Œå¯¹äºç”¨æˆ·ä½“éªŒä¸å¤ªå¥½ï¼›å¦‚æœæ˜¯åè€…ï¼Œä¸€æ—¦tokenæ³„éœ²ï¼Œæ”»å‡»è€…å¯ä»¥é•¿æœŸä½¿ç”¨ã€‚</p>
<p>â€‹	å› æ­¤ï¼Œç°åœ¨å¤§å¤šé‡‡ç”¨é•¿çŸ­tokenæœºåˆ¶ã€‚</p>
<p>é•¿çŸ­tokenåˆ†ä¸ºçŸ­æœŸtokenå’Œé•¿tokenï¼š</p>
<ul>
<li><p>çŸ­tokenæœ‰æ•ˆæœŸè¾ƒçŸ­ï¼Œé€šå¸¸ç”¨äºèº«ä»½éªŒè¯å’Œæˆæƒæ“ä½œç­‰æ•æ„Ÿæ“ä½œã€‚ç”±äºå…¶ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œå³ä½¿è¢«ç›—ç”¨ï¼Œåˆ©ç”¨æ—¶é—´ä¹Ÿæœ‰é™ï¼Œä»è€Œé™ä½äº†å®‰å…¨é£é™©ã€‚</p>
</li>
<li><p>é•¿tokenæœ‰æ•ˆæœŸè¾ƒé•¿ï¼Œé€šå¸¸ç”¨äºç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…ä¿æŒç™»å½•çŠ¶æ€ï¼Œé¿å…é¢‘ç¹ç™»å½•ã€‚å³ä½¿å…¶ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿ï¼Œä½†ç”±äºä¸ç›´æ¥è¿›è¡Œæ•æ„Ÿæ“ä½œï¼Œå®‰å…¨é£é™©è¾ƒä½ã€‚</p>
</li>
</ul>
<p>â€‹	ç”¨æˆ·ç™»å½•æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ªé•¿tokenå’ŒçŸ­tokenç»™ç”¨æˆ·ï¼Œç”¨æˆ·è¯·æ±‚èµ„æºæ—¶ï¼ŒçŸ­tokenç”¨äºéªŒè¯èº«ä»½ã€‚å¦‚æœçŸ­tokenè¿‡æœŸï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é•¿tokenæ¥è¯·æ±‚ä¸€ä¸ªæ–°çš„çŸ­tokenï¼Œè€Œæ— éœ€é‡æ–°ç™»å½•ã€‚</p>
<h3 id="åŒºåˆ«ï¼š"><a href="#åŒºåˆ«ï¼š" class="headerlink" title="åŒºåˆ«ï¼š"></a>åŒºåˆ«ï¼š</h3><p>â€‹	Cookie-Sessioné€‚ç”¨äºä¼ ç»Ÿçš„Webåº”ç”¨ï¼Œå‰ç«¯ä»£ç å’Œåç«¯ä»£ç åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œæµè§ˆå™¨ç›´æ¥ä»åç«¯åŠ è½½é¡µé¢ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æºå¸¦Cookieæˆ–Session_idï¼Œå› ä¸ºå‰ç«¯å’Œåç«¯æ˜¯åŒä¸€ä¸ªåŸŸåï¼Œå› æ­¤é€šå¸¸ä¸æ”¯æŒè·¨åŸŸã€‚</p>
<p>â€‹	Tokené€‚ç”¨äºå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼Œå‰ç«¯å’Œåç«¯åˆ†å¼€ï¼Œå„è‡ªè¿è¡Œåœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ï¼Œå‰ç«¯é€šè¿‡Ajax&#x2F;Fetchè¯·æ±‚åç«¯APIï¼Œæ­¤æ—¶å­˜åœ¨è·¨åŸŸï¼Œæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨æºå¸¦Cookieæˆ–Session_id,å› æ­¤é€‚ç”¨Tokenè®¤è¯ã€‚</p>
<h2 id="httpsï¼š"><a href="#httpsï¼š" class="headerlink" title="httpsï¼š"></a>httpsï¼š</h2><h3 id="ä»€ä¹ˆæ˜¯httpsï¼š"><a href="#ä»€ä¹ˆæ˜¯httpsï¼š" class="headerlink" title="ä»€ä¹ˆæ˜¯httpsï¼š"></a>ä»€ä¹ˆæ˜¯httpsï¼š</h3><p>â€‹	httpsï¼Œå³è¶…æ–‡æœ¬å®‰å…¨ä¼ è¾“åè®®ï¼Œå®ƒåœ¨HTTPçš„åŸºç¡€ä¸Šå¢åŠ äº†åŠ å¯†å’Œè®¤è¯æœºåˆ¶ï¼Œä»¥ä¿æŠ¤æ•°æ®çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚</p>
<p>â€‹	ç›¸è¾ƒäºhttpï¼Œhttpsé€šè¿‡TLSä¿®æ­£äº†httpå­˜åœ¨çš„å®‰å…¨é—®é¢˜ï¼š</p>
<h3 id="1-åŠ å¯†ä¼ è¾“"><a href="#1-åŠ å¯†ä¼ è¾“" class="headerlink" title="1. åŠ å¯†ä¼ è¾“"></a>1. <strong>åŠ å¯†ä¼ è¾“</strong></h3><ul>
<li><strong>HTTP</strong>ï¼šæ•°æ®ä»¥æ˜æ–‡å½¢å¼ä¼ è¾“ï¼Œå®¹æ˜“è¢«çªƒå¬æˆ–ç¯¡æ”¹ã€‚</li>
<li><strong>HTTPS</strong>ï¼šé€šè¿‡SSL&#x2F;TLSåè®®å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œç¡®ä¿ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚</li>
</ul>
<h4 id="åŠ å¯†æœºåˆ¶ï¼š"><a href="#åŠ å¯†æœºåˆ¶ï¼š" class="headerlink" title="åŠ å¯†æœºåˆ¶ï¼š"></a>åŠ å¯†æœºåˆ¶ï¼š</h4><h5 id="å…±äº«å¯†é’¥åŠ å¯†ï¼š"><a href="#å…±äº«å¯†é’¥åŠ å¯†ï¼š" class="headerlink" title="å…±äº«å¯†é’¥åŠ å¯†ï¼š"></a>å…±äº«å¯†é’¥åŠ å¯†ï¼š</h5><p>â€‹	åŠ å¯†å’Œè§£å¯†å…±ç”¨åŒä¸€ä¸ªå¯†é’¥çš„æ–¹å¼å«åšå…±äº«å¯†é’¥åŠ å¯†ï¼Œä¹Ÿå«åšå¯¹ç§°å¯†é’¥åŠ å¯†ã€‚åœ¨åŠ å¯†æ—¶ï¼Œç”¨æˆ·ä½¿ç”¨ä¸€æŠŠå¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œä¹‹åå°†å¯†é’¥å’ŒåŠ å¯†åçš„æ•°æ®å‘é€ç»™å¦ä¸€æ–¹ï¼Œç”¨äºè§£å¯†ã€‚ä½†é—®é¢˜åˆæ¥äº†ï¼Œä»»ä½•äººåªè¦æœ‰å¯†é’¥å°±èƒ½è§£å¯†ï¼Œå¦‚æœæˆ‘çš„é€šä¿¡è¢«ç›‘å¬ï¼Œå¯†é’¥ä¸å°±è½å…¥ä»–äººä¹‹æ‰‹äº†å—ï¼Ÿæ‰€ä»¥ä¼ è¾“æ—¶è¿˜å¾—è®¾æ³•å®‰å…¨ä¿ç®¡å¯†é’¥ã€‚</p>
<h5 id="å…¬å¼€å¯†é’¥åŠ å¯†ï¼š"><a href="#å…¬å¼€å¯†é’¥åŠ å¯†ï¼š" class="headerlink" title="å…¬å¼€å¯†é’¥åŠ å¯†ï¼š"></a>å…¬å¼€å¯†é’¥åŠ å¯†ï¼š</h5><p>â€‹	ä¸¤åç”¨æˆ·å„æœ‰ä¸¤æŠŠé’¥åŒ™ï¼Œä¸€æŠŠç”¨äºåŠ å¯†ï¼Œæ˜¯å…¬å¼€çš„ï¼›ä¸€æŠŠç”¨äºè§£å¯†ï¼Œæ˜¯ç§å¯†çš„ã€‚åœ¨åŠ å¯†æ—¶ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨å¯¹æ–¹å…¬å¼€çš„é’¥åŒ™åŠ å¯†ï¼Œç„¶åå‘é€ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹ä½¿ç”¨è‡ªå·±ç§å¯†çš„å¯†é’¥è¿›è¡Œè§£å¯†ï¼Œä»è€Œä¿è¯é€šä¿¡çš„å®‰å…¨æ€§ã€‚ä½†æ˜¯ï¼Œå…¬å¼€å¯†é’¥åŠ å¯†åœ¨ä¼ è¾“æ—¶ç”±äºéå¯¹ç§°è®¡ç®—è¾ƒä¸ºå¤æ‚ï¼Œå¯¼è‡´æ•ˆç‡ä¸å¦‚å‰è€…ï¼Œä¸é€‚åˆä¼ è¾“å¤§é‡æ•°æ®ã€‚</p>
<h5 id="æ··åˆå¯†é’¥åŠ å¯†ï¼š"><a href="#æ··åˆå¯†é’¥åŠ å¯†ï¼š" class="headerlink" title="æ··åˆå¯†é’¥åŠ å¯†ï¼š"></a>æ··åˆå¯†é’¥åŠ å¯†ï¼š</h5><p>â€‹	é¡¾åæ€ä¹‰ï¼Œèåˆäº†å‰ä¸¤ç§æ–¹æ³•ã€‚å…·ä½“è¿‡ç¨‹æ˜¯ä½¿ç”¨å…¬å¼€é’¥åŒ™åŠ å¯†å®‰å…¨åœ°äº¤æ¢åœ¨å…±äº«å¯†é’¥ä¸­è¦ä½¿ç”¨çš„å¯†é’¥ï¼Œç„¶åä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p>
<hr>
<h3 id="2-æ•°æ®å®Œæ•´æ€§"><a href="#2-æ•°æ®å®Œæ•´æ€§" class="headerlink" title="2. æ•°æ®å®Œæ•´æ€§"></a>2. <strong>æ•°æ®å®Œæ•´æ€§</strong></h3><ul>
<li><strong>HTTP</strong>ï¼šæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½è¢«ç¯¡æ”¹ï¼Œæ— æ³•ä¿è¯å®Œæ•´æ€§ã€‚</li>
<li><strong>HTTPS</strong>ï¼šé€šè¿‡<strong>æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰</strong>æˆ–<strong>æ•°å­—ç­¾å</strong>ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ã€‚</li>
</ul>
<h4 id="å®Œæ•´æ€§ä¿æŠ¤ï¼š"><a href="#å®Œæ•´æ€§ä¿æŠ¤ï¼š" class="headerlink" title="å®Œæ•´æ€§ä¿æŠ¤ï¼š"></a>å®Œæ•´æ€§ä¿æŠ¤ï¼š</h4><h5 id="æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰"><a href="#æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰" class="headerlink" title="æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰"></a>æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰</h5><p>â€‹	MACç”¨äºéªŒè¯æ•°æ®å®Œæ•´æ€§å’ŒçœŸå®æ€§ï¼Œç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œè€Œä¸”æ¥è‡ªå¯ä¿¡çš„å‘é€æ–¹ã€‚å…¶åŸç†ç”¨åˆ°äº†ä¸Šé¢çš„å¯†é’¥ã€‚</p>
<p>â€‹	å‘é€æ–¹å’Œæ¥å—æ–¹å…±äº«ä¸€ä¸ªå¯†é’¥ã€‚ç”Ÿæˆæ—¶ï¼Œå‘é€æ–¹ä½¿ç”¨å¯†é’¥å’Œå“ˆå¸Œç®—æ³•å¯¹æ•°æ®è®¡ç®—MACï¼Œç„¶åæŠŠæ•°æ®å’ŒMACä¸€èµ·å‘ç»™æ¥æ”¶æ–¹ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åï¼Œä½¿ç”¨ç›¸åŒçš„å¯†é’¥å’Œå“ˆå¸Œç®—æ³•è®¡ç®—MACï¼Œå¦‚æœç›¸åŒï¼Œåˆ™æ•°æ®å®Œæ•´ä¸”æ¥è‡ªå¯ä¿¡çš„å‘é€æ–¹ï¼›å¦‚æœä¸åŒï¼Œåˆ™æ•°æ®å¯èƒ½è¢«ç¯¡æ”¹æˆ–æ¥è‡ªä¸å¯ä¿¡çš„å‘é€æ–¹ã€‚</p>
<h5 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h5><p>â€‹	æ•°å­—ç­¾åå’ŒMACå¤§è‡´ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºæ•°å­—ç­¾åä½¿ç”¨çš„æ˜¯éå¯¹ç§°çš„å…¬å¼€å¯†é’¥åŠ å¯†ã€‚</p>
<hr>
<h3 id="3-èº«ä»½è®¤è¯"><a href="#3-èº«ä»½è®¤è¯" class="headerlink" title="3. èº«ä»½è®¤è¯"></a>3. <strong>èº«ä»½è®¤è¯</strong></h3><ul>
<li><strong>HTTP</strong>ï¼šæ— æ³•éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¯èƒ½å­˜åœ¨ä¸­é—´äººæ”»å‡»ã€‚</li>
<li><strong>HTTPS</strong>ï¼šé€šè¿‡<strong>æ•°å­—è¯ä¹¦</strong>éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œç¡®ä¿å®¢æˆ·ç«¯ä¸çœŸå®çš„æœåŠ¡å™¨é€šä¿¡ã€‚</li>
</ul>
<h4 id="æ•°å­—è¯ä¹¦ï¼š"><a href="#æ•°å­—è¯ä¹¦ï¼š" class="headerlink" title="æ•°å­—è¯ä¹¦ï¼š"></a>æ•°å­—è¯ä¹¦ï¼š</h4><p>â€‹	æ•°å­—è¯ä¹¦æ˜¯èº«ä»½è®¤è¯çš„æ ¸å¿ƒï¼Œå®ƒåŒ…å«äº†æœåŠ¡å™¨çš„èº«ä»½ä¿¡æ¯å’Œå…¬é’¥ï¼Œå¹¶ç”±å¯ä¿¡çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾åã€‚</p>
<h5 id="è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰"><a href="#è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰" class="headerlink" title="è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰"></a>è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰</h5><p>â€‹	è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰æ˜¯å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼Œè´Ÿè´£éªŒè¯æœåŠ¡å™¨çš„èº«ä»½å¹¶é¢å‘æ•°å­—è¯ä¹¦ã€‚</p>
<h5 id="æ•°å­—è¯ä¹¦å†…å®¹"><a href="#æ•°å­—è¯ä¹¦å†…å®¹" class="headerlink" title="æ•°å­—è¯ä¹¦å†…å®¹"></a>æ•°å­—è¯ä¹¦å†…å®¹</h5><p>â€‹	æ•°å­—è¯ä¹¦é€šå¸¸åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>æœåŠ¡å™¨çš„å…¬é’¥</strong>ï¼šç”¨äºåŠ å¯†é€šä¿¡ã€‚</li>
<li><strong>æœåŠ¡å™¨çš„åŸŸå</strong>ï¼šè¯ä¹¦ç»‘å®šçš„åŸŸåï¼ˆå¦‚ <code>www.example.com</code>ï¼‰ã€‚</li>
<li><strong>è¯ä¹¦çš„æœ‰æ•ˆæœŸ</strong>ï¼šè¯ä¹¦çš„ç”Ÿæ•ˆæ—¥æœŸå’Œè¿‡æœŸæ—¥æœŸã€‚</li>
<li><strong>é¢å‘æœºæ„çš„ä¿¡æ¯</strong>ï¼šCA çš„åç§°å’Œæ ‡è¯†ã€‚</li>
<li><strong>é¢å‘æœºæ„çš„æ•°å­—ç­¾å</strong>ï¼šCA å¯¹è¯ä¹¦å†…å®¹çš„ç­¾åï¼Œç”¨äºéªŒè¯è¯ä¹¦çš„çœŸå®æ€§ã€‚</li>
</ul>
<h5 id="è¯ä¹¦éªŒè¯æµç¨‹"><a href="#è¯ä¹¦éªŒè¯æµç¨‹" class="headerlink" title="è¯ä¹¦éªŒè¯æµç¨‹"></a><strong>è¯ä¹¦éªŒè¯æµç¨‹</strong></h5><p>â€‹	é¦–å…ˆï¼ŒæœåŠ¡å™¨åœ¨TLS&#x2F;SSL æ¡æ‰‹è¿‡ç¨‹ä¸­å°†è‡ªå·±çš„æ•°å­—è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>â€‹	ç„¶åï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ CA çš„å…¬é’¥è§£å¯†è¯ä¹¦ä¸­çš„ç­¾åï¼Œå¾—åˆ°è¯ä¹¦çš„å“ˆå¸Œå€¼ã€‚</p>
<p>â€‹		    å®¢æˆ·ç«¯å¯¹è¯ä¹¦å†…å®¹è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¹¶ä¸è§£å¯†å¾—åˆ°çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p>â€‹				1. å¦‚æœä¸€è‡´ï¼Œåˆ™è¯ä¹¦çœŸå®å¯ä¿¡ã€‚</p>
<p>â€‹				2. å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™è¯ä¹¦å¯èƒ½è¢«ç¯¡æ”¹æˆ–ä¼ªé€ ã€‚</p>
<p>â€‹	å†ç„¶åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦ä¸­çš„åŸŸåæ˜¯å¦ä¸è®¿é—®çš„åŸŸåä¸€è‡´ã€‚</p>
<p>â€‹				1. å¦‚æœä¸€è‡´ï¼Œåˆ™åŸŸåéªŒè¯é€šè¿‡ã€‚</p>
<p>â€‹				2. å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™å¯èƒ½æ˜¯åŸŸåä¸åŒ¹é…æˆ–è¯ä¹¦è¢«æ»¥ç”¨ã€‚</p>
<p>â€‹	ä¹‹åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ã€‚</p>
<p>â€‹				1. å¦‚æœè¯ä¹¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œåˆ™æœ‰æ•ˆæœŸéªŒè¯é€šè¿‡ã€‚</p>
<p>â€‹				2. å¦‚æœè¯ä¹¦å·²è¿‡æœŸï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‹’ç»è¿æ¥ã€‚</p>
<p>â€‹	æœ€åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¢«åŠé”€ï¼ˆå¦‚é€šè¿‡ CRL æˆ– OCSPï¼‰ã€‚</p>
<p>â€‹				1. å¦‚æœè¯ä¹¦æœªè¢«åŠé”€ï¼Œåˆ™åŠé”€çŠ¶æ€éªŒè¯é€šè¿‡ã€‚</p>
<p>â€‹				2. å¦‚æœè¯ä¹¦å·²è¢«åŠé”€ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‹’ç»è¿æ¥ã€‚</p>
<p>â€‹	æ‰€æœ‰éªŒè¯å…¨éƒ¨é€šè¿‡ï¼Œé€šè¿‡ï¼Œé€šè¿‡ï¼Œé€šè¿‡ï¼Œé€šè¿‡ä¹‹åï¼Œå®¢æˆ·ç«¯å°±æˆåŠŸéªŒè¯äº†æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¯ä»¥ç¡®è®¤æœåŠ¡å™¨æ˜¯å¯ä¿¡çš„ï¼Œå¹¶ä¸ä¹‹å»ºç«‹å®‰å…¨çš„ HTTPS è¿æ¥ã€‚</p>
<p><strong>é™„</strong>ï¼š</p>
<p>â€‹	è‡ªç­¾åè¯ä¹¦æ˜¯ç”±æœåŠ¡å™¨è‡ªå·±ç”Ÿæˆå¹¶ç­¾åçš„æ•°å­—è¯ä¹¦ï¼Œè€Œä¸æ˜¯ç”±å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹è¯ä¹¦é¢å‘æœºæ„ç­¾å‘çš„ã€‚æ¢å¥è¯è¯´ï¼ŒæœåŠ¡å™¨æ—¢æ˜¯è¯ä¹¦çš„ç”³è¯·è€…ï¼Œä¹Ÿæ˜¯è¯ä¹¦çš„ç­¾å‘è€…ï¼Œå°±åƒä½ å‘è€å¸ˆäº¤ä½œä¸šè‡ªå·±ç»™è‡ªå·±ç­¾å­—ä¸€æ ·ã€‚</p>
<hr>
<h2 id="GETå’ŒPOSTï¼š"><a href="#GETå’ŒPOSTï¼š" class="headerlink" title="GETå’ŒPOSTï¼š"></a>GETå’ŒPOSTï¼š</h2><h3 id="GETä¸POSTçš„ä¸€äº›åŒºåˆ«ï¼š"><a href="#GETä¸POSTçš„ä¸€äº›åŒºåˆ«ï¼š" class="headerlink" title="GETä¸POSTçš„ä¸€äº›åŒºåˆ«ï¼š"></a>GETä¸POSTçš„ä¸€äº›åŒºåˆ«ï¼š</h3><ul>
<li>GETä¹ æƒ¯ä¸ŠæŠŠå®¢æˆ·ç«¯çš„æ•°æ®é€šè¿‡query stringæ¥ä¼ è¾“ï¼Œè€ŒPOSTä¹ æƒ¯ä¸Šé€šè¿‡bodyæ¥ä¼ è¾“ã€‚</li>
<li>GETä¹ æƒ¯ä¸Šä»æœåŠ¡å™¨è·å–æ•°æ®ï¼ŒPOSTä¹ æƒ¯ä¸Šæ˜¯å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨ä¸Šä¼ æ•°æ®</li>
<li>GETè¯·æ±‚å…·æœ‰å¹‚ç­‰æ€§ï¼ŒPOSTè¯·æ±‚ä¸å…·æœ‰å¹‚ç­‰æ€§ã€‚</li>
<li>GETè¯·æ±‚å¯ä»¥è¢«ç¼“å­˜ï¼Œè€ŒPOSTè¯·æ±‚ä¸èƒ½è¢«ç¼“å­˜ã€‚</li>
</ul>
<h3 id="GETå’ŒPOSTçš„èŒèƒ½ï¼š"><a href="#GETå’ŒPOSTçš„èŒèƒ½ï¼š" class="headerlink" title="GETå’ŒPOSTçš„èŒèƒ½ï¼š"></a>GETå’ŒPOSTçš„èŒèƒ½ï¼š</h3><p>â€‹	ä»ç†è®ºä¸Šè®²ï¼Œ<strong>GET</strong> å’Œ <strong>POST</strong> è¯·æ±‚è™½ç„¶æœ‰å„è‡ªçš„è¯­ä¹‰å’Œæ¨èç”¨é€”ï¼Œä½†åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œå®ƒä»¬çš„åŠŸèƒ½æ˜¯å¯ä»¥<strong>äº¤æ¢çš„</strong>ï¼Œå³ä¸€ä¸ªè¯·æ±‚æ–¹æ³•å¯ä»¥ç”¨äºå¦ä¸€ä¸ªè¯·æ±‚æ–¹æ³•çš„ä¼ ç»ŸåŠŸèƒ½ã€‚</p>
<p>â€‹	ç†è®ºä¸Šï¼Œå¯ä»¥é€šè¿‡ GET è¯·æ±‚æ¥æäº¤æ•°æ®ï¼ˆæ¯”å¦‚åœ¨ URL ä¸­ä¼ é€’å‚æ•°ï¼‰ï¼Œè¿™ç›¸å½“äºåœ¨æŸäº›æƒ…å†µä¸‹ æ¨¡æ‹Ÿ POST è¯·æ±‚ï¼Œç”šè‡³å¯ä»¥ç›´æ¥å¸¦ä¸Šbodyæ•°æ®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://example.com/api/test&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">key</span>: <span class="string">&#x27;value&#x27;</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;GET with body:&#x27;</span>, data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br></pre></td></tr></table></figure>



<p>â€‹	ç†è®ºä¸Šï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ POST è¯·æ±‚æ¥è·å–æ•°æ®ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ POST è¯·æ±‚æäº¤ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼ˆå°†æ¡ä»¶æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼‰ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›æ¡ä»¶è¿”å›ç»“æœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://example.com/api/test?param1=value1&amp;param2=value2&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;POST with query string and body:&#x27;</span>, data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br></pre></td></tr></table></figure>



<p>â€‹	ç„¶è€Œï¼Œè¿™äº›åšæ³•é€šå¸¸ä¸ç¬¦åˆ HTTP åè®®çš„æœ€ä½³å®è·µï¼Œå¹¶ä¸”å¯èƒ½å¸¦æ¥ä¸€äº›é—®é¢˜å’Œå‰¯ä½œç”¨ã€‚æ¯”å¦‚åœ¨ GET è¯·æ±‚ä¸­åŒ…å« bodyï¼Œå¾ˆå¤šå®ç°ä¼šå¿½ç•¥ body æ•°æ®ï¼Œå› ä¸ºbodyçš„è¯­ä¹‰æœªå®šä¹‰ã€‚</p>
<h3 id="å…³äºGETè¯·æ±‚çš„URLé•¿åº¦ï¼š"><a href="#å…³äºGETè¯·æ±‚çš„URLé•¿åº¦ï¼š" class="headerlink" title="å…³äºGETè¯·æ±‚çš„URLé•¿åº¦ï¼š"></a>å…³äºGETè¯·æ±‚çš„URLé•¿åº¦ï¼š</h3><p>â€‹	åæ­£éƒ½æ‚è°ˆäº†ï¼Œé¡ºä¾¿è¯´ç‚¹å°åƒåœ¾åªæ˜¯å§ã€‚</p>
<p>â€‹	ç½‘ä¸Šæœ‰ä¸€ç§è¯´æ³•æ˜¯è¯´GETè¯·æ±‚çš„é•¿åº¦å­˜åœ¨ä¸Šé™ï¼Œä½†å®é™…ä¸ŠRFC 2616æˆ–è€…RFC 2396ï¼Œéƒ½æ²¡æœ‰å…·ä½“è®¾å®šURLçš„é•¿åº¦ä¸Šé™ï¼Œä¹‹æ‰€ä»¥å®é™…å¼€å‘ä¸­æœ‰ä¸Šé™ï¼Œæ˜¯å› ä¸ºæµè§ˆå™¨ä¸ºäº†ç¡®ä¿æ€§èƒ½ã€å®‰å…¨å’Œå…¼å®¹æ€§å¯¹å…¶åšå‡ºä¸Šé™ï¼›åˆæˆ–è€…æœåŠ¡å™¨ä¸ºäº†é˜²æ­¢è¿‡é•¿çš„è¯·æ±‚å¯¼è‡´èµ„æºæ¶ˆè€—è¿‡å¤§æˆ–å¼•å‘å®‰å…¨é—®é¢˜è€Œé™åˆ¶é•¿åº¦ã€‚</p>
<h3 id="å…³äºPOSTæ¯”GETæ›´åŠ å®‰å…¨ï¼š"><a href="#å…³äºPOSTæ¯”GETæ›´åŠ å®‰å…¨ï¼š" class="headerlink" title="å…³äºPOSTæ¯”GETæ›´åŠ å®‰å…¨ï¼š"></a>å…³äºPOSTæ¯”GETæ›´åŠ å®‰å…¨ï¼š</h3><p>â€‹	å…¶å®æˆ‘å¼€å§‹ä¹Ÿè§‰å¾—POSTæ¯”GETæ›´åŠ å®‰å…¨ï¼Œå› ä¸ºGETæŠŠæ•°æ®æ”¾åœ¨query stringä¸Šï¼Œä»URLä¸­å°±èƒ½çœ‹åˆ°ç”¨æˆ·åå’Œå¯†ç äº†ï¼›è€ŒPOSTæŠŠæ•°æ®æ”¾åœ¨bodyä¸­ï¼Œç™»å½•æ—¶çœ‹ä¸åˆ°ï¼Œå¾ˆå®‰å…¨ğŸ˜‹ã€‚</p>
<p>â€‹	å®é™…ä¸Šï¼Œé€šè¿‡F12å¼€å‘è€…å·¥å…·æˆ–è€…Fiddler(æˆ‘è¿˜æ²¡ææ‡‚ï¼Œææ‡‚å†æ°´ä¸€æœŸğŸ˜‹)ä¸€æŠ“åŒ…å°±åŸå½¢æ¯•éœ²äº†ã€‚</p>
<hr>
<h2 id="Socket-IO"><a href="#Socket-IO" class="headerlink" title="Socket.IO:"></a>Socket.IO:</h2><h3 id="ä»€ä¹ˆæ˜¯Socket-IO"><a href="#ä»€ä¹ˆæ˜¯Socket-IO" class="headerlink" title="ä»€ä¹ˆæ˜¯Socket.IO:"></a>ä»€ä¹ˆæ˜¯Socket.IO:</h3><p>â€‹	Socket.IO æ˜¯ä¸€ä¸ªç”¨äº <strong>å®æ—¶ã€åŒå‘ã€åŸºäºäº‹ä»¶é€šä¿¡</strong> çš„ JavaScript åº“ï¼Œé€‚ç”¨äºæµè§ˆå™¨å’Œ Node.jsã€‚å®ƒåœ¨ WebSockets ä¹‹ä¸Šè¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œå¹¶æä¾›äº†è‡ªåŠ¨é™çº§æœºåˆ¶ï¼ˆå¦‚ HTTP é•¿è½®è¯¢ï¼‰ï¼Œç¡®ä¿åœ¨ä¸åŒç½‘ç»œç¯å¢ƒä¸‹éƒ½èƒ½å®ç°ç¨³å®šçš„å®æ—¶é€šä¿¡ã€‚</p>
<h3 id="Socket-IOçš„ä¼˜ç‚¹ï¼š"><a href="#Socket-IOçš„ä¼˜ç‚¹ï¼š" class="headerlink" title="Socket.IOçš„ä¼˜ç‚¹ï¼š"></a>Socket.IOçš„ä¼˜ç‚¹ï¼š</h3><h4 id="å…¼å®¹æ€§æ›´å¥½"><a href="#å…¼å®¹æ€§æ›´å¥½" class="headerlink" title="å…¼å®¹æ€§æ›´å¥½"></a>å…¼å®¹æ€§æ›´å¥½</h4><p>â€‹	WebSocket ä»…é€‚ç”¨äº <strong>æ”¯æŒ WebSocket çš„æµè§ˆå™¨</strong>ï¼Œè€Œ Socket.IO <strong>å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­è¿è¡Œ</strong>ï¼Œå³ä½¿æµè§ˆå™¨ä¸æ”¯æŒ WebSocketï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨é™çº§åˆ° <strong>XHR è½®è¯¢</strong> æˆ– <strong>JSONP è½®è¯¢</strong>ï¼Œä¿è¯é€šä¿¡ç¨³å®šæ€§ã€‚</p>
<p><strong>é™„ï¼š</strong></p>
<p><strong>XHR è½®è¯¢ï¼š</strong>ä¼ ç»Ÿçš„AJAXè½®è¯¢ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¦‚ 1 ç§’ï¼‰å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æ–°æ¶ˆæ¯ï¼Œä½†æ˜¯é¢‘ç¹è¯·æ±‚å¯		     èƒ½ä¼šå¢åŠ æœåŠ¡å™¨è´Ÿæ‹…ã€‚</p>
<p><strong>JSONP è½®è¯¢ï¼š</strong>åˆ©ç”¨<Script>æ ‡ç­¾ç»•è¿‡æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œæ¥åŠ è½½ä»»ä½•åŸŸçš„JSæ–‡ä»¶ã€‚åŒæºâ€æ˜¯æŒ‡ç½‘é¡µçš„ URL ä¸è¯·æ±‚			çš„èµ„æº URL åœ¨åŸŸåã€åè®®æˆ–ç«¯å£å…¨éƒ¨ç›¸åŒï¼Œä»»æ„ä¸€ä¸ªä¸åŒå³ä¸ºä¸åŒæºã€‚</p>
<h4 id="æ–­çº¿é‡è¿"><a href="#æ–­çº¿é‡è¿" class="headerlink" title="æ–­çº¿é‡è¿"></a>æ–­çº¿é‡è¿</h4><p>â€‹	<strong>WebSocket æ–­å¼€åä¸ä¼šè‡ªåŠ¨é‡è¿</strong>ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™é‡è¿é€»è¾‘ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://localhost:3000&quot;</span>);</span><br><span class="line">    ws.<span class="property">onclose</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(connect, <span class="number">1000</span>); <span class="comment">// æ–­å¼€å 1 ç§’åé‡è¿</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">connect</span>();</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>Socket.IO å†…ç½®é‡è¿æœºåˆ¶</strong>ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = <span class="title function_">io</span>(<span class="string">&quot;http://localhost:3000&quot;</span>, &#123; <span class="attr">reconnection</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">		<span class="comment">//reconnection: trueå…è®¸å®¢æˆ·ç«¯åœ¨è¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨å°è¯•é‡è¿ï¼Œç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚</span></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&quot;connect_error&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿æ¥å¤±è´¥ï¼Œæ­£åœ¨é‡è¯•...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="è®¤è¯æœºåˆ¶ï¼š"><a href="#è®¤è¯æœºåˆ¶ï¼š" class="headerlink" title="è®¤è¯æœºåˆ¶ï¼š"></a>è®¤è¯æœºåˆ¶ï¼š</h4><p>â€‹	WebSocket <strong>æœ¬èº«ä¸æä¾›è®¤è¯</strong>ï¼Œä½†å¯ä»¥é€šè¿‡åœ¨URLä¸­æ·»åŠ tokenè¿›è¡Œè®¤è¯,ä¸è¿‡å¹¶ä¸å®‰å…¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://example.com/socket?token=your_jwt_token&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>â€‹	ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSocket.IOæ”¯æŒç›´æ¥authè®¤è¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = <span class="title function_">io</span>(<span class="string">&quot;http://localhost:3000&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">auth</span>: &#123; <span class="attr">token</span>: <span class="string">&quot;your_jwt_token&quot;</span> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="æˆ¿é—´æœºåˆ¶ï¼š"><a href="#æˆ¿é—´æœºåˆ¶ï¼š" class="headerlink" title="æˆ¿é—´æœºåˆ¶ï¼š"></a>æˆ¿é—´æœºåˆ¶ï¼š</h4><p>â€‹	WebSocket <strong>æ²¡æœ‰æˆ¿é—´</strong>æ¦‚å¿µï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½å¹¿æ’­ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚å¦‚æœæƒ³å®ç°æˆ¿é—´åŠŸèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rooms = &#123;&#125;; <span class="comment">// å­˜å‚¨æˆ¿é—´æˆå‘˜</span></span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(message);</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">type</span> === <span class="string">&quot;join&quot;</span>) &#123;</span><br><span class="line">        rooms[data.<span class="property">room</span>] = rooms[data.<span class="property">room</span>] || [];</span><br><span class="line">        rooms[data.<span class="property">room</span>].<span class="title function_">push</span>(ws);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="property">type</span> === <span class="string">&quot;message&quot;</span>) &#123;</span><br><span class="line">        rooms[data.<span class="property">room</span>].<span class="title function_">forEach</span>(<span class="function"><span class="params">client</span> =&gt;</span> client.<span class="title function_">send</span>(data.<span class="property">message</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>â€‹	Socket.IO ç›´æ¥æ”¯æŒ <code>socket.join(&quot;room1&quot;)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">on</span>(<span class="string">&quot;joinRoom&quot;</span>, <span class="function">(<span class="params">room</span>) =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">join</span>(room);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="äº‹ä»¶é©±åŠ¨ï¼š"><a href="#äº‹ä»¶é©±åŠ¨ï¼š" class="headerlink" title="äº‹ä»¶é©±åŠ¨ï¼š"></a>äº‹ä»¶é©±åŠ¨ï¼š</h4><p>â€‹	<strong>äº‹ä»¶é©±åŠ¨</strong> æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨<strong>å¯ä»¥å®šä¹‰ã€ç›‘å¬å’Œè§¦å‘äº‹ä»¶</strong>ï¼Œå®ç°æ›´çµæ´»çš„åŒå‘é€šä¿¡ã€‚</p>
<p>â€‹	ä½†æ˜¯WebSocket åªèƒ½æ”¶å‘æ–‡æœ¬,éœ€è¦æ‰‹åŠ¨è§£æ JSON å¹¶åŒºåˆ†ä¸åŒçš„æ¶ˆæ¯ç±»å‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ws.<span class="title function_">send</span>(<span class="string">&quot;Hello, Server!&quot;</span>);</span><br><span class="line">ws.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¶åˆ°æ¶ˆæ¯:&quot;</span>, event.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>â€‹	Socket.IO æ”¯æŒäº‹ä»¶é©±åŠ¨,æ— éœ€æ‰‹åŠ¨è§£æ JSON,è·Ÿaxiosä¸€æ ·æ–¹ä¾¿</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">emit</span>(<span class="string">&quot;chatMessage&quot;</span>, &#123; <span class="attr">user</span>: <span class="string">&quot;Alice&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Hello!&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&quot;chatMessage&quot;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;data.user&#125;</span>: <span class="subst">$&#123;data.message&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Socket-IOçš„ä½¿ç”¨ï¼š"><a href="#Socket-IOçš„ä½¿ç”¨ï¼š" class="headerlink" title="Socket.IOçš„ä½¿ç”¨ï¼š"></a>Socket.IOçš„ä½¿ç”¨ï¼š</h3><p>â€‹	è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿå¾ˆç®€å•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install socket.io-client</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.socket.io/4.4.1/socket.io.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¼•å…¥ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡Socket.IOå»ºç«‹WebSocketé€šä¿¡äº†ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = <span class="title function_">io</span>(<span class="string">&quot;http://localhost:3000&quot;</span>); <span class="comment">//è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯:&quot;</span>, data);</span><br><span class="line">&#125;) <span class="comment">//ç›‘å¬æœåŠ¡å™¨äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">socket.<span class="title function_">emit</span>(<span class="string">&quot;chatMessage&quot;</span>, <span class="string">&quot;ä½ å¥½ï¼ŒæœåŠ¡å™¨ï¼&quot;</span>)<span class="comment">//å‘é€äº‹ä»¶åˆ°æœåŠ¡å™¨</span></span><br><span class="line"></span><br><span class="line">socket.<span class="title function_">disconnect</span>()<span class="comment">//æ–­å¼€è¿æ¥</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2025/02/18/%E9%97%AD%E5%8C%85,%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%92%8C%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/02/18/%E9%97%AD%E5%8C%85,%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%92%8C%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2/" class="post-title-link" itemprop="url">é—­åŒ…ï¼Œåƒåœ¾å›æ”¶å’Œå†…å­˜æ³„éœ²</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-02-18 16:58:10" itemprop="dateCreated datePublished" datetime="2025-02-18T16:58:10+08:00">2025-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-02-23 16:08:40" itemprop="dateModified" datetime="2025-02-23T16:08:40+08:00">2025-02-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¸€-é—­åŒ…"><a href="#ä¸€-é—­åŒ…" class="headerlink" title="ä¸€ . é—­åŒ…"></a>ä¸€ . é—­åŒ…</h1><h2 id="1-ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š"><a href="#1-ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š" class="headerlink" title="1.ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š"></a>1.ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š</h2><p>â€‹	ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¼•ç”¨<strong>JS</strong>ä¹¦ä¸­çš„å®šä¹‰ï¼Œå½“ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿè®°ä½å¹¶ä¸”è®¿é—®å…¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°æ˜¯åœ¨ä½œç”¨åŸŸä¹‹å¤–è¢«æ‰§è¡Œçš„ï¼Œè¿™å°±æ˜¯é—­åŒ…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span> <span class="comment">// a æ˜¯ä¸€ä¸ªè¢« a åˆ›å»ºçš„å±€éƒ¨å˜é‡</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123; <span class="comment">// b æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// ä½¿ç”¨äº†çˆ¶å‡½æ•°ä¸­å£°æ˜çš„å˜é‡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="title function_">a</span>()</span><br><span class="line"><span class="title function_">c</span>() <span class="comment">//1 è¿™å°±æ˜¯é—­åŒ…</span></span><br></pre></td></tr></table></figure>

<p>â€‹	åœ¨a() å‡½æ•°ä¸­å£°æ˜äº†ä¸€ä¸ªç§æœ‰å˜é‡ a , b() å‡½æ•°æ˜¯ a() å‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œæ­¤æ—¶ a å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹ b éƒ½æ˜¯å¯è§çš„ï¼Œä½†æ˜¯a()ä¸­çš„å˜é‡å¯¹äºå¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œb å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹ a å°±æ˜¯ä¸å¯è§çš„ã€‚è¿™å°±æ˜¯JSçš„â€ä½œç”¨åŸŸé“¾â€œã€‚å…¶ä¸­ï¼Œa()åœ¨æ‰§è¡Œä¹‹åï¼Œå°† b è¿”å›ï¼Œå¹¶èµ‹å€¼ç»™äº†c ï¼Œé€šè¿‡cä»å¤–éƒ¨è®¿é—®äº† a() çš„å†…éƒ¨å˜é‡aã€‚</p>
<p>â€‹	é—­åŒ…æ˜¯ä¸€ç§ä¿æŠ¤ç§æœ‰å˜é‡çš„æœºåˆ¶ï¼Œå®ƒåœ¨å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œä»è€Œä¿æŠ¤å†…éƒ¨çš„ç§æœ‰å˜é‡ä¸å—å¤–ç•Œå¹²æ‰°,åŒæ—¶å…è®¸å¤–ç•Œè®¿é—®å†…éƒ¨çš„ç§æœ‰å˜é‡ã€‚</p>
<p>â€‹	ç›´è§‚åœ°è¯´ï¼Œé—­åŒ…å°±åƒæ˜¯ä¸€ä¸ªä¸ä¼šè¢«é”€æ¯çš„æ ˆç¯å¢ƒã€‚</p>
<h2 id="2-é—­åŒ…çš„ä¼˜ç‚¹ï¼š"><a href="#2-é—­åŒ…çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="2.é—­åŒ…çš„ä¼˜ç‚¹ï¼š"></a>2.é—­åŒ…çš„ä¼˜ç‚¹ï¼š</h2><p>â€‹	ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥æ³¨æ„åˆ°ï¼Œaæ˜¯a()ä¸­çš„ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œä½†æ˜¯æˆ‘ä»¬å´åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è®¿é—®äº†å‡½æ•°çš„ç§æœ‰å˜é‡ï¼Œä»ä¸­å¯ä»¥çœ‹å‡ºäº†é—­åŒ…çš„å‡ ä¸ªä¼˜ç‚¹ï¼š</p>
<ol>
<li><strong>ä¿æŠ¤ç§æœ‰å˜é‡</strong></li>
<li><strong>å»¶é•¿å˜é‡å¯¿å‘½</strong></li>
<li><strong>å®ç°å˜é‡å…±äº«</strong></li>
</ol>
<p>	</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå¯ä»¥æ¥çœ‹çœ‹æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span> </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="title function_">a</span>()</span><br><span class="line"><span class="keyword">const</span> a = <span class="number">2</span> <span class="comment">// åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä¸ºaèµ‹å€¼ä¸º2</span></span><br><span class="line"><span class="title function_">c</span>() <span class="comment">//æœ€åç»“æœä»ç„¶æ˜¯1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸Šè¿°ä»£ç ä¸­ï¼Œaæ˜¯aï¼ˆï¼‰ä¸­çš„ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œå› æ­¤å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®å®ƒã€‚å³ä½¿åœ¨å…¨å±€å£°æ˜äº†ä¸€ä¸ªåŒåå˜é‡aï¼Œä¹Ÿæ— æ³•å½±å“åˆ°å‡½æ•°å†…éƒ¨ï¼Œaå˜é‡çš„å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«ä¿®æ”¹å’Œè®¿é—®ï¼Œè¿™æ ·å°±ä¿æŠ¤äº†é—­åŒ…ä¸­çš„ç§æœ‰å˜é‡ã€‚</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> n = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(n++)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a++)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> add = <span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 2 </span></span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 3 aè¿˜æ´»ç€ï¼</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°<strong>fn</strong>æ‰§è¡Œå®Œåï¼Œå°±åº”è¯¥è¿åŒå®ƒé‡Œé¢çš„å˜é‡ä¸€åŒè¢«åƒåœ¾å›æ”¶ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<strong>f1ï¼ˆï¼‰</strong>å‡½æ•°ä½œä¸ºfnçš„è¿”å›å€¼è¢«èµ‹å€¼ç»™äº†<strong>add</strong>ï¼Œè¿™æ—¶å€™ç›¸å½“äº<strong>add&#x3D;function f1(){ â€¦ }<strong>ï¼Œå¹¶ä¸”</strong>f1()<strong>å†…éƒ¨å¼•ç”¨ç€</strong>fn</strong>é‡Œçš„å˜é‡<strong>a</strong>ï¼Œæ‰€ä»¥å˜é‡<strong>a</strong>æ— æ³•è¢«é”€æ¯ï¼Œè€Œå˜é‡næ˜¯æ¯æ¬¡è¢«è°ƒç”¨æ—¶æ–°åˆ›å»ºçš„ï¼Œæ‰€ä»¥æ¯æ¬¡<strong>f1</strong>æ‰§è¡Œå®Œåå®ƒå°±æŠŠå±äºè‡ªå·±çš„å˜é‡è¿åŒè‡ªå·±ä¸€èµ·é”€æ¯ï¼Œä½†æ˜¯æŠŠ<strong>a</strong>ä¿ç•™äº†ä¸‹æ¥ï¼Œå®ç°äº†å»¶é•¿å˜é‡å¯¿å‘½ï¼Œä½†è¿™åˆå‡ºç°äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼Œåé¢å†è®²ã€‚</p>
<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span> </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="title function_">a</span>()</span><br><span class="line"><span class="title function_">c</span>() <span class="comment">//1 æˆ‘ä»å¤–éƒ¨è®¿é—®äº†ç§æœ‰å˜é‡ï¼</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå³ä½¿<strong>a</strong>æ˜¯**a()**ä¸­çš„ç§æœ‰å˜é‡ï¼Œä½†ä»ç„¶ä»å¤–éƒ¨è®¿é—®äº†å®ƒï¼Œè¿™å°±æ˜¯å˜é‡å…±äº«ã€‚</p>
<hr>
<h2 id="3-é—­åŒ…çš„ä½œç”¨"><a href="#3-é—­åŒ…çš„ä½œç”¨" class="headerlink" title="3. é—­åŒ…çš„ä½œç”¨"></a>3. é—­åŒ…çš„ä½œç”¨</h2><h4 id="3-1èŠ‚æµ"><a href="#3-1èŠ‚æµ" class="headerlink" title="3.1èŠ‚æµ"></a>3.1èŠ‚æµ</h4><p>â€‹	<strong>èŠ‚æµ</strong>æ˜¯æŒ‡é™åˆ¶å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡<strong>ï¼Œå³åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…</strong>æœ€å¤šåªæ‰§è¡Œä¸€æ¬¡**ï¼Œå³ä½¿äº‹ä»¶è¢«å¤šæ¬¡è§¦å‘ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> lastTime = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">if</span> (now - lastTime &gt;= delay) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">            lastTime = now; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> log = <span class="title function_">throttle</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆ‘æ»šäº†&quot;</span>), <span class="number">1000</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, log);</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="3-2-é˜²æŠ–"><a href="#3-2-é˜²æŠ–" class="headerlink" title="3.2 é˜²æŠ–"></a>3.2 é˜²æŠ–</h4><p>â€‹	<strong>é˜²æŠ–</strong>æ˜¯æŒ‡åœ¨äº‹ä»¶è§¦å‘åï¼Œ<strong>ä¸€å®šæ—¶é—´å†…ä¸å†è§¦å‘</strong>ï¼Œæ‰æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>â€‹	å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> handleInput = <span class="title function_">debounce</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æœç´¢ï¼š&quot;</span> + event.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, handleInput);</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="3-3-å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#3-3-å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="3.3 å‡½æ•°æŸ¯é‡ŒåŒ–"></a>3.3 å‡½æ•°æŸ¯é‡ŒåŒ–</h4><p>â€‹	<strong>æŸ¯é‡ŒåŒ– <strong>æ˜¯æŒ‡å°†ä¸€ä¸ª</strong>å¤šå‚æ•°</strong>å‡½æ•°è½¬æ¢æˆå¤šä¸ª<strong>å•å‚æ•°</strong>å‡½æ•°çš„è°ƒç”¨é“¾ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (args.<span class="property">length</span> &gt;= fn.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...nextArgs</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> curried.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args.<span class="title function_">concat</span>(nextArgs));</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> curriedAdd = <span class="title function_">curry</span>(add);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curriedAdd</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">// 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curriedAdd</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">// 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curriedAdd</span>(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="3-4-æ¨¡å—åŒ–"><a href="#3-4-æ¨¡å—åŒ–" class="headerlink" title="3.4 æ¨¡å—åŒ–"></a>3.4 æ¨¡å—åŒ–</h4><p>â€‹	<strong>æ¨¡å—åŒ–</strong>æ˜¯æŒ‡<strong>å°†ä»£ç æ‹†åˆ†æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ä¸åŒçš„åŠŸèƒ½</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CounterModule</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">increment</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Count:&quot;</span>, count);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">decrement</span>: <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">            count--;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Count:&quot;</span>, count);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attr">reset</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Reset to 0&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">CounterModule</span>.<span class="title function_">increment</span>(); <span class="comment">// Count: 1</span></span><br><span class="line"><span class="title class_">CounterModule</span>.<span class="title function_">increment</span>(); <span class="comment">// Count: 2</span></span><br><span class="line"><span class="title class_">CounterModule</span>.<span class="title function_">decrement</span>(); <span class="comment">// Count: 1</span></span><br><span class="line"><span class="title class_">CounterModule</span>.<span class="title function_">reset</span>(); <span class="comment">// Reset to 0</span></span><br></pre></td></tr></table></figure>

<hr>
<p>â€‹	ç°åœ¨ï¼Œå†è¿”å›å‰é¢çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆfn()ä¸­çš„aè¢«ä¿ç•™ä¸‹æ¥ï¼Œè€Œf1()ä¸­çš„nè¢«é”€æ¯äº†å‘¢ï¼Ÿè¿™å°±å¼•å‡ºäº†JSçš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<h1 id="äºŒ-åƒåœ¾å›æ”¶"><a href="#äºŒ-åƒåœ¾å›æ”¶" class="headerlink" title="äºŒ . åƒåœ¾å›æ”¶"></a>äºŒ . åƒåœ¾å›æ”¶</h1><h2 id="1-ä»€ä¹ˆæ˜¯åƒåœ¾ï¼š"><a href="#1-ä»€ä¹ˆæ˜¯åƒåœ¾ï¼š" class="headerlink" title="1. ä»€ä¹ˆæ˜¯åƒåœ¾ï¼š"></a>1. ä»€ä¹ˆæ˜¯åƒåœ¾ï¼š</h2><p>â€‹	ä»€ä¹ˆæ˜¯åƒåœ¾å‘¢ï¼Ÿåƒåœ¾æ˜¯å¦‚ä½•å®šä¹‰çš„å‘¢ï¼Ÿ</p>
<p>â€‹	å¾ˆç®€å•ï¼ŒJSä¸­çš„å‡½æ•°ï¼Œå˜é‡ï¼Œå¯¹è±¡ç­‰éƒ½éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ï¼Œå½“è¿™äº›ä¸œè¥¿ä¸å†è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±å˜æˆäº†åƒåœ¾ã€‚</p>
<p>åƒåœ¾å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ol>
<li><strong>å·²ç»è°ƒç”¨å®Œæ¯•çš„å‡½æ•°ä½œç”¨åŸŸåŠå…¶å†…éƒ¨çš„å€¼</strong></li>
<li><strong>æ— æ³•è¢«è®¿é—®åˆ°çš„å€¼</strong></li>
</ol>
<p>â€‹	æ­£å¦‚ä¹‹å‰æ‰€è¯´ï¼Œ<strong>JS</strong>ä¸­çš„æ‰€æœ‰çš„å˜é‡éƒ½ä¼šå ç”¨å†…å­˜ï¼Œå½“è¿™äº›å˜é‡å˜æˆåƒåœ¾çš„æ—¶å€™ï¼Œå¦‚æœä¸è¿›è¡Œå›æ”¶ï¼Œå†…å­˜å°±ä¼šè¢«ä¸€ç›´å ç”¨ï¼Œéšç€ç¨‹åºçš„è¿è¡Œï¼Œåƒåœ¾ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œæ€»æœ‰ä¸€åˆ»ï¼Œå†…å­˜ä¼šè¢«å æ»¡ï¼Œç¨‹åºä¹Ÿå°±æ— æ³•è¿è¡Œäº†ã€‚</p>
<hr>
<h2 id="2-åƒåœ¾å›æ”¶æœºåˆ¶ï¼š"><a href="#2-åƒåœ¾å›æ”¶æœºåˆ¶ï¼š" class="headerlink" title="2. åƒåœ¾å›æ”¶æœºåˆ¶ï¼š"></a>2. åƒåœ¾å›æ”¶æœºåˆ¶ï¼š</h2><p>â€‹	é¦–å…ˆï¼Œæ ¹æ®JSçš„å†…å­˜åˆ†é…æœºåˆ¶ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ä¿å­˜åœ¨å›ºå®šçš„å ç©ºé—´ä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å€¼è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯å¤æ‚æ•°æ®ç±»å‹çš„å¤§å°ä¸å›ºå®šï¼Œæ‰€ä»¥å…¶ä¼šé€šè¿‡å¼•ç”¨åœ°å€ä¿å­˜åœ¨æ ˆç©ºé—´ï¼Œè€Œå¼•ç”¨çš„æŒ‡å‘ä¿å­˜çš„å€¼ä¿å­˜åœ¨å †ç©ºé—´ï¼Œé€šè¿‡å¼•ç”¨è®¿é—®ï¼Œæ¯”å¦‚å‡½æ•°ï¼Œå¯¹è±¡ç­‰ã€‚</p>
<p>â€‹	æ ˆå†…å­˜ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ“ä½œç³»ç»Ÿæ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å †å†…å­˜ä¸­çš„å¤æ‚æ•°æ®ç±»å‹çš„å€¼çš„å¤§å°ä¸ç¡®å®šï¼Œè¿™å°±éœ€è¦JSçš„å¼•æ“é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶è¿›è¡Œå¤„ç†ã€‚</p>
<h3 id="2-1-å¯è¾¾æ€§ï¼š"><a href="#2-1-å¯è¾¾æ€§ï¼š" class="headerlink" title="2.1 å¯è¾¾æ€§ï¼š"></a>2.1 å¯è¾¾æ€§ï¼š</h3><p>â€‹	åœ¨JSä¸­ï¼Œå†…å­˜ç®¡ç†çš„ä¸»è¦æ¦‚å¿µæ˜¯å¯è¾¾æ€§ï¼Œâ€å¯è¾¾æ€§â€œå€¼å°±æ˜¯é‚£äº›ä»¥æŸç§æ–¹å¼å¯è®¿é—®çš„å€¼ï¼Œä»–ä»¬è¢«ä¿è¯å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> me = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;å¥¶é¾™&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	åœ¨è¿™é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡meï¼Œå®ƒæŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡{name:â€œå¥¶é¾™â€}ï¼Œå› æ­¤è¿™ä¸ªè¿™ä¸ªå¯¹è±¡æ˜¯å¯è¾¾çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> me = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;å¥¶é¾™&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">me = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>â€‹	æ­¤æ—¶ï¼Œå¯¹è±¡{name:â€œå¥¶é¾™â€}å¤„äºä¸å¯è¾¾çš„çŠ¶æ€ï¼Œç”±äºæ— æ³•è®¿é—®å®ƒï¼Œåƒåœ¾å›æ”¶å™¨å°†å›æ”¶è¿™ä¸ªæ•°æ®å¹¶é‡Šæ”¾å†…å­˜ã€‚</p>
<h3 id="2-2-å¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ï¼š"><a href="#2-2-å¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ï¼š" class="headerlink" title="2.2 å¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ï¼š"></a>2.2 å¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ï¼š</h3><p>â€‹	åœ¨æµè§ˆå™¨çš„å†å²ä¸Šï¼Œæœ‰ä¸¤ç§åƒåœ¾å›æ”¶çš„æ–¹æ³•ï¼š</p>
<ul>
<li>æ ‡è®°æ¸…é™¤</li>
<li>å¼•ç”¨è®¡æ•°</li>
</ul>
<h4 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h4><p>â€‹	å¼•ç”¨è®¡æ•°æ˜¯ä¸€ç§å‡ ä¹è¢«æ·˜æ±°çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå®ƒé€šè¿‡å¯¹æ¯ä¸ªå¤æ‚æ•°æ®ç±»å‹çš„å˜é‡è¿›è¡Œè®¡æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å½“å˜é‡å£°æ˜å¹¶èµ‹å€¼ä¹‹åï¼Œå€¼å¾—å¼•ç”¨æ•°ä¸º1</li>
<li>å½“åŒä¸€ä¸ªå€¼è¢«èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¼•ç”¨æ•°åŠ 1</li>
<li>å½“ä¿å­˜è¯¥å€¼å¼•ç”¨çš„å˜é‡è¢«å…¶å®ƒå€¼è¦†ç›–æ—¶ï¼Œå¼•ç”¨æ•°å‡1</li>
<li>å½“ä¸€ä¸ªå€¼çš„å¼•ç”¨æ•°å˜ä¸º0æ—¶ï¼Œå°±è¡¨ç¤ºæ— æ³•å†è®¿é—®è¯¥å€¼ï¼Œæ­¤æ—¶åƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šå°†å…¶æ¸…é™¤å¹¶å›æ”¶å†…å­˜</li>
</ul>
<p>â€‹	çœ‹èµ·æ¥å¾ˆå®Œç¾ï¼Œä½†åªæ˜¯çœ‹èµ·æ¥è€Œå·²ï¼Œå¼•ç”¨è®¡æ•°å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„ç¼ºé™·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">problem</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> objA = &#123;&#125;</span><br><span class="line">       <span class="keyword">const</span> objB = &#123;&#125;</span><br><span class="line">       objA.<span class="property">a</span> = objB</span><br><span class="line">       objB.<span class="property">b</span> = objA</span><br><span class="line">       </span><br><span class="line">       objA = <span class="literal">null</span></span><br><span class="line">       objB = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘objAå’ŒobjBä¹‹å‰åˆ†åˆ«æŒ‡å‘çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä½†å®ƒä»¬ç›¸äº’å¼•ç”¨ï¼Œå¯¼è‡´å®ƒä»¬çš„å¼•ç”¨æ•°æ°¸è¿œä¸ä¼šä¸ºé›¶ï¼Œä¹Ÿå°±æ°¸è¿œä¸ä¼šè¢«å›æ”¶äº†ã€‚å› æ­¤ï¼Œç°ä»£æµè§ˆå™¨é‡‡ç”¨äº†å¦ä¸€ç§æ–°çš„å›æ”¶æœºåˆ¶ã€‚</p>
<h4 id="æ ‡è®°æ¸…é™¤"><a href="#æ ‡è®°æ¸…é™¤" class="headerlink" title="æ ‡è®°æ¸…é™¤"></a>æ ‡è®°æ¸…é™¤</h4><p>â€‹	ç›¸å¯¹äºå¼•ç”¨è®¡æ•°ï¼Œæ ‡è®°æ¸…é™¤å°±ç®€å•çš„å¤šäº†ï¼Œæ— éå°±æ˜¯æ‰“ä¸æ‰“æ ‡è®°çš„é—®é¢˜ï¼Œå°±è·ŸäºŒè¿›åˆ¶çš„0å’Œ1ååˆ†ç›¸ä¼¼ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œæ—¶ä¼šç»™å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šä¸€ä¸ªæ ‡è®°ï¼Œå‡è®¾å†…å­˜ä¸­æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åƒåœ¾ï¼Œå…¨æ ‡è®°ä¸º0</li>
<li>ç„¶åä»å„ä¸ªæ ¹å¯¹è±¡å¼€å§‹éå†ï¼ŒæŠŠä¸æ˜¯åƒåœ¾çš„èŠ‚ç‚¹æ”¹æˆ1</li>
<li>æ¸…ç†æ‰€æœ‰æ ‡è®°ä¸º0çš„åƒåœ¾ï¼Œé”€æ¯å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´</li>
<li>æœ€åï¼ŒæŠŠæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡æ ‡è®°ä¿®æ”¹ä¸º0ï¼Œç­‰å¾…ä¸‹ä¸€è½®åƒåœ¾å›æ”¶</li>
</ul>
<p>â€‹	ä½†æ˜¯ï¼Œæ ‡è®°æ¸…é™¤ç®—æ³•æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼Œå°±æ˜¯åœ¨æ¸…é™¤ä¹‹åï¼Œå‰©ä½™çš„å¯¹è±¡å†…å­˜ä½ç½®æ˜¯ä¸å˜çš„ï¼Œä¹Ÿä¼šå¯¼è‡´ç©ºé—²å†…å­˜ç©ºé—´æ˜¯ä¸è¿ç»­çš„ï¼Œå‡ºç°äº† <code>å†…å­˜ç¢ç‰‡</code>ï¼Œå¹¶ä¸”ç”±äºå‰©ä½™ç©ºé—²å†…å­˜ä¸æ˜¯ä¸€æ•´å—ï¼Œå®ƒæ˜¯ç”±ä¸åŒå¤§å°å†…å­˜ç»„æˆçš„å†…å­˜åˆ—è¡¨ï¼Œè¿™å°±ç‰µæ‰¯å‡ºäº†å†…å­˜åˆ†é…çš„é—®é¢˜ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ã€‚</p>
<p>å›è¿‡å¤´æ¥ï¼Œå†æ¥è§£é‡Šä¸Šé¢çš„é—®é¢˜</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> n = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(n++)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a++)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> add = <span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 2 </span></span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 3 æˆ‘çš„aè¿˜æ´»ç€ï¼</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong><code>fn</code> æ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li>å½“è°ƒç”¨ <code>fn()</code> æ—¶ï¼Œå±€éƒ¨å˜é‡ <code>a</code> è¢«åˆ›å»ºå¹¶èµ‹å€¼ä¸º <code>1</code>ã€‚</li>
<li>ç„¶åè¿”å›çš„æ˜¯å†…éƒ¨å‡½æ•° <code>f1</code>ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°å†…éƒ¨ä¼šè®¿é—®å¤–éƒ¨çš„ <code>a</code> å˜é‡ã€‚</li>
</ul>
<p><strong>é—­åŒ…å½¢æˆ</strong>ï¼š</p>
<ul>
<li>å‡½æ•° <code>f1</code> æ˜¯ä¸€ä¸ª <strong>é—­åŒ…</strong>ï¼Œå®ƒè®¿é—®äº† <code>fn</code> ä¸­çš„ <code>a</code> å˜é‡ã€‚å› æ­¤ï¼Œ<code>a</code> è¢«ä¿å­˜åœ¨ <code>f1</code> çš„ä½œç”¨åŸŸä¸­ã€‚</li>
<li>è¿™æ„å‘³ç€å³ä½¿ <code>fn</code> æ‰§è¡Œå®Œæ¯•ï¼Œ<code>fn</code> ä¸­çš„ <code>a</code> å˜é‡ä¾ç„¶å­˜åœ¨äº <code>f1</code> çš„ <strong>é—­åŒ…ç¯å¢ƒä¸­</strong>ï¼Œå¹¶ä¸ä¼šè¢«é”€æ¯ã€‚</li>
</ul>
<p>**è°ƒç”¨ <code>add()</code>**ï¼š</p>
<ul>
<li><code>add</code> æ˜¯ <code>fn()</code> çš„è¿”å›å€¼ï¼Œå³ <code>f1</code> å‡½æ•°ã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ <code>add()</code> æ—¶ï¼Œ<code>f1</code> æ‰§è¡Œå¹¶è®¿é—®äº†é—­åŒ…ä¸­çš„ <code>a</code> å˜é‡ã€‚</li>
<li>å°½ç®¡ <code>fn</code> æ‰§è¡Œå®Œæ¯•ï¼Œ<code>a</code> å˜é‡çš„ä½œç”¨åŸŸå¹¶æ²¡æœ‰è¢«é”€æ¯ï¼Œå› ä¸º <code>f1</code>ï¼ˆé—­åŒ…ï¼‰ä»ç„¶åœ¨è®¿é—®å®ƒã€‚<strong>é—­åŒ…è®© <code>a</code> ä¿æŒåœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°é—­åŒ…æœ¬èº«ä¸å†è¢«å¼•ç”¨ã€‚</strong></li>
</ul>
<p>çœæµï¼š</p>
<p><strong>æ ¹å¯¹è±¡ï¼š</strong></p>
<ul>
<li><code>window</code></li>
<li><code>add</code>ï¼ˆå…¨å±€å˜é‡ï¼ŒæŒ‡å‘ <code>f1</code>ï¼‰</li>
</ul>
<p><strong>å¯è¾¾å¯¹è±¡ï¼š</strong></p>
<ul>
<li><code>add</code> æŒ‡å‘ <code>f1</code></li>
<li><code>f1</code> é€šè¿‡é—­åŒ…ä½œç”¨åŸŸ <strong>å¼•ç”¨äº† <code>a</code></strong></li>
<li><code>a</code> ä»ç„¶å¯è¾¾</li>
</ul>
<hr>
<h1 id="ä¸‰-å†…å­˜æ³„æ¼"><a href="#ä¸‰-å†…å­˜æ³„æ¼" class="headerlink" title="ä¸‰. å†…å­˜æ³„æ¼"></a>ä¸‰. å†…å­˜æ³„æ¼</h1><h2 id="1-ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²"><a href="#1-ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²" class="headerlink" title="1.ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²"></a>1.ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²</h2><p>â€‹	åœ¨ä»‹ç»é—­åŒ…çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç°åœ¨å†æ¥çœ‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> n = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(n++)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a++)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> add = <span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 2 </span></span><br><span class="line"><span class="title function_">add</span>() <span class="comment">//1 3 æˆ‘çš„aè¿˜æ´»ç€ï¼</span></span><br></pre></td></tr></table></figure>

<p>â€‹	ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†é—­åŒ…ï¼Œå› æ­¤å»¶é•¿äº†å±€éƒ¨å˜é‡açš„å¯¿å‘½ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶è®¿é—®å®ƒï¼Œä½†è¿™æ ·ä¹Ÿå¯¼è‡´äº†aä¼šä¸€ç›´å­˜æ´»ï¼Œæ— æ³•è¢«å›æ”¶ï¼Œè¿™å°±æ˜¯å†…å­˜æ³„éœ²ã€‚</p>
<p>â€‹	<strong>å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡Œæ—¶æ— æ³•é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œå¯¼è‡´å†…å­˜é€æ¸è€—å°½ï¼Œç”šè‡³é€ æˆç¨‹åºå´©æºƒæˆ–æ€§èƒ½ä¸‹é™ã€‚</strong></p>
<h2 id="2-æ€æ ·ä¼šå¼•èµ·å†…å­˜æ³„éœ²"><a href="#2-æ€æ ·ä¼šå¼•èµ·å†…å­˜æ³„éœ²" class="headerlink" title="2. æ€æ ·ä¼šå¼•èµ·å†…å­˜æ³„éœ²"></a>2. æ€æ ·ä¼šå¼•èµ·å†…å­˜æ³„éœ²</h2><h3 id="2-1-é—­åŒ…"><a href="#2-1-é—­åŒ…" class="headerlink" title="2.1 é—­åŒ…"></a>2.1 é—­åŒ…</h3><p>â€‹	ç•¥</p>
<h3 id="2-2-æ„å¤–çš„å…¨å±€å˜é‡"><a href="#2-2-æ„å¤–çš„å…¨å±€å˜é‡" class="headerlink" title="2.2 æ„å¤–çš„å…¨å±€å˜é‡"></a>2.2 æ„å¤–çš„å…¨å±€å˜é‡</h3><p>â€‹	å…¨å±€å˜é‡å…·æœ‰éå¸¸é•¿çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸€ç›´åˆ°é¡µé¢è¢«å…³é—­ï¼Œå®ƒéƒ½ä¼šå­˜æ´»ç€ï¼Œæ‰€ä»¥å…¨å±€å˜é‡ä¸Šçš„å†…å­˜ä¸€ç›´éƒ½ä¸ä¼šè¢«å›æ”¶ã€‚</p>
<h3 id="2-3-è§’è½çš„å®šæ—¶å™¨"><a href="#2-3-è§’è½çš„å®šæ—¶å™¨" class="headerlink" title="2.3 è§’è½çš„å®šæ—¶å™¨"></a>2.3 è§’è½çš„å®šæ—¶å™¨</h3><p>â€‹	å®šæ—¶å™¨æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªé¡µé¢ä½¿ç”¨äº†å®šæ—¶å™¨ï¼Œä½†åœ¨å…³é—­å®šæ—¶å™¨æ—¶æ²¡æœ‰æ¸…é™¤å®šæ—¶å™¨çš„è¯ï¼Œå®šæ—¶å™¨è¿˜æ˜¯æ´»ç€çš„ã€‚æ¢å¥è¯è¯´ï¼Œå®šæ—¶å™¨çš„ç”Ÿå‘½å‘¨æœŸå¹¶ä¸æŒ‚é åœ¨é¡µé¢ä¸Šï¼Œå¦‚æœåœ¨å½“å‰é¡µé¢çš„JSé€šè¿‡å®šæ—¶å™¨æ³¨å†Œäº†æŸä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œè¯¥å›è°ƒå‡½æ•°åˆæŒæœ‰å½“å‰é¡µé¢çš„æŸä¸ªå˜é‡æˆ–æŸä¸ªDOMå…ƒç´ ï¼Œå°±ä¼šå¯¼è‡´å³ä½¿é¡µé¢é”€æ¯ï¼Œç”±äºå®šæ—¶å™¨æŒæœ‰è¯¥é¡µé¢éƒ¨åˆ†å¼•ç”¨è€Œé€ æˆé¡µé¢æ— æ³•æ­£å¸¸å›æ”¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">clearTimeoutExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1000000</span>).<span class="title function_">fill</span>(<span class="string">&quot;Large Object&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This will be cleared after 1 second.&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">clearTimeoutExample</span>();</span><br></pre></td></tr></table></figure>

<h3 id="2-4-è¢«é—å¿˜çš„DOMå…ƒç´ "><a href="#2-4-è¢«é—å¿˜çš„DOMå…ƒç´ " class="headerlink" title="2.4 è¢«é—å¿˜çš„DOMå…ƒç´ "></a>2.4 è¢«é—å¿˜çš„DOMå…ƒç´ </h3><p>â€‹	DOMå…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å–å†³äºæ˜¯å¦å¯ä»¥æŒ‚è½½åœ¨DOMæ ‘ä¸Šï¼Œå½“ä»DOMæ ‘ä¸Šç§»é™¤æ—¶ï¼Œä¹Ÿå°±å¯ä»¥è¢«é”€æ¯ç§»é™¤äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸä¸ªDOMå…ƒç´ åœ¨JSä¸­ä¹ŸæŒæœ‰å®ƒçš„å¼•ç”¨æ—¶ï¼Œé‚£ä¹ˆå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±ç”±JSå’Œæ˜¯å¦åœ¨DOMæ ‘ä¸ŠäºŒè€…å†³å®šäº†ï¼Œåªæœ‰å°†ä¸¤ä¸ªåœ°æ–¹éƒ½å»æ¸…ç†æ‰èƒ½æ­£å¸¸å›æ”¶å®ƒ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;myElement&quot;</span>&gt;<span class="title class_">Hello</span>, <span class="title class_">World</span>!&lt;/div&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;removeButton&quot;</span>&gt;</span>Remove Element<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">   </span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">let</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myElement&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;removeButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(element);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸Šè¿°ä»£ç ä¸­ï¼Œå³ä½¿æˆ‘ä»¬ä»DOMæ ‘ä¸­ç§»é™¤äº†<code>#myElement</code> å…ƒç´ ï¼Œä½†<code>element</code> å˜é‡ä»ç„¶æŒæœ‰å¯¹ <code>#myElement</code> çš„å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p>
<h2 id="3-å¦‚ä½•è§£å†³å†…å­˜æ³„éœ²"><a href="#3-å¦‚ä½•è§£å†³å†…å­˜æ³„éœ²" class="headerlink" title="3.å¦‚ä½•è§£å†³å†…å­˜æ³„éœ²"></a>3.å¦‚ä½•è§£å†³å†…å­˜æ³„éœ²</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">big</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> bigData = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1000000</span>).<span class="title function_">fill</span>(<span class="string">&quot;big&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(bigData.<span class="property">length</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> createData = <span class="title function_">big</span>();</span><br><span class="line"><span class="comment">// åœ¨ä¸å†éœ€è¦æ—¶ï¼Œæ‰‹åŠ¨è§£é™¤å¼•ç”¨</span></span><br><span class="line">createData = <span class="literal">null</span>;  <span class="comment">// è§£é™¤é—­åŒ…å¯¹ largeData çš„å¼•ç”¨ï¼Œå…è®¸åƒåœ¾å›æ”¶</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span> </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="title function_">a</span>()</span><br><span class="line"><span class="title function_">c</span>() <span class="comment">//å°½é‡ä½¿ç”¨å±€éƒ¨å˜é‡è€Œéå…¨å±€å˜é‡</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">clearTimeoutExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1000000</span>).<span class="title function_">fill</span>(<span class="string">&quot;Large Object&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This will be cleared after 1 second.&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœ¨ä¸å†éœ€è¦æ—¶æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeoutId);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">clearTimeoutExample</span>();</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;myElement&quot;</span>&gt;<span class="title class_">Hello</span>, <span class="title class_">World</span>!&lt;/div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;removeButton&quot;</span>&gt;</span>Remove Element<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">      <span class="comment">// åœ¨JSä¸­æŒæœ‰å¯¹DOMå…ƒç´ çš„å¼•ç”¨</span></span><br><span class="line">      <span class="keyword">let</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myElement&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç»™æŒ‰é’®ç»‘å®šäº‹ä»¶ç›‘å¬å™¨</span></span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;removeButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">// ä»DOMæ ‘ä¸­ç§»é™¤å…ƒç´ </span></span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(element);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// æ¸…é™¤å¯¹å…ƒç´ çš„å¼•ç”¨ï¼Œå…è®¸åƒåœ¾å›æ”¶</span></span><br><span class="line">          element = <span class="literal">null</span>;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2025/01/21/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/21/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87/" class="post-title-link" itemprop="url">ä½œç”¨åŸŸé“¾ä¸æ‰§è¡Œä¸Šä¸‹æ–‡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-01-21 17:33:26" itemprop="dateCreated datePublished" datetime="2025-01-21T17:33:26+08:00">2025-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-01-25 15:20:34" itemprop="dateModified" datetime="2025-01-25T15:20:34+08:00">2025-01-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"><a href="#1-ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾" class="headerlink" title="1. ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"></a>1. ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ"><a href="#1-1-ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ"></a>1.1 ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ</h2><p>â€‹	æ ¹æ®MDNçš„å®šä¹‰ï¼Œä½œç”¨åŸŸæ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆä¸‹é¢åœ¨è®²ï¼‰ï¼Œå€¼å’Œè¡¨è¾¾å¼åœ¨å…¶ä¸­â€œå¯è§â€æˆ–å¯è¢«è®¿é—®ã€‚å¦‚æœä¸€ä¸ªå˜é‡æˆ–è¡¨è¾¾å¼ä¸åœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸å¯ç”¨çš„ã€‚ä½œç”¨åŸŸä¹Ÿå¯ä»¥å †å æˆå±‚æ¬¡ç»“æ„ï¼Œå­ä½œç”¨åŸŸå¯ä»¥è®¿é—®çˆ¶ä½œç”¨åŸŸï¼Œåè¿‡æ¥åˆ™ä¸è¡Œã€‚</p>
<p>â€‹	ç®€å•æ¥è¯´ï¼Œ<strong>ä½œç”¨åŸŸå°±æ˜¯é™åˆ¶ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­çš„ä½¿ç”¨èŒƒå›´</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯éš”ç¦»å˜é‡ï¼Œä¸è®©å˜é‡æ³„éœ²å‡ºå»ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p>
<hr>
<h2 id="1-2-jsä¸­çš„ä½œç”¨åŸŸæ¨¡å‹"><a href="#1-2-jsä¸­çš„ä½œç”¨åŸŸæ¨¡å‹" class="headerlink" title="1.2 jsä¸­çš„ä½œç”¨åŸŸæ¨¡å‹"></a>1.2 jsä¸­çš„ä½œç”¨åŸŸæ¨¡å‹</h2><p>â€‹	åœ¨jsä¸­ï¼Œé‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼ˆåœ¨ä¹¦é‡Œçœ‹åˆ°è¿™ä¸ªè¯æ„Ÿè§‰å¾ˆé«˜æ·±å•Šï¼‰ï¼Œä¹Ÿç§°ä¸ºé™æ€ä½œç”¨åŸŸã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªåŠ¨æ€ä½œç”¨åŸŸã€‚</p>
<p>è¯æ³•ä½œç”¨åŸŸï¼šå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°è¢«å®šä¹‰æ˜¯å°±å†³å®šäº†</p>
<p>åŠ¨æ€ä½œç”¨åŸŸï¼šå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰å†³å®šçš„</p>
<p>å¾ˆå¥½ç†è§£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="number">1</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">const</span> value = <span class="number">2</span></span><br><span class="line">       <span class="title function_">f1</span>()</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f2</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	æ ¹æ®ä¸Šé¢çš„å®šä¹‰ï¼Œå¦‚æœæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œæ‰“å°çš„ç»“æœå°±æ˜¯1ï¼›å¦‚æœæ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œæ‰“å°çš„ç»“æœå°±æ˜¯2.</p>
<hr>
<h2 id="1-3-ä½œç”¨åŸŸçš„åˆ†ç±»"><a href="#1-3-ä½œç”¨åŸŸçš„åˆ†ç±»" class="headerlink" title="1.3 ä½œç”¨åŸŸçš„åˆ†ç±»"></a>1.3 ä½œç”¨åŸŸçš„åˆ†ç±»</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œjsä¸­ä½œç”¨åŸŸåˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>å…¨å±€ä½œç”¨åŸŸ: åœ¨å‡½æ•°å¤–éƒ¨å£°æ˜çš„å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è¢«è®¿é—®ã€‚</li>
<li>å‡½æ•°ä½œç”¨åŸŸ: åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡åªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨è¢«è®¿é—®ï¼Œè¿™äº›å˜é‡å¯¹äºå‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„ã€‚</li>
<li>å—çº§ä½œç”¨åŸŸ: ç”±letå’Œconstå£°æ˜çš„å˜é‡åœ¨å®ƒä»¬æ‰€åœ¨çš„ä»£ç å—ï¼ˆä¾‹å¦‚ifè¯­å¥æˆ–forå¾ªç¯ï¼‰å†…æœ‰æ•ˆï¼Œè€Œåœ¨ä»£ç å—å¤–éƒ¨åˆ™æ— æ³•è®¿é—®ã€‚</li>
</ul>
<p>â€‹	å‰ä¸¤ç§ä½œç”¨åŸŸå¾ˆå¥½ç†è§£ï¼Œç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œè¿™é‡Œç¬”è€…å°±ä¸å†é˜é‡Šã€‚ä¸è¿‡å…³äºå—çº§ä½œç”¨åŸŸåœ¨ä¹¦é‡Œåˆ™æœ‰ä¸€äº›æœ‰æ„æ€çš„ç‚¹ï¼šé™¤äº†ä¸Šé¢çš„letå’Œconstï¼Œjsè¿˜æœ‰å…¶ä»–ä¸å—çº§ä½œç”¨åŸŸç›¸å…³çš„åŠŸèƒ½ã€‚</p>
<h3 id="1-3-1-with"><a href="#1-3-1-with" class="headerlink" title="1.3.1 with"></a>1.3.1 with</h3><p>â€‹	è™½ç„¶withç°åœ¨å·²ç»å‡ ä¹ä¸è¢«æ”¯æŒï¼Œä¸è¿‡å®ƒç¡®å®æ˜¯å—çº§ä½œç”¨åŸŸçš„ä¸€ç§å½¢å¼ï¼Œç”¨withä»å¯¹è±¡ä¸­åˆ›å»ºå‡ºçš„ä½œç”¨åŸŸä»…åœ¨withå£°æ˜ä¸­è€Œéå¤–éƒ¨ä½œç”¨åŸŸä¸­æœ‰æ•ˆ</p>
<h3 id="1-3-2-try-catch"><a href="#1-3-2-try-catch" class="headerlink" title="1.3.2 try&#x2F;catch"></a>1.3.2 try&#x2F;catch</h3><p>â€‹	try&#x2F;catchçš„åˆ†å¥ä¼šåˆ›å»ºä¸€ä¸ªå—çº§ä½œç”¨åŸŸï¼Œå…¶ä¸­å£°æ˜çš„å˜é‡ä»…åœ¨catchä¸­æœ‰æ•ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;<span class="keyword">throw</span> <span class="number">2</span>;&#125;<span class="keyword">catch</span>(a)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">//2</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä½œç”¨åŸŸé“¾"><a href="#1-4-ä½œç”¨åŸŸé“¾" class="headerlink" title="1.4 ä½œç”¨åŸŸé“¾"></a>1.4 ä½œç”¨åŸŸé“¾</h2><p>â€‹	ç®€å•æ¥è¯´ï¼Œç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾è¡¨å°±å«ä½œç”¨åŸŸé“¾ã€‚ä½œç”¨åŸŸé“¾ä¸»è¦æ˜¯è¿›è¡Œæ ‡è¯†ç¬¦ï¼ˆåœ¨jsä¸­æ‰€æœ‰æˆ‘ä»¬å¯ä»¥è‡ªä¸»å‘½åçš„éƒ½å¯ä»¥ç§°ä¹‹ä¸º æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚å˜é‡åå’Œå‡½æ•°åï¼‰çš„æŸ¥è¯¢ï¼Œæ ‡è¯†ç¬¦è§£æå°±æ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§çš„æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ï¼Œè€Œä½œç”¨åŸŸé“¾å°±æ˜¯ä¿è¯å¯¹å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚</p>
<p>åœ¨æŸ¥æ‰¾ä¸€ä¸ªå˜é‡æ—¶ï¼Œé€šå¸¸ä¼šè¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li><p>ä»å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾</p>
</li>
<li><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä»çˆ¶çº§æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾</p>
</li>
<li><p>å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¸€ç›´æ‰¾ç›´åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ï¼Œè¿™å°±åˆ°äº†ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> b = a;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// è¾“å‡º 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// æŠ¥é”™ï¼šb is not defined</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå˜é‡båœ¨å‡½æ•°fooå†…éƒ¨å£°æ˜ï¼Œå®ƒçš„ä½œç”¨åŸŸé“¾åŒ…æ‹¬å‡½æ•°fooå’Œå…¨å±€ä½œç”¨åŸŸã€‚ç”±äºbåœ¨å‡½æ•°fooå†…éƒ¨æ‰¾ä¸åˆ°å®šä¹‰ï¼Œæ‰€ä»¥ä¼šå‘å…¨å±€ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œæ‰¾åˆ°å˜é‡aï¼Œå› æ­¤bçš„å€¼ä¸º1ã€‚</p>
</li>
</ul>
<h2 id="1-5ä½œç”¨åŸŸåµŒå¥—"><a href="#1-5ä½œç”¨åŸŸåµŒå¥—" class="headerlink" title="1.5ä½œç”¨åŸŸåµŒå¥—"></a>1.5ä½œç”¨åŸŸåµŒå¥—</h2><p>â€‹	å°±åƒå‡½æ•°å¯ä»¥åµŒå¥—ä¸€æ ·ï¼Œä½œç”¨åŸŸä¹Ÿå¯ä»¥å¤šä¸ªåµŒå¥—ï¼Œè€Œä½œç”¨åŸŸåµŒå¥—éµå¾ªä»¥ä¸‹çš„è§„åˆ™ï¼š</p>
<ul>
<li>å†…éƒ¨ä½œç”¨åŸŸèƒ½å¤Ÿè®¿é—®å¤–éƒ¨ä½œç”¨åŸŸã€‚</li>
<li>å¤–éƒ¨ä½œç”¨åŸŸæ— æ³•è®¿é—®å†…éƒ¨ä½œç”¨åŸŸã€‚</li>
<li>å…„å¼Ÿä½œç”¨åŸŸä¸å¯äº’ç›¸è®¿é—®ã€‚</li>
</ul>
<h1 id="2-æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#2-æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="2 æ‰§è¡Œä¸Šä¸‹æ–‡"></a>2 æ‰§è¡Œä¸Šä¸‹æ–‡</h1><h2 id="2-1-ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#2-1-ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡"></a>2.1 ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>â€‹	ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿå½“ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè¢«ç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„å†…éƒ¨å¯¹è±¡ï¼Œè¿™å°±åƒä¸€ä»½è®°å½•ï¼Œè®°å½•äº†å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼Œä¼ å…¥çš„å‚æ•°ç­‰ä¿¡æ¯ï¼Œä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶çš„ç¯å¢ƒã€‚ç®€å•æ¥è¯´ï¼Œåªè¦æœ‰jsä»£ç è¿è¡Œï¼Œé‚£ä¹ˆå®ƒå°±ä¸€å®šæ˜¯è¿è¡Œåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<p>åœ¨jsä¸­ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šåªå­˜åœ¨ä¸€ä¸ªï¼Œä»»ä½•ä¸åœ¨å‡½æ•°å†…éƒ¨çš„ä»£ç éƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ã€‚å®ƒä¼šæ‰§è¡Œä¸¤ä»¶äº‹ï¼šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„ <code>window</code>å¯¹è±¡ï¼ˆæµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼‰ï¼Œå¹¶ä¸”è®¾ç½® <code>this</code> çš„å€¼ç­‰äºè¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šå¯ä»¥å­˜åœ¨æ— æ•°ä¸ªï¼Œå½“å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰ä¼šè¢«åˆ›å»ºï¼Œä¸”æ¯æ¬¡å‡½æ•°è¢«è°ƒç”¨æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒä¼šæŒ‰å®šä¹‰çš„é¡ºåºï¼ˆåé¢å†è¯´ï¼‰æ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ã€‚</li>
<li>Evalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šæŒ‡åœ¨evalå‡½æ•°ä¸­è¿è¡Œçš„ä»£ç ï¼Œä¸è¿‡ä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªè¿™ä¸ªå‡½æ•°ï¼Œæ•…ä¸ä½œè®¨è®ºã€‚</li>
</ul>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š<strong>åˆ›å»ºé˜¶æ®µâ†’æ‰§è¡Œé˜¶æ®µâ†’å›æ”¶é˜¶æ®µ</strong>ï¼Œç¬”è€…è¿™é‡Œé‡ç‚¹ä»‹ç»åˆ›å»ºé˜¶æ®µã€‚</p>
<p><strong>ï¼ˆ1ï¼‰åˆ›å»ºé˜¶æ®µ</strong> </p>
<p>åœ¨ <code>JavaScript</code> ä»£ç æ‰§è¡Œå‰ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡å°†ç»å†åˆ›å»ºé˜¶æ®µã€‚åœ¨åˆ›å»ºé˜¶æ®µä¼šå‘ç”Ÿä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>åˆ›å»º<strong>è¯æ³•ç¯å¢ƒ</strong>ç»„ä»¶ï¼ˆåé¢å†è¯´ï¼‰</li>
<li>åˆ›å»º<strong>å˜é‡ç¯å¢ƒ</strong>ç»„ä»¶ ï¼ˆåé¢å†è¯´ï¼‰</li>
<li>thisç»‘å®š</li>
</ol>
<p><strong>ï¼ˆ2ï¼‰æ‰§è¡Œé˜¶æ®µ</strong></p>
<p>æ‰§è¡Œå˜é‡èµ‹å€¼ã€ä»£ç æ‰§è¡Œ</p>
<p><strong>ï¼ˆ3ï¼‰å›æ”¶é˜¶æ®µ</strong></p>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡å‡ºæ ˆç­‰å¾…è¢«å›æ”¶</p>
<h2 id="2-2-æ‰§è¡Œæ ˆ"><a href="#2-2-æ‰§è¡Œæ ˆ" class="headerlink" title="2.2 æ‰§è¡Œæ ˆ"></a>2.2 æ‰§è¡Œæ ˆ</h2><p>â€‹	æ‰§è¡Œæ ˆï¼Œåˆç§°ä¸ºè°ƒç”¨æ ˆï¼Œç”¨äºå­˜å‚¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéµå¾ªåè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚</p>
<p>â€‹	å½“ Js å¼•æ“ç¬¬ä¸€æ¬¡é‡åˆ°æˆ‘ä»¬å†™çš„ä»£ç æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ª<strong>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</strong>å¹¶ä¸”å‹å…¥å½“å‰æ‰§è¡Œæ ˆã€‚æ¯å½“å¼•æ“é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå®ƒä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ª<strong>æ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹</strong>æ–‡å¹¶å‹å…¥æ ˆçš„é¡¶éƒ¨ã€‚</p>
<p>â€‹	å¼•æ“ä¼šä¼˜å…ˆæ‰§è¡Œé‚£äº›æ‰§è¡Œä¸Šä¸‹æ–‡ä½äºæ ˆé¡¶çš„å‡½æ•°ã€‚å½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å½“å‰æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚</p>
<h2 id="2-3-å¦‚ä½•ç®¡ç†æ‰§è¡Œæ ˆ"><a href="#2-3-å¦‚ä½•ç®¡ç†æ‰§è¡Œæ ˆ" class="headerlink" title="2.3 å¦‚ä½•ç®¡ç†æ‰§è¡Œæ ˆ"></a>2.3 å¦‚ä½•ç®¡ç†æ‰§è¡Œæ ˆ</h2><p>â€‹	ä¸ºäº†è§£é‡Šæ‰§è¡Œä¸Šä¸‹æ–‡çš„è¡Œä¸ºï¼Œå¯ä»¥å°†å…¶ä»¥ä»£ç çš„å½¢å¼é˜è¿°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Stack</span> = [] <span class="comment">//å‡è®¾è¿™æ˜¯æ‰§è¡Œæ ˆï¼Œæ‰§è¡Œæ ˆä¼šå…ˆå‹å…¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</span></span><br><span class="line">   <span class="title class_">Stack</span>.<span class="title function_">push</span>(<span class="string">&#x27;å…¨å±€ä½œç”¨åŸŸ&#x27;</span>)</span><br><span class="line">   </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å…¨å±€ä½œç”¨åŸŸ&#x27;</span>)<span class="comment">//åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œjsä¼šå…ˆæ‰§è¡Œå…¨å±€ä»£ç ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨								 </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="title function_">f2</span>()</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‡½æ•°ä½œç”¨åŸŸ&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">f1</span>()<span class="comment">//è¿™é‡Œé‡åˆ°å‡½æ•°è°ƒç”¨f1(),å®ƒæ˜¯åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨ï¼Œå› æ­¤åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸Šæ–¹ä¸ºf1åŠ ä¸Šä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="title class_">Stack</span>.<span class="title function_">push</span>(f1)</span><br><span class="line">	<span class="comment">//åœ¨f1ä¸­åˆè°ƒç”¨äº†f2ï¼Œå› æ­¤åœ¨f1çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸Šæ–¹ä¸ºf2åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="title class_">Stack</span>.<span class="title function_">push</span>(f2)</span><br><span class="line"></span><br><span class="line"><span class="comment">//éµå¾ªåè¿›å…ˆå‡ºï¼Œå…ˆæ‰§è¡Œé¡¶ç«¯çš„f2</span></span><br><span class="line"><span class="title class_">Stack</span>.<span class="title function_">pop</span>()<span class="comment">//f2æ‰§è¡Œå®Œæ¯•ï¼Œå°†å…¶ç§»é™¤</span></span><br><span class="line"><span class="title class_">Stack</span>.<span class="title function_">pop</span>()<span class="comment">//f1æ‰§è¡Œå®Œæ¯•ï¼Œå°†å…¶ç§»é™¤</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	å½“ä¸Šè¿°ä»£ç åœ¨æµè§ˆå™¨åŠ è½½æ—¶ï¼Œjs å¼•æ“åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆã€‚å½“é‡åˆ° f1ï¼ˆï¼‰å‡½æ•°è°ƒç”¨æ—¶ï¼Œjs å¼•æ“ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚</p>
<p>â€‹	å½“ä» <code>f1()</code> å‡½æ•°å†…éƒ¨è°ƒç”¨ <code>f2()</code> å‡½æ•°æ—¶ï¼Œjs å¼•æ“ä¸º <code>f2()</code> å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚å½“ <code>f2()</code> å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»å½“å‰æ ˆå¼¹å‡ºï¼Œå¹¶ä¸”æ§åˆ¶æµç¨‹åˆ°è¾¾ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå³ <code>f1()</code> å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<p>â€‹	å½“ <code>f1()</code> æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆå¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸€æ—¦æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•ï¼ŒJavaScript å¼•æ“ä»å½“å‰æ ˆä¸­ç§»é™¤å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<hr>
<h2 id="2-4-åˆå§‹é˜¶æ®µ"><a href="#2-4-åˆå§‹é˜¶æ®µ" class="headerlink" title="2.4 åˆå§‹é˜¶æ®µ"></a>2.4 åˆå§‹é˜¶æ®µ</h2><h3 id="2-4-1-è¯æ³•ç¯å¢ƒ"><a href="#2-4-1-è¯æ³•ç¯å¢ƒ" class="headerlink" title="2.4.1 è¯æ³•ç¯å¢ƒ"></a>2.4.1 è¯æ³•ç¯å¢ƒ</h3><p>â€‹	æ ¹æ®GPTæ‰€è¨€ï¼Œ<strong>è¯æ³•ç¯å¢ƒ</strong> æ˜¯ JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨æ¥ç®¡ç† <code>let</code>ã€<code>const</code> å£°æ˜çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚å®ƒæ˜¯åŸºäºä»£ç ä¸­çš„<strong>è¯æ³•ä½œç”¨åŸŸ</strong>æ¥å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡çš„å¯è®¿é—®æ€§æ˜¯ç”±å®ƒä»¬åœ¨ä»£ç ä¸­çš„<strong>ä¹¦å†™ä½ç½®</strong>å†³å®šçš„ã€‚</p>
<p>â€‹	åœ¨è¯æ³•ç¯å¢ƒçš„<strong>å†…éƒ¨</strong>æœ‰ä¸¤ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><p><strong>ç¯å¢ƒè®°å½•å™¨</strong>ï¼šæ˜¯å­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½®ã€‚</p>
</li>
<li><p><strong>å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨</strong>ï¼šæ„å‘³ç€å®ƒå¯ä»¥è®¿é—®å…¶çˆ¶çº§è¯æ³•ç¯å¢ƒã€‚</p>
</li>
</ul>
<p>â€‹	<strong>è¯æ³•ç¯å¢ƒ</strong>æœ‰ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>å…¨å±€ç¯å¢ƒ</strong>ï¼ˆåœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼‰æ˜¯æ²¡æœ‰å¤–éƒ¨ç¯å¢ƒå¼•ç”¨çš„è¯æ³•ç¯å¢ƒã€‚å…¨å±€ç¯å¢ƒçš„å¤–éƒ¨ç¯å¢ƒå¼•ç”¨æ˜¯ <strong>null</strong>ã€‚å®ƒæ‹¥æœ‰å†…å»ºçš„ <code>Object/Array</code>ç­‰ã€åœ¨ç¯å¢ƒè®°å½•å™¨å†…çš„åŸå‹å‡½æ•°ï¼ˆå…³è”å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚ <code>window</code> å¯¹è±¡ï¼‰è¿˜æœ‰ä»»ä½•ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œå¹¶ä¸” <code>this</code>çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</li>
<li>åœ¨<strong>å‡½æ•°ç¯å¢ƒ</strong>ä¸­ï¼Œå‡½æ•°å†…éƒ¨ç”¨æˆ·å®šä¹‰çš„å˜é‡å­˜å‚¨åœ¨<strong>ç¯å¢ƒè®°å½•å™¨</strong>ä¸­ã€‚å¹¶ä¸”å¼•ç”¨çš„å¤–éƒ¨ç¯å¢ƒå¯èƒ½æ˜¯å…¨å±€ç¯å¢ƒï¼Œæˆ–è€…ä»»ä½•åŒ…å«æ­¤å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°ã€‚</li>
</ul>
<h3 id="2-4-2-å˜é‡ç¯å¢ƒ"><a href="#2-4-2-å˜é‡ç¯å¢ƒ" class="headerlink" title="2.4.2 å˜é‡ç¯å¢ƒ"></a>2.4.2 å˜é‡ç¯å¢ƒ</h3><p>â€‹	å˜é‡ç¯å¢ƒåŒæ ·æ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå…¶ç¯å¢ƒè®°å½•å™¨æŒæœ‰<strong>å˜é‡å£°æ˜è¯­å¥</strong>åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„ç»‘å®šå…³ç³»ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œæ‰€ä»¥å®ƒæœ‰ç€ä¸Šé¢å®šä¹‰çš„è¯æ³•ç¯å¢ƒçš„æ‰€æœ‰å±æ€§ã€‚</p>
<p>â€‹	åœ¨ ES6 ä¸­ï¼Œ<strong>è¯æ³•ç¯å¢ƒ</strong>ç»„ä»¶å’Œ<strong>å˜é‡ç¯å¢ƒ</strong>ç»„ä»¶çš„ä¸€ä¸ªä¸åŒå°±æ˜¯å‰è€…è¢«ç”¨æ¥å­˜å‚¨<strong>å‡½æ•°å£°æ˜</strong>å’Œå˜é‡ï¼ˆ<code>let</code> å’Œ <code>const</code>ï¼‰ç»‘å®šï¼Œè€Œåè€…åªç”¨æ¥å­˜å‚¨ <code>var</code> å˜é‡ç»‘å®šã€‚</p>
<h3 id="2-4-3-thisç»‘å®š"><a href="#2-4-3-thisç»‘å®š" class="headerlink" title="2.4.3 thisç»‘å®š"></a>2.4.3 thisç»‘å®š</h3><p>â€‹	åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code> çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚(åœ¨æµè§ˆå™¨ä¸­ï¼Œ<code>this</code>å¼•ç”¨ <code>Window</code> å¯¹è±¡)ã€‚ åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>this</code> çš„å€¼å–å†³äºè¯¥å‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚å¦‚æœå®ƒè¢«ä¸€ä¸ªå¼•ç”¨å¯¹è±¡è°ƒç”¨ï¼Œé‚£ä¹ˆ <code>this</code> ä¼šè¢«è®¾ç½®æˆé‚£ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ <code>this</code> çš„å€¼è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡æˆ–è€… <code>undefined</code>ï¼ˆåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ã€‚</p>
<hr>
<h2 id="ç¨‹åºæ‰§è¡Œå…¨è¿‡ç¨‹"><a href="#ç¨‹åºæ‰§è¡Œå…¨è¿‡ç¨‹" class="headerlink" title="ç¨‹åºæ‰§è¡Œå…¨è¿‡ç¨‹"></a>ç¨‹åºæ‰§è¡Œå…¨è¿‡ç¨‹</h2><p>â€‹	ç¨‹åºå¯åŠ¨ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼Œå‹å…¥æ‰§è¡Œæ ˆ</p>
<ol>
<li>åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡çš„ <strong>è¯æ³•ç¯å¢ƒ</strong><ol>
<li>åˆ›å»º <strong>å¯¹è±¡ç¯å¢ƒè®°å½•å™¨</strong> ï¼Œå®ƒç”¨æ¥å®šä¹‰å‡ºç°åœ¨ <strong>å…¨å±€ä¸Šä¸‹æ–‡</strong> ä¸­çš„å˜é‡å’Œå‡½æ•°çš„å…³ç³»ï¼ˆè´Ÿè´£å¤„ç† <code>let</code> å’Œ <code>const</code> å®šä¹‰çš„å˜é‡ï¼‰</li>
<li>åˆ›å»º <strong>å¤–éƒ¨ç¯å¢ƒå¼•ç”¨</strong>ï¼Œå€¼ä¸º <strong><code>null</code></strong></li>
</ol>
</li>
<li>åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡çš„ <strong>å˜é‡ç¯å¢ƒ</strong><ol>
<li>åˆ›å»º <strong>å¯¹è±¡ç¯å¢ƒè®°å½•å™¨</strong>ï¼Œå®ƒæŒæœ‰ <strong>å˜é‡å£°æ˜è¯­å¥</strong> åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„ç»‘å®šå…³ç³»ï¼ˆè´Ÿè´£å¤„ç† <code>var</code> å®šä¹‰çš„å˜é‡ï¼Œåˆå§‹å€¼ä¸º <code>undefined</code> é€ æˆå£°æ˜æå‡ï¼‰</li>
<li>åˆ›å»º <strong>å¤–éƒ¨ç¯å¢ƒå¼•ç”¨</strong>ï¼Œå€¼ä¸º <strong><code>null</code></strong></li>
</ol>
</li>
<li>ç¡®å®š <code>this</code> å€¼ä¸ºå…¨å±€å¯¹è±¡ï¼ˆä»¥æµè§ˆå™¨ä¸ºä¾‹ï¼Œå°±æ˜¯ <code>window</code> ï¼‰</li>
</ol>
<p>å‡½æ•°è¢«è°ƒç”¨ï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼Œå‹å…¥æ‰§è¡Œæ ˆ</p>
<ol>
<li>åˆ›å»ºå‡½æ•°ä¸Šä¸‹æ–‡çš„ <strong>è¯æ³•ç¯å¢ƒ</strong><ol>
<li>åˆ›å»º <strong>å£°æ˜å¼ç¯å¢ƒè®°å½•å™¨</strong> ï¼Œå­˜å‚¨å˜é‡ã€å‡½æ•°å’Œå‚æ•°ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªä¼ é€’ç»™å‡½æ•°çš„ <strong><code>arguments</code></strong> å¯¹è±¡ï¼ˆæ­¤å¯¹è±¡å­˜å‚¨ç´¢å¼•å’Œå‚æ•°çš„æ˜ å°„ï¼‰å’Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°çš„ <strong>length</strong>ã€‚ï¼ˆè´Ÿè´£å¤„ç† <code>let</code> å’Œ <code>const</code> å®šä¹‰çš„å˜é‡ï¼‰</li>
<li>åˆ›å»º <strong>å¤–éƒ¨ç¯å¢ƒå¼•ç”¨</strong>ï¼Œå€¼ä¸ºå…¨å±€å¯¹è±¡ï¼Œæˆ–è€…ä¸ºçˆ¶çº§è¯æ³•ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰</li>
</ol>
</li>
<li>åˆ›å»ºå‡½æ•°ä¸Šä¸‹æ–‡çš„ <strong>å˜é‡ç¯å¢ƒ</strong><ol>
<li>åˆ›å»º <strong>å£°æ˜å¼ç¯å¢ƒè®°å½•å™¨</strong> ï¼Œå­˜å‚¨å˜é‡ã€å‡½æ•°å’Œå‚æ•°ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªä¼ é€’ç»™å‡½æ•°çš„ <strong><code>arguments</code></strong> å¯¹è±¡ï¼ˆæ­¤å¯¹è±¡å­˜å‚¨ç´¢å¼•å’Œå‚æ•°çš„æ˜ å°„ï¼‰å’Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°çš„ <strong>length</strong>ã€‚ï¼ˆè´Ÿè´£å¤„ç† <code>var</code> å®šä¹‰çš„å˜é‡ï¼Œåˆå§‹å€¼ä¸º <code>undefined</code> é€ æˆå£°æ˜æå‡ï¼‰</li>
<li>åˆ›å»º <strong>å¤–éƒ¨ç¯å¢ƒå¼•ç”¨</strong>ï¼Œå€¼ä¸ºå…¨å±€å¯¹è±¡ï¼Œæˆ–è€…ä¸ºçˆ¶çº§è¯æ³•ç¯å¢ƒï¼ˆä½œç”¨åŸŸï¼‰</li>
</ol>
</li>
<li>ç¡®å®š <code>this</code> å€¼</li>
</ol>
<p>è¿›å…¥å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰§è¡Œé˜¶æ®µï¼š</p>
<p>â€‹	åœ¨ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ&#x2F;è§£é‡Šå‡½æ•°ä»£ç ï¼Œå¹¶åœ¨ä»£ç é€è¡Œæ‰§è¡Œæ—¶åˆ†é…å˜é‡å€¼ã€‚</p>
<p>è¿›å…¥å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„å›æ”¶é˜¶æ®µï¼š</p>
<p>â€‹	å°†ä¸Šä¸‹æ–‡ç§»å‡ºæ‰§è¡Œæ ˆï¼Œç­‰å¾…å›æ”¶ã€‚</p>
<p>é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç§»å‡ºæ‰§è¡Œæ ˆã€‚</p>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>â€‹	jsè§£é‡Šé˜¶æ®µä¾¿ä¼šç¡®å®šä½œç”¨åŸŸè§„åˆ™ï¼Œå› æ­¤<strong>ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰æ—¶å°±å·²ç»ç¡®å®šäº†</strong>ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶ç¡®å®šï¼Œä½†æ˜¯<strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å‡½æ•°æ‰§è¡Œä¹‹å‰åˆ›å»ºçš„</strong>ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æœ€æ˜æ˜¾çš„å°±æ˜¯thisçš„æŒ‡å‘æ˜¯æ‰§è¡Œæ—¶ç¡®å®šçš„ã€‚è€Œä½œç”¨åŸŸè®¿é—®çš„å˜é‡æ˜¯ç¼–å†™ä»£ç çš„ç»“æ„ç¡®å®šçš„ã€‚</p>
<p>â€‹	ä½œç”¨åŸŸå’Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¹‹é—´æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼š <strong>æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œéšæ—¶å¯èƒ½æ”¹å˜ï¼›ä½œç”¨åŸŸåœ¨å®šä¹‰æ—¶å°±ç¡®å®šï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜</strong>ã€‚</p>
<p>â€‹	ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯èƒ½åŒ…å«è‹¥å¹²ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒã€‚æœ‰å¯èƒ½ä»æ¥æ²¡æœ‰è¿‡ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°ä»æ¥å°±æ²¡æœ‰è¢«è°ƒç”¨è¿‡ï¼‰ï¼›æœ‰å¯èƒ½æœ‰è¿‡ï¼Œç°åœ¨å‡½æ•°è¢«è°ƒç”¨å®Œæ¯•åï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒè¢«é”€æ¯äº†ï¼›æœ‰å¯èƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªé—­åŒ…ï¼ˆæ„Ÿè§‰ä¸‹æ¬¡å¯ä»¥è®²ä¸€ä¸‹ï¼Œå¦‚æœæ²¡äººè®²çš„è¯ï¼‰ã€‚<strong>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹ï¼Œä¸åŒçš„è°ƒç”¨ä¼šäº§ç”Ÿä¸åŒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç»§è€Œäº§ç”Ÿä¸åŒçš„å˜é‡çš„å€¼</strong>ã€‚</p>
<p>æœ€åï¼Œç®€è¦æ¦‚å†µä¸€ä¸‹<code>ä½œç”¨åŸŸ</code>ï¼Œ<code>è¯æ³•ç¯å¢ƒ</code>ï¼Œ<code>æ‰§è¡Œä¸Šä¸‹æ–‡</code>è¿™ä¸‰è€…çš„æ¦‚å¿µï¼š</p>
<ul>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šä½œç”¨åŸŸå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŒºåŸŸï¼Œå®ƒå¯ä»¥è®©å˜é‡ä¸ä¼šå‘å¤–æš´éœ²å‡ºå»ã€‚ä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯éš”ç¦»å˜é‡ã€‚å†…å±‚ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–å±‚ä½œç”¨åŸŸã€‚ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯èƒ½åŒ…å«è‹¥å¹²ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>è¯æ³•ç¯å¢ƒ</strong>ï¼šæŒ‡ç›¸åº”ä»£ç å—å†…æ ‡è¯†ç¬¦ä¸å˜é‡å€¼ã€å‡½æ•°å€¼ä¹‹é—´çš„å…³è”å…³ç³»çš„ä¸€ç§ä½“ç°ã€‚è¯æ³•ç¯å¢ƒå†…éƒ¨åŒ…å«ç¯å¢ƒè®°å½•å™¨å’Œå¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ã€‚ç¯å¢ƒè®°å½•å™¨æ˜¯å­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½®ï¼Œå¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨æ„å‘³ç€å¯ä»¥è®¿é—®çˆ¶çº§è¯æ³•ç¯å¢ƒã€‚</li>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼šJavaScriptä»£ç è¿è¡Œçš„ç¯å¢ƒã€‚åˆ†ä¸ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å’Œevalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆå‰ä¸¤ä¸ªè¾ƒå¸¸è§ï¼‰ã€‚åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šè¿›è¡Œthisç»‘å®šã€åˆ›å»ºè¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒã€‚</li>
</ul>
<hr>
<p>â€‹	åœ¨ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ä¸­ï¼Œæœ‰ä¸¤æ®µæœ‰äº›æ„æ€çš„ä»£ç ï¼Œæ‹¿æ¥åˆ†äº«ä¸€ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">var</span> scope = <span class="string">&quot;global scope&quot;</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">checkscope</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">var</span> scope = <span class="string">&quot;local scope&quot;</span></span><br><span class="line">		<span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> scope</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">f</span>()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">checkscope</span>()</span><br><span class="line">(è¿™æ˜¯åˆ†å‰²çº¿)-------------------------------------------------------------------------------</span><br><span class="line">	<span class="keyword">var</span> scope = <span class="string">&quot;global scope&quot;</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">checkscope</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> scope = <span class="string">&quot;local scope&quot;</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> scope</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="keyword">return</span> f</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="title function_">checkscope</span>()()</span><br><span class="line">  </span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸¤æ®µä»£ç è¿”å›çš„ç»“æœéƒ½æ˜¯â€œlocal scopeâ€ï¼Œçœ‹ä¸Šå»å¥½åƒåŒºåˆ«ä¸å¤§ï¼Œä½†å†…éƒ¨ä»£ç åœ¨æ‰§è¡Œæ—¶ä¸€æ ·å—ï¼Ÿ</p>
<p>â€‹	äº‹å®ä¸Šï¼Œè¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">let</span> <span class="title class_">Stack</span> = [] <span class="comment">//è¿˜æ˜¯ç”¨è¿™ä¸ªæ¨¡æ‹Ÿä¸€ä¸‹æ‰§è¡Œæ ˆ</span></span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿç¬¬ä¸€æ®µä»£ç </span></span><br><span class="line">    <span class="title class_">Stack</span>.<span class="title function_">push</span>(checkscope)</span><br><span class="line">	<span class="title class_">Stack</span>.<span class="title function_">push</span>(f)</span><br><span class="line">	<span class="title class_">Stack</span>.<span class="title function_">pop</span>()</span><br><span class="line">	<span class="title class_">Stack</span>.<span class="title function_">pop</span>()</span><br><span class="line">(è¿™æ˜¯åˆ†å‰²çº¿)-------------------------------------------------------------------------------</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿç¬¬äºŒæ®µä»£ç </span></span><br><span class="line">    <span class="title class_">Stack</span>.<span class="title function_">push</span>(checkscope)</span><br><span class="line">	<span class="title class_">Stack</span>.<span class="title function_">pop</span>()</span><br><span class="line">	<span class="title class_">Stack</span>.<span class="title function_">push</span>(f)</span><br><span class="line">	<span class="title class_">Stack</span>,<span class="title function_">pop</span>()</span><br></pre></td></tr></table></figure>



<h1 id="3-é—­åŒ…"><a href="#3-é—­åŒ…" class="headerlink" title="3 é—­åŒ…"></a>3 é—­åŒ…</h1><p>æ–°å»ºæ–‡ä»¶å¤¹</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2024/12/16/react%20Hooks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/12/16/react%20Hooks/" class="post-title-link" itemprop="url">react Hooks</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-12-16 20:45:34" itemprop="dateCreated datePublished" datetime="2024-12-16T20:45:34+08:00">2024-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-17 16:55:39" itemprop="dateModified" datetime="2024-12-17T16:55:39+08:00">2024-12-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="react-hooks"><a href="#react-hooks" class="headerlink" title="react hooks"></a>react hooks</h1><h2 id="1-ä»€ä¹ˆæ˜¯Hooks"><a href="#1-ä»€ä¹ˆæ˜¯Hooks" class="headerlink" title="1.ä»€ä¹ˆæ˜¯Hooks"></a>1.ä»€ä¹ˆæ˜¯Hooks</h2><p>â€‹	Hookæ˜¯ä¸€äº›è®©ä½ åœ¨ä¸ä½¿ç”¨classçš„æƒ…å†µä¸‹ä½¿ç”¨stateä»¥åŠå…¶ä»–çš„reactç‰¹æ€§çš„å‡½æ•°ã€‚å®ƒå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€React stateç­‰ç‰¹æ€§ã€‚ä¸è¿‡ï¼ŒHookä¸èƒ½å†classä¸­ä½¿ç”¨â€“ä½ ä¹Ÿæ²¡å¿…è¦å†ä½¿ç”¨classã€‚</p>
<h2 id="2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Hooks"><a href="#2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Hooks" class="headerlink" title="2.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Hooks"></a>2.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Hooks</h2><ul>
<li>Hookå…è®¸ä½ åœ¨éclassçš„æƒ…å†µä¸‹ä½¿ç”¨æ›´å¤šçš„Reactç‰¹æ€§ã€‚</li>
<li>Hookä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚</li>
<li>Hookå°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ã€‚</li>
</ul>
<h2 id="3-ä¸€äº›å¸¸è§çš„å‡½æ•°"><a href="#3-ä¸€äº›å¸¸è§çš„å‡½æ•°" class="headerlink" title="3.ä¸€äº›å¸¸è§çš„å‡½æ•°"></a>3.ä¸€äº›å¸¸è§çš„å‡½æ•°</h2><h3 id="1-useState"><a href="#1-useState" class="headerlink" title="1.useState"></a>1.useState</h3><p>â€‹		åœ¨useState()ä¸­ï¼Œå®ƒæ¥å—çŠ¶æ€çš„åˆå§‹å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ•°ç»„çš„ç¬¬ä¸€é¡¹ä¸ºä¸€ä¸ªå˜é‡ï¼ŒæŒ‡å‘çŠ¶æ€çš„å½“å‰å€¼ï¼Œç±»ä¼¼äºthis.stateï¼›ç¬¬äºŒé¡¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ›´æ–°çŠ¶æ€ï¼Œç±»ä¼¼äºsetStateã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½ ä¸€å…±ç‚¹å‡»äº†&#123;count&#125;ä¸‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-useContext"><a href="#2-useContext" class="headerlink" title="2.useContext"></a>2.useContext</h3><p>â€‹		useContext()ç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­è®¢é˜…Reactçš„ä¸Šä¸‹æ–‡ã€‚å®ƒå…è®¸ä½ é€šè¿‡Context.Provideræä¾›çš„å…±äº«æ•°æ®ã€‚è¯´äººè¯ï¼ŒuseContextè®©ä½ èƒ½å¤Ÿåœ¨ç»„ä»¶æ ‘ä¸­ä»»ä½•ä½ç½®ç›´æ¥è·å–ä¸Šä¸‹æ–‡æ•°æ®ï¼Œè€Œä¸å¿…é€šè¿‡propsä¸€å±‚ä¸€å±‚ä¼ é€’ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Context</span> = <span class="title function_">createContext</span>(<span class="string">&#x27;false&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [answer,setAnswer] = <span class="title function_">useState</span>(<span class="string">&#x27;false&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">Context.Provider</span> <span class="attr">value</span>=<span class="string">&#123;answer&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setAnswer(true)&#125;&gt;ç‚¹æˆ‘å°±å¯¹äº†<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    			<span class="tag">&lt;<span class="name">Example</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;/<span class="name">Context.Provider</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> answer = <span class="title function_">useContext</span>(<span class="title class_">Context</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘å¯¹äº†å—ï¼Ÿ&#123;answer&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>é¦–å…ˆï¼Œä½ éœ€è¦ä½¿ç”¨createContextåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿™é‡Œåˆ›å»ºäº†Contextï¼Œå¹¶æä¾›äº†é»˜è®¤å€¼â€™falseâ€˜</p>
</li>
<li><p>Context.Provideråœ¨ç»„ä»¶æ ‘ä¸­æä¾›äº†answerçš„æ•°æ®ã€‚</p>
</li>
<li><p>Exampleç»„ä»¶é€šè¿‡useContextè®¢é˜…äº†Contextï¼Œå¹¶è®¿é—®å½“å‰çš„answerå€¼ã€‚</p>
</li>
</ul>
<p>å…¶ä¸­ï¼ŒContext.Provideræ˜¯ä¸Šä¸‹æ–‡ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒç”¨äºæä¾›æ•°æ®ç»™ç»„ä»¶æ ‘ä¸­çš„ä¸‹æ¸¸ç»„ä»¶ã€‚å®ƒæ¥å—ä¸€ä¸ªvalueå±æ€§ï¼Œæ‰€æœ‰åœ¨å…¶å†…éƒ¨çš„ç»„ä»¶éƒ½èƒ½è®¿é—®åˆ°è¿™ä¸ªvalueï¼Œå³ä½¿ä»–ä»¬ä¸æ˜¯ç›´æ¥çš„çˆ¶å­å…³ç³»ã€‚é¡ºå¸¦ä¸€æï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶å¤šæ¬¡è°ƒç”¨useContextæ¥è®¿é—®ä¸åŒçš„ä¸Šä¸‹å€¼ã€‚</p>
<h3 id="3-useEffect"><a href="#3-useEffect" class="headerlink" title="3.useEffect"></a>3.useEffect</h3><p>â€‹	useEffect()ç”¨äºå¤„ç†å‰¯ä½œç”¨æ“ä½œã€‚å‰¯ä½œç”¨æ˜¯æŒ‡ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå¯¹å¤–éƒ¨ç¯å¢ƒäº§ç”Ÿå½±å“çš„æ“ä½œï¼Œæ¯”å¦‚æ•°æ®è·å–ï¼Œè®¢é˜…äº‹ä»¶ï¼Œæ“ä½œDOMç­‰ã€‚</p>
<p>â€‹	å…¶ä¸­ï¼ŒuseEffectæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯ä¾èµ–æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span>&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">	<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“æ²¡æœ‰ä¾èµ–æ•°ç»„æ—¶ï¼ŒuseEffectä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æˆ–ç»„ä»¶æ›´æ–°æ—¶æ‰§è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span>&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">	<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">    &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ä¼ å…¥äº†ç©ºçš„ä¾èµ–æ•°ç»„æ—¶ï¼ŒuseEffectåªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span>&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">	<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">    &#125;,[count])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ä¾èµ–æ•°ç»„ä¸­çš„å€¼å­˜åœ¨æ—¶ï¼ŒuseEffectä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“å’Œä¾èµ–æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function Example()&#123;</span></span><br><span class="line"><span class="string">    useEffect(() =&gt; &#123;</span></span><br><span class="line"><span class="string">        const timer = setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="string">        console.log(&#x27;</span>wuhu<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    &#125;,1000);</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    return() =&gt;&#123;</span></span><br><span class="line"><span class="string">        clearInterval(timer)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">   &#125;,[])</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>useEffectå¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ï¼Œç”¨äºåœ¨å¸è½½ç»„ä»¶æ—¶æ¸…é™¤å‰¯ä½œç”¨æ“ä½œï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ï¼Œæ¸…é™¤å®šæ—¶å™¨ç­‰ã€‚</p>
<h3 id="4-useReducer"><a href="#4-useReducer" class="headerlink" title="4.useReducer"></a>4.useReducer</h3><p>â€‹	useReducerç›¸å½“äºæ˜¯useStateçš„è¿›é˜¶ç‰ˆã€‚ä»–æ¥å—ä¸€ä¸ªå½¢å¦‚ï¼ˆstateï¼Œactionï¼‰&#x3D;&gt; newStateçš„reducerï¼Œå¹¶è¿”å›å½“å‰çš„stateä»¥åŠé¢„æœŸèˆ¬é…çš„dispatchæ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state,dispatch] = <span class="title function_">useReducer</span>(reducer,initialArg,init);</span><br></pre></td></tr></table></figure>

<p>â€‹	useReduceræ¥å—ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>reducer</li>
<li>åˆå§‹åŒ–çš„stateã€‚å¦‚æœæ²¡æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™stateé»˜è®¤æ˜¯ä¼ å…¥çš„å€¼ï¼Œè¿”å›å€¼ä¸ºæœ€æ–°çš„stateå’Œdispatchå‡½æ•°ã€‚</li>
<li>å¯¹åˆå§‹å€¼stateè¿›è¡Œä¸€ä¸ªè®¡ç®—ï¼ˆå¯ä»¥æ²¡æœ‰ï¼‰</li>
</ul>
<p>â€‹	useReducerå’ŒuseStateå„æœ‰åƒç§‹ï¼Œä½†åœ¨stateé€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ªstateä¾èµ–äºä¹‹å‰çš„stateç­‰ï¼ŒuseReducerå›é¿useStateæ›´åŠ é€‚ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> =(<span class="params">state,action</span>) =&gt; &#123;</span><br><span class="line"> 	<span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line"> 		<span class="keyword">case</span><span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line"> 			<span class="keyword">return</span>&#123;<span class="attr">count</span>:state.<span class="property">count</span> + <span class="number">1</span>&#125;;</span><br><span class="line"> 		<span class="keyword">case</span><span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line"> 			<span class="keyword">return</span>&#123;<span class="attr">count</span>:state.<span class="property">count</span> - <span class="number">1</span>&#125;;</span><br><span class="line"> 		<span class="attr">default</span>:</span><br><span class="line"> 			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> [state,dispatch] = <span class="title function_">useReducer</span>(reducer,initialState);</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">			Count:&#123;state.count&#125;</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123;type:&#x27;increment&#x27;&#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123;type:&#x27;decrement&#x27;&#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="5-useRef"><a href="#5-useRef" class="headerlink" title="5.useRef"></a>5.useRef</h3><p>â€‹	useRef()ä¸»è¦ç”¨äºå¼•ç”¨DOMåŸé…¸æˆ–å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼ï¼Œè¿™ä¸ªå€¼åœ¨æ•´ä¸ªç»„ä»¶çš„å£°æ˜å‘¨æœŸä¿æŒä¸å˜ã€‚</p>
<ul>
<li>useRefè¿”å›ä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ï¼Œå…¶å†…éƒ¨åªæœ‰ä¸€ä¸ªcurrentå±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ã€‚</li>
<li>useRefè¿”å›çš„refå¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå­˜åœ¨ã€‚</li>
<li>æ›´æ–°currentçš„å€¼å¹¶ä¸ä¼šè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“ã€‚</li>
<li>useRefæ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›ä¸€ä¸ªrefå¯¹è±¡ã€‚</li>
</ul>
<h4 id="5-1å¼•ç”¨DOMå…ƒç´ "><a href="#5-1å¼•ç”¨DOMå…ƒç´ " class="headerlink" title="5.1å¼•ç”¨DOMå…ƒç´ "></a>5.1å¼•ç”¨DOMå…ƒç´ </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef,useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inputFocus</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        inputRef.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;,[])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>inputRefæ˜¯ä¸€ä¸ªrefå¯¹è±¡ï¼Œå®ƒçš„currentå±æ€§åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶è®¾ç½®ä¸ºnullï¼Œåœ¨ç»„ä»¶è¢«æŒ‚è½½æ—¶ï¼ŒinputRefer.currentæŒ‡å‘å®é™…çš„inputDOMå…ƒç´ ã€‚</p>
<h4 id="5-2å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼"><a href="#5-2å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼" class="headerlink" title="5.2å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼"></a>5.2å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å€¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRef,useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> renderCount = <span class="title function_">useRef</span>(<span class="number">0</span>)</span><br><span class="line">	<span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">const</span> <span class="title function_">increment</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">		<span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">		renderCount.<span class="property">current</span>++</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>Render Count: &#123;renderCount.current&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>renderCountæ˜¯ä¸€ä¸ªrefå¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨æ¸²æŸ“æ¬¡æ•°ã€‚æ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œincrementå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œcountå’ŒrenderCountçš„å€¼éƒ½ä¼šå¢åŠ ã€‚ä½†æ˜¯ï¼Œåªæœ‰countçŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ŒrenderCount.currentåˆ™ä¸ä¼šã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2024/11/29/%E7%BB%91%E5%AE%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/29/%E7%BB%91%E5%AE%9A/" class="post-title-link" itemprop="url">ç¡¬ç»‘å®šæ–¹æ³•</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-11-29 20:33:51" itemprop="dateCreated datePublished" datetime="2024-11-29T20:33:51+08:00">2024-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-01-25 14:17:35" itemprop="dateModified" datetime="2025-01-25T14:17:35+08:00">2025-01-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>â€‹	åœ¨JavaScriptä¸­ï¼Œthisçš„æŒ‡å‘åˆ†ä¸ºè½¯ç»‘å®šå’Œç¡¬ç»‘å®šã€‚å…¶ä¸­ï¼Œåœ¨å¯¹è±¡è°ƒç”¨å…¶å†…éƒ¨æ–¹æ³•æ—¶ï¼ŒthisæŒ‡å‘å®ƒçš„è°ƒç”¨è€…ï¼Œè¿™å°±æ˜¯è½¯ç»‘å®šï¼›è€Œç¡¬ç»‘å®šå°±éœ€è¦ç”¨åˆ°JavaScriptçš„å†…ç½®æ–¹æ³•call&#x2F;aplly&#x2F;bindäº†å®ç°äº†ã€‚</p>
<h1 id="1-call"><a href="#1-call" class="headerlink" title="1.call"></a>1.call</h1><p>â€‹	callï¼ˆï¼‰æ–¹æ³•ä¼šå°†thisæŒ‡å‘ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">who</span>(<span class="params"></span>)&#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="variable language_">this</span>.<span class="property">name</span>,<span class="variable language_">this</span>.<span class="property">dialogue</span>]);</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;</span><br><span class="line">         <span class="attr">name</span>:<span class="string">&#x27;ç»´å…‹æ‰˜&#x27;</span>,</span><br><span class="line">         <span class="attr">dialogue</span>:<span class="string">&#x27;åŠ å…¥å…‰è£çš„è¿›åŒ–å§&#x27;</span>,</span><br><span class="line">         <span class="attr">who</span>:who</span><br><span class="line">     &#125;</span><br><span class="line">            </span><br><span class="line">     obj.<span class="title function_">who</span>()</span><br><span class="line"><span class="comment">//Window</span></span><br><span class="line"><span class="comment">//[&#x27;ç»´å…‹æ‰˜&#x27;ï¼Œ&#x27;åŠ å…¥å…‰è£çš„è¿›åŒ–å§&#x27;]</span></span><br><span class="line"><span class="comment">//obj</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡thisæŒ‡å‘äº†Windowï¼Œè€Œç¬¬äºŒæ¬¡æŒ‡å‘äº†è°ƒç”¨å®ƒçš„objã€‚</p>
<p>â€‹	å¦‚æœæˆ‘ä»¬ç”¨callï¼ˆï¼‰æ–¹æ³•æ”¹å˜thisæŒ‡å‘åˆä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">function</span> <span class="title function_">who</span>(<span class="params">a</span>)&#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="variable language_">this</span>.<span class="property">name</span>,<span class="variable language_">this</span>.<span class="property">dialogue</span>]);</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;</span><br><span class="line">         <span class="attr">name</span>:<span class="string">&#x27;ç»´å…‹æ‰˜&#x27;</span>,</span><br><span class="line">         <span class="attr">dialogue</span>:<span class="string">&#x27;åŠ å…¥å…‰è£çš„è¿›åŒ–å§&#x27;</span>,</span><br><span class="line">         <span class="attr">who</span>:who</span><br><span class="line">     &#125;</span><br><span class="line">            </span><br><span class="line">     <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;æ°æ–¯&#x27;</span>,</span><br><span class="line">        <span class="attr">dialogue</span>:<span class="string">&#x27;ä¸ºäº†ç¾å¥½çš„æ˜å¤©è€Œæˆ˜&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     obj.<span class="property">who</span>.<span class="title function_">call</span>(obj2,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//[&#x27;æ°æ–¯&#x27;,&#x27;ä¸ºäº†å®ˆæŠ¤æ›´ç¾å¥½çš„æ˜å¤©è€Œæˆ˜&#x27;]</span></span><br><span class="line"><span class="comment">//obj2</span></span><br><span class="line"><span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<p>â€‹	ä¸éš¾çœ‹å‡ºï¼ŒthisæŒ‡å‘åˆå˜ä¸ºäº†obj2ã€‚å…¶ä¸­ï¼Œcallï¼ˆï¼‰ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯thisæŒ‡å‘çš„å¯¹è±¡ï¼Œåé¢çš„å‚æ•°åˆ™æ˜¯ä¼ ç»™whoï¼ˆï¼‰çš„ã€‚</p>
<h2 id="è‡ªå·±çš„callï¼ˆï¼‰æ–¹æ³•"><a href="#è‡ªå·±çš„callï¼ˆï¼‰æ–¹æ³•" class="headerlink" title="è‡ªå·±çš„callï¼ˆï¼‰æ–¹æ³•"></a>è‡ªå·±çš„callï¼ˆï¼‰æ–¹æ³•</h2><p>â€‹	æœ¬äººåé¢åˆåœ¨CSDNä¸Šçœ‹åˆ°äº†å…¶ä»–ä½œè€…å¯¹è‡ªå®šä¹‰callï¼ˆï¼‰æ–¹æ³•çš„ç†è§£ï¼Œè§‰å¾—å¾ˆä¸é”™ï¼Œå°±å½“è¡¥å……æ”¾ä¸Šæ¥äº†ğŸ˜‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">		 <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myCall</span> = <span class="keyword">function</span>(<span class="params">context,...args</span>)&#123;</span><br><span class="line">            context = context ? context : <span class="variable language_">window</span><span class="comment">//å¦‚æœcontextä¸ºnullï¼Œåˆ™thisæŒ‡å‘Window</span></span><br><span class="line">            context.<span class="property">fn</span> = <span class="variable language_">this</span><span class="comment">//å°†åŸå‡½æ•°ï¼ˆthisï¼‰èµ‹ç»™ context.fn</span></span><br><span class="line">            context.<span class="title function_">fn</span>(...args)<span class="comment">//è°ƒç”¨åŸå‡½æ•°ï¼Œå¹¶ä¼ é€’å‚æ•°ï¼Œthis ä¼šæŒ‡å‘ context</span></span><br><span class="line">            <span class="keyword">delete</span> context.<span class="property">fn</span><span class="comment">//é¿å…æµªè´¹å†…å­˜</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;iso&#x27;</span>ï¼Œ</span><br><span class="line">            <span class="attr">say</span>:<span class="string">&#x27;it is you and me&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;bluejoker&#x27;</span>,</span><br><span class="line">            <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        obj2.<span class="property">say</span>.<span class="title function_">myCall</span>(obj1,obj1.<span class="property">name</span>,obj1.<span class="property">say</span>)</span><br><span class="line"><span class="comment">//[&#x27;iso&#x27;ï¼Œ&#x27;it is you and me&#x27;]</span></span><br><span class="line"><span class="comment">//obj1</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="2-apply"><a href="#2-apply" class="headerlink" title="2.apply"></a>2.apply</h1><p>â€‹	apply()æ–¹æ³•ä¼šå°†thisæŒ‡å‘ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ¥å—ä¸€ä¸ªå‚æ•°æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;iso&#x27;</span>,</span><br><span class="line">            <span class="attr">say</span>:<span class="string">&#x27;it is you and me&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;bluejoker&#x27;</span>,</span><br><span class="line">            <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        obj2.<span class="property">say</span>.<span class="title function_">apply</span>(obj1,[obj1.<span class="property">name</span>,obj1.<span class="property">say</span>])</span><br><span class="line"><span class="comment">//[&#x27;iso&#x27;ï¼Œ&#x27;it is you and me&#x27;]</span></span><br><span class="line"><span class="comment">//obj1</span></span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå·±çš„applyï¼ˆï¼‰æ–¹æ³•"><a href="#è‡ªå·±çš„applyï¼ˆï¼‰æ–¹æ³•" class="headerlink" title="è‡ªå·±çš„applyï¼ˆï¼‰æ–¹æ³•"></a>è‡ªå·±çš„applyï¼ˆï¼‰æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">	<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myApply</span> = <span class="keyword">function</span> (<span class="params">context,arr</span>)&#123;</span><br><span class="line">            context = context ? context : <span class="title class_">Window</span><span class="comment">//åŒä¸Š</span></span><br><span class="line">            context.<span class="property">fn</span> = <span class="variable language_">this</span><span class="comment">//åŒä¸Š</span></span><br><span class="line">            <span class="keyword">if</span>(!arr)&#123;</span><br><span class="line">                context.<span class="title function_">fn</span>()<span class="comment">//åˆ¤æ–­arræ˜¯å¦ä¸ºç©ºæˆ–ä¸ºnullï¼Œundefinedç­‰ï¼Œæ˜¯åˆ™ç«‹åˆ»è°ƒç”¨context.fn()</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr))&#123;<span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„</span></span><br><span class="line">                context.<span class="title function_">fn</span>(...arr)<span class="comment">//æ˜¯åˆ™ä¼ é€’å‚æ•°</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title class_">TypeError</span>(<span class="string">&quot;arr is not a Array&quot;</span>)</span><br><span class="line">            &#125;<span class="comment">//ä¸æ˜¯åˆ™è¿”å›å¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">delete</span> context.<span class="property">fn</span><span class="comment">//åŒä¸Š</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;iso&#x27;</span>,</span><br><span class="line">            <span class="attr">say</span>:<span class="string">&#x27;it is you and me&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;bluejoker&#x27;</span>,</span><br><span class="line">            <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params">...args</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        obj2.<span class="property">say</span>.<span class="title function_">myApply</span>(obj1,[obj1.<span class="property">name</span>,obj1.<span class="property">say</span>])</span><br><span class="line"><span class="comment">//[&#x27;iso&#x27;ï¼Œ&#x27;it is you and me&#x27;]</span></span><br><span class="line"><span class="comment">//obj1</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-bind"><a href="#3-bind" class="headerlink" title="3.bind"></a>3.bind</h1><p>â€‹	bindï¼ˆï¼‰æ–¹æ³•ä¼šå°†thisæŒ‡å‘ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ¥å—ä»»æ„å½¢å¼çš„å‚æ•°ï¼ŒåŒæ—¶ï¼Œbindï¼ˆï¼‰è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚(è¿™ä¸ªæ–°å‡½æ•° ä¿ç•™åŸå‡½æ•°çš„åŸå‹é“¾ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ bind ç”Ÿæˆçš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ï¼ˆé€šè¿‡ new è°ƒç”¨ï¼‰ï¼Œæ–°åˆ›å»ºçš„å®ä¾‹åº”è¯¥èƒ½å¤Ÿè®¿é—®åŸå‡½æ•°çš„åŸå‹ä¸Šçš„æ–¹æ³•ã€‚)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&#x27;Alice&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ™®é€šå‡½æ•°è°ƒç”¨</span></span><br><span class="line">   <span class="keyword">const</span> boundSayHello = <span class="title class_">Person</span>.<span class="title function_">bind</span>(obj,obj.<span class="property">name</span>);</span><br><span class="line">   <span class="title function_">boundSayHello</span>(); <span class="comment">// è¾“å‡º: Alice</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ„é€ å‡½æ•°è°ƒç”¨</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title class_">BoundPerson</span> = <span class="title class_">Person</span>.<span class="title function_">bind</span>(<span class="literal">null</span>, <span class="string">&#x27;Bob&#x27;</span>);</span><br><span class="line">   <span class="keyword">const</span> newPerson = <span class="keyword">new</span> <span class="title class_">BoundPerson</span>();</span><br><span class="line">   newPerson.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º: Hello, my name is Bob</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(newPerson <span class="keyword">instanceof</span> <span class="title class_">Person</span>); <span class="comment">// è¾“å‡º: true</span></span><br></pre></td></tr></table></figure>



<h2 id="è‡ªå·±çš„bindï¼ˆï¼‰æ–¹æ³•"><a href="#è‡ªå·±çš„bindï¼ˆï¼‰æ–¹æ³•" class="headerlink" title="è‡ªå·±çš„bindï¼ˆï¼‰æ–¹æ³•"></a>è‡ªå·±çš„bindï¼ˆï¼‰æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">	<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myBind</span> = <span class="keyword">function</span>(<span class="params">context,...args</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="variable language_">this</span> !==<span class="string">&quot;function&quot;</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">                    <span class="string">&quot;this is not a function&quot;</span></span><br><span class="line">                )</span><br><span class="line">            &#125;<span class="comment">//åˆ¤æ–­thisæ˜¯å¦æŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">            <span class="keyword">let</span> self = <span class="variable language_">this</span><span class="comment">//ä¿ç•™åŸæœ¬çš„thisæŒ‡å‘ï¼Œå³myBindçš„è°ƒç”¨è€…</span></span><br><span class="line">            <span class="keyword">let</span> fNOP = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;<span class="comment">//ä¸ºæ–°ç»‘å®šçš„å‡½æ•°ï¼ˆfBoundï¼‰è®¾ç½®æ­£ç¡®çš„åŸå‹é“¾ï¼Œä»¥ç¡®ä¿å®ƒç»§æ‰¿åŸå‡½										 æ•°çš„åŸå‹ã€‚å¦‚æœç›´æ¥èµ‹å€¼fBound.prototype  = this.prototype 									    å¯èƒ½ä¼šä¸¢å¤±ä¸€äº›æ„é€ å‡½æ•°çš„ç‰¹æ€§</span></span><br><span class="line">            <span class="keyword">let</span> fBound = <span class="keyword">function</span> (<span class="params">...bindArgs</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> self.<span class="title function_">apply</span>(</span><br><span class="line">                     <span class="variable language_">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="variable language_">this</span> : context,<span class="comment">//æ­¤å¤„ this æŒ‡çš„æ˜¯ fBound å‡½æ•°çš„è°ƒç”¨è€…,è¿™ä¸€éƒ¨åˆ†çš„ä½œç”¨æ˜¯åˆ¤æ–­ fBound æ˜¯å¦é€šè¿‡ new å…³é”®å­—è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ£€æŸ¥å½“å‰ this æ˜¯å¦æ˜¯ fNOP çš„å®ä¾‹ã€‚ä¸ºä»€ä¹ˆæ˜¯ fNOP å‘¢ï¼Ÿå› ä¸º fNOP æ˜¯ä¸€ä¸ªç©ºå‡½æ•°ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ new fNOP() åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¥æ¨¡æ‹Ÿ bind çš„è¡Œä¸ºï¼Œç¡®ä¿ fBound è¢«å½“ä½œæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°ç»§æ‰¿åŸå‡½æ•°çš„åŸå‹ã€‚</span></span><br><span class="line"><span class="comment">//å¦‚æœ fBound æ˜¯é€šè¿‡ new å…³é”®å­—è°ƒç”¨çš„ï¼Œé‚£ä¹ˆ this ä¼šæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ‰‹åŠ¨ä¼ å…¥çš„ contextã€‚</span></span><br><span class="line"><span class="comment">//å¦‚æœ fBound æ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼ˆå³æ²¡æœ‰ä½¿ç”¨ newï¼‰ï¼Œåˆ™ this ä¼šæŒ‡å‘ä¼ å…¥çš„ contextã€‚</span></span><br><span class="line">           			</span><br><span class="line">                    args.<span class="title function_">concat</span>(bindArgs)<span class="comment">//å°†æœ€åˆç»‘å®šæ—¶ä¼ å…¥çš„å‚æ•° args å’Œåç»­è°ƒç”¨ fBound æ—¶ä¼ å…¥										çš„å‚æ•° bindArgs åˆå¹¶ï¼Œå½¢æˆå®Œæ•´çš„å‚æ•°åˆ—è¡¨ä¼ é€’ç»™åŸå‡½æ•°ã€‚</span></span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">              fNOP.<span class="property"><span class="keyword">prototype</span></span> = <span class="variable language_">this</span>.<span class="property"><span class="keyword">prototype</span></span><span class="comment">//å°† fNOP çš„åŸå‹æŒ‡å‘åŸå‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ		fNOP ç»§æ‰¿äº†åŸå‡½æ•°çš„æ‰€æœ‰å®ä¾‹æ–¹æ³•ã€‚è¿™æ ·ï¼ŒfNOP ä½œä¸ºä¸€ä¸ªç©ºå‡½æ•°ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰è‡ªå·±çš„å®ä¾‹æ–¹æ³•ï¼Œä½†å®ƒé€šè¿‡è®¾ç½® 	prototypeï¼Œè®©ä»»ä½•é€šè¿‡ new fNOP() åˆ›å»ºçš„å¯¹è±¡éƒ½èƒ½å¤Ÿè®¿é—®åŸå‡½æ•°çš„åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</span></span><br><span class="line">        </span><br><span class="line">            fBound.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title function_">fNOP</span>()<span class="comment">//è®© fBound çš„åŸå‹å¯¹è±¡ï¼ˆå³ fBound.prototypeï¼‰æŒ‡å‘ä¸€ä¸ª fNOP çš„å®ä¾‹ã€‚ç”±äº fNOP çš„ prototype æŒ‡å‘äº†åŸå‡½æ•°çš„åŸå‹ï¼Œæ‰€ä»¥é€šè¿‡ new fNOP() åˆ›å»ºçš„å¯¹è±¡å®é™…ä¸Šç»§æ‰¿äº†åŸå‡½æ•°çš„åŸå‹ã€‚å› æ­¤ï¼Œè¿™æ ·å°±ç¡®ä¿äº† fBound çš„åŸå‹é“¾ä¸Šæœ‰åŸå‡½æ•°çš„åŸå‹ã€‚</span></span><br><span class="line">        </span><br><span class="line">            <span class="keyword">return</span> fBound<span class="comment">//æœ€ç»ˆï¼Œè¿”å›çš„æ˜¯ fBound å‡½æ•°ï¼Œå®ƒå·²ç»è¢«ç»‘å®šäº† this ä¸Šä¸‹æ–‡å’Œåˆå§‹å‚æ•°ã€‚å½“ä½ è°ƒ								ç”¨ fBound æ—¶ï¼Œå®ƒä¼šä½¿ç”¨ç»‘å®šçš„ä¸Šä¸‹æ–‡å’Œå‚æ•°æ‰§è¡ŒåŸå§‹å‡½æ•°ã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">let</span> obj = &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;Alice&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ™®é€šå‡½æ•°è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">const</span> boundSayHello = <span class="title class_">Person</span>.<span class="title function_">myBind</span>(obj,obj.<span class="property">name</span>);</span><br><span class="line">    <span class="title function_">boundSayHello</span>(); <span class="comment">// è¾“å‡º: Alice</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">BoundPerson</span> = <span class="title class_">Person</span>.<span class="title function_">myBind</span>(<span class="literal">null</span>, <span class="string">&#x27;Bob&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> newPerson = <span class="keyword">new</span> <span class="title class_">BoundPerson</span>();</span><br><span class="line">    newPerson.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º: Hello, my name is Bob</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newPerson <span class="keyword">instanceof</span> <span class="title class_">Person</span>); <span class="comment">// è¾“å‡º: true</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>â€‹	callã€applyã€bind éƒ½å¯ä»¥æ”¹å˜ this çš„æŒ‡å‘ï¼Œä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°æˆ–å‚æ•°ä¸ºundefinedæˆ–nullï¼Œåˆ™é»˜è®¤æŒ‡å‘å…¨å±€windowã€‚ä½†å®ƒä»¬ç•¥æœ‰ä¸åŒï¼š</p>
<ol>
<li>callèƒ½å¤Ÿæ¥å—å¤šä¸ªå‚æ•°</li>
<li>applyæ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°</li>
<li>bindèƒ½å¤Ÿæ¥å—ä»»æ„ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2024/11/20/%E8%BF%99%E6%98%AF%E6%A0%87%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/20/%E8%BF%99%E6%98%AF%E6%A0%87%E9%A2%98/" class="post-title-link" itemprop="url">è¿™æ˜¯æ ‡é¢˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-11-20 18:28:39" itemprop="dateCreated datePublished" datetime="2024-11-20T18:28:39+08:00">2024-11-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-01 12:49:31" itemprop="dateModified" datetime="2024-12-01T12:49:31+08:00">2024-12-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ç¬¬ä¸€æ¬¡å†™åšå®¢ï¼Œæ–‡ç¬”æœ‰ç‚¹çƒ‚ï¼Œä¹Ÿä¸çŸ¥é“è¦è¯´äº›ä»€ä¹ˆï¼Œå„ä½è§è°…ä¸€ä¸‹å§ğŸ˜‹</p>
<h1 id="1-jsæ‰§è¡Œæœºåˆ¶"><a href="#1-jsæ‰§è¡Œæœºåˆ¶" class="headerlink" title="1. jsæ‰§è¡Œæœºåˆ¶"></a>1. jsæ‰§è¡Œæœºåˆ¶</h1><h2 id="1-1-å°è°ˆä¸€ä¸‹"><a href="#1-1-å°è°ˆä¸€ä¸‹" class="headerlink" title="1.1 å°è°ˆä¸€ä¸‹"></a>1.1 å°è°ˆä¸€ä¸‹</h2><p>â€‹	jsæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œæ‰§è¡Œç¨‹åºå°±åƒåœ¨é£Ÿå ‚åƒé¥­æ’é˜Ÿï¼Œå¿…é¡»ä¸€ä¸ªä¸€ä¸ªæ¥ã€‚è¿™æ ·çœ‹ä¸Šå»å……æ»¡ç§©åºï¼Œä½†åœ¨é¢å¯¹åƒå®šæ—¶å™¨è¿™æ ·éœ€è¦ç­‰å¾…å¤„ç†çš„ä»»åŠ¡æ—¶å°±ä¼šå¡ä½ï¼Œè¿™å°±å¥½æ¯”ä½ åœ¨åšé¥­æ—¶éœ€è¦ç…®é¥­æ´—èœç‚’èœï¼Œè€Œä½ å¿…é¡»ç­‰ç…®å®Œé¥­æ‰èƒ½å»æ´—èœç‚’èœï¼Œè¿™æœŸé—´ä½ ä»€ä¹ˆéƒ½å¹²ä¸äº†ã€‚è¿™æ ·ç›¸å½“æµªè´¹æ—¶é—´ï¼Œå› æ­¤jså°†ä»»åŠ¡åˆ†ä¸ºäº†åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ç±»å‹ã€‚</p>
<h2 id="1-2-åŒæ­¥"><a href="#1-2-åŒæ­¥" class="headerlink" title="1.2 åŒæ­¥"></a>1.2 åŒæ­¥</h2><p>â€‹	æ‰€è°“åŒæ­¥ï¼Œå°±æ˜¯å‘å‡ºä¸€ä¸ªåŠŸèƒ½è°ƒç”¨æ—¶ï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨å°±ä¸è¿”å›æˆ–ç»§ç»­æ‰§è¡Œåç»­æ“ä½œã€‚</p>
<p>ä¸¾ä¸ªå°ä¾‹å­ï¼šä½ æ˜¯ä¸€åCCNUçš„å­¦ç”Ÿã€‚æœ‰ä¸€å¤©ï¼Œä½ æƒ³æ”¹å–„ä¼™é£Ÿï¼Œä½†æ— å¥ˆæ‰è¥Ÿè§è‚˜ã€‚äºæ˜¯ä½ ç»™ä½ å®¶äººæ‰“äº†ä¸ªç”µè¯ï¼Œåªè¦æ¥é€šï¼Œä½ å°±æœ‰moneyæ‹¿ï¼Œä½†å¯¹æ–¹æ²¡æœ‰æ¥é€šã€‚ä½ ä¸åœåœ°æ‰“ç”µè¯ï¼Œå› ä¸ºæ²¡æ¥é€šå°±æ²¡æœ‰ç”Ÿæ´»è´¹ï¼Œæ²¡æœ‰ç”Ÿæ´»è´¹å°±æ²¡æœ‰è±ªèµ¤çš„ã€‚æœ€åä¸€å¤©è¿‡å»äº†ï¼Œç”µè¯æ²¡æ‰“é€šï¼Œä½ åªèƒ½åƒ6å—é’±çš„è¥å…»å¥—é¤ğŸ˜¡ã€‚</p>
<p>â€‹	ç”±æ­¤å¯è§ï¼ŒåŒæ­¥çš„å¥½å¤„åœ¨äºèƒ½å¤Ÿé©¬ä¸Šå¾—åˆ°è¿”å›çš„ç»“æœï¼Œä½†å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ‰§è¡Œã€‚ä¸€æ—¦ä¸­é—´å“ªæ­¥å°‘äº†æˆ–è€…å‡ºé”™ï¼Œç¨‹åºå°±ä¼šå¡ä½ï¼Œç™½ç™½æµªè´¹æ—¶é—´ã€‚</p>
<h2 id="1-3-å¼‚æ­¥"><a href="#1-3-å¼‚æ­¥" class="headerlink" title="1.3 å¼‚æ­¥"></a>1.3 å¼‚æ­¥</h2><p>â€‹	å¼‚æ­¥ï¼Œä¸åŒæ­¥ç›¸å¯¹ï¼Œå½“ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹è°ƒç”¨å‘å‡ºåï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œåç»­æ“ä½œã€‚</p>
<p>æœ‰ä¸€ä¸ªå°ä¾‹å­ï¼šä½ æ˜¯ä¸€åCCNUçš„å­¦ç”Ÿã€‚æœ‰ä¸€å¤©ï¼Œä½ æƒ³æ”¹å–„ä¼™é£Ÿï¼Œä½†æ— å¥ˆæ‰è¥Ÿè§è‚˜ã€‚äºæ˜¯ä½ ç»™ä½ å®¶äººå‘äº†ä¸€æ¡çŸ­ä¿¡ï¼Œå‘Šè¯‰ä»–ä»¬ä½ æ²¡ç±³äº†ï¼Œè®©ä»–ä»¬é€Ÿé€Ÿè½¬é’±ã€‚è™½ç„¶ä»–ä»¬å½“æ—¶åœ¨å¿™æ²¡çœ‹åˆ°ï¼Œä½†åˆ°äº†é¥­ç‚¹ï¼Œä½ è¿˜æ˜¯æ”¶åˆ°äº†è½¬è´¦ã€‚æœ€åï¼Œä½ happyåœ°åƒä¸Šäº†8å—é’±åœ°è¥å…»å¥—é¤ğŸ˜‹ã€‚</p>
<p>â€‹	ä¸éš¾çœ‹å‡ºï¼Œå¼‚æ­¥è™½ç„¶è¿”å›ç»“æœæ…¢ä¸€äº›ï¼Œä½†å®ƒèƒ½å¤Ÿåœ¨ç­‰å¾…çš„åŒæ—¶æ‰§è¡Œåç»­æ“ä½œï¼Œé¿å…äº†æ—¶é—´çš„æµªè´¹ã€‚</p>
<hr>
<p>â€‹	åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œjsä¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¾…å…¶å…¨éƒ¨å®Œæ¯•åï¼Œå†æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚</p>
<p>â€‹	çœ‹ä¸Šå»å¥½åƒå¾ˆå¯¹ï¼Œå®é™…ä¸Šä¸å¯¹ã€‚æ­£å¦‚äººä¸äººä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œå¼‚æ­¥ä»»åŠ¡ä¹‹é—´äº¦æœ‰å·®åˆ«ã€‚æœ‰äº›å¼‚æ­¥ä»»åŠ¡éœ€è¦è¿è´¯æ‰§è¡Œï¼Œä¸èƒ½åˆ†å¼€ã€‚</p>
<p>â€‹	æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨è¶…å¸‚ä¹°äº†å¾ˆå¤šä¸œè¥¿ï¼Œç»“æœåœ¨ç»“è´¦æ—¶åªæ¥äº†ä¸€ä»¶ï¼Œå°±è¢«åˆ«äººæ’é˜Ÿäº†ï¼Œè¿˜è¦ä½ é‡æ–°å»æ’ï¼Œè¿™ä¸çº¢æ¸©ğŸ˜¡ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼‚æ­¥ä»»åŠ¡åˆè¢«åˆ†ä¸ºäº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚</p>
<hr>
<h2 id="1-4-å®ä»»åŠ¡"><a href="#1-4-å®ä»»åŠ¡" class="headerlink" title="1.4 å®ä»»åŠ¡"></a>1.4 å®ä»»åŠ¡</h2><p>â€‹	å¾ˆå¥½ç†è§£ï¼Œå®ä»»åŠ¡æŒ‡çš„å°±æ˜¯ä¸éœ€è¦è¿è´¯æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¾‹å¦‚setTimeoutã€‚</p>
<p>â€‹	å®ƒå°±åƒä½ çš„å¯’å‡ä½œä¸šï¼Œä½ å¯ä»¥åšä¸€å¤©ï¼Œèººä¸€å¤©ï¼Œåªè¦èƒ½åšå®Œå°±è¡Œï¼ˆè™½ç„¶æˆ‘ä¸€èˆ¬ä¸åšï¼‰ã€‚</p>
<h2 id="1-5-å¾®ä»»åŠ¡"><a href="#1-5-å¾®ä»»åŠ¡" class="headerlink" title="1.5 å¾®ä»»åŠ¡"></a>1.5 å¾®ä»»åŠ¡</h2><p>â€‹	ç›¸å¯¹çš„ï¼Œå¾®ä»»åŠ¡æŒ‡çš„å°±æ˜¯éœ€è¦è¿è´¯æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¾‹å¦‚Promiseã€‚</p>
<p>â€‹	å®ƒå°±åƒä½ çš„æœŸæœ«è€ƒè¯•ï¼Œä¸èƒ½è€ƒä¸€å¤©ï¼Œèººä¸€å¤©ï¼Œä½ å¿…é¡»è¿ç€æŠŠå®ƒè€ƒå®Œï¼Œè€Œä¸”æœŸè€ƒéƒ½åœ¨å¯’å‡ä½œä¸šå‰ç»“æŸã€‚</p>
<hr>
<p>å› æ­¤ï¼Œåœ¨jså®é™…æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œjsä¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥å®ä»»åŠ¡åˆ™å°†å…¶æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œé‡åˆ°å¼‚æ­¥å¾®ä»»åŠ¡åˆ™å°†å…¶æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶äºŒè€…ä¸åˆ†ä¼˜å…ˆçº§ã€‚å¾…æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå†å°†å¼‚æ­¥å¾®ä»»åŠ¡ä»é˜Ÿåˆ—ä¸­è°ƒå…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¾…å¾®ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œå†å°†å¼‚æ­¥å®ä»»åŠ¡ä»é˜Ÿåˆ—ä¸­è°ƒå…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p>
<hr>
<h1 id="2-Promise"><a href="#2-Promise" class="headerlink" title="2. Promise"></a>2. Promise</h1><p>â€‹	åˆšæ‰å¥½åƒæåˆ°ä¸€ä¸‹Promiseï¼Œä¸çŸ¥é“è¯¥è¯´ç‚¹ä»€ä¹ˆï¼Œå°±è®²ä¸€ä¸‹Promiseå§ğŸ˜Š</p>
<h2 id="2-1-å›è°ƒåœ°ç‹±"><a href="#2-1-å›è°ƒåœ°ç‹±" class="headerlink" title="2.1 å›è°ƒåœ°ç‹±"></a>2.1 å›è°ƒåœ°ç‹±</h2><p>â€‹	åœ¨è¿™ä¹‹å‰ï¼Œå…ˆè®²ä¸€ä¸‹å›è°ƒå‡½æ•°ã€‚å½“ä¸€ä¸ªå‡½æ•°è¢«å½“åšä¸€ä¸ªå®å‚ä¼ å…¥åˆ°å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°åœ¨å¤–éƒ¨å‡½æ•°å†…è¢«è°ƒç”¨ï¼Œè¿™ä¸ªè¢«ç”¨æ¥å®ŒæˆæŸäº›ä»»åŠ¡çš„å‡½æ•°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ã€‚å½“ä¸€ä¸ªå›è°ƒå‡½æ•°åµŒå¥—ä¸€ä¸ªå›è°ƒå‡½æ•°å°±å½¢æˆäº†ä¸€ä¸ªåµŒå¥—ç»“æ„ï¼Œè€ŒåµŒå¥—å¤šäº†å°±å½¢æˆäº†å›è°ƒåœ°ç‹±</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">1</span></span>)&#123;</span><br><span class="line">       <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">2</span></span>)&#123;</span><br><span class="line">           <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">3</span></span>)&#123;</span><br><span class="line">               <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">4</span></span>)&#123;</span><br><span class="line">                   <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">5</span></span>)&#123;</span><br><span class="line">                       <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">6</span></span>)&#123;</span><br><span class="line">                           <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">7</span></span>)&#123;</span><br><span class="line">                               <span class="keyword">function</span>(<span class="params">æˆ‘æ˜¯<span class="number">8</span></span>)&#123;</span><br><span class="line">                                   ...</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>éå¸¸å¥½å›è°ƒï¼Œä½¿æˆ‘çš„å¤§è„‘æ—‹è½¬ã€‚</p>
<p>ä¸ºäº†ä¸è®©ç¨‹åºå‘˜åœ¨é¢å¯¹è¿™ä¸²ä»£ç æ—¶ä¸€è„¸æ‡µé€¼ï¼ŒES6æå‡ºäº†ä¸€ç§æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯promiseã€‚</p>
<h2 id="2-2-Promiseçš„å‚æ•°å’ŒçŠ¶æ€"><a href="#2-2-Promiseçš„å‚æ•°å’ŒçŠ¶æ€" class="headerlink" title="2.2 Promiseçš„å‚æ•°å’ŒçŠ¶æ€"></a>2.2 Promiseçš„å‚æ•°å’ŒçŠ¶æ€</h2><p>â€‹	Promiseè¯ç”Ÿçš„ç›®çš„å°±æ˜¯æ›´ä¼˜é›…åœ°ä¹¦å†™å¼‚æ­¥ä»»åŠ¡ (ä¼˜é›…æ°¸ä¸è¿‡æ—¶)ã€‚å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå› æ­¤åœ¨è°ƒç”¨æ—¶å¯ä»¥å®ä¾‹åŒ–ã€‚å®ƒæ¥æ”¶å‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯resolveï¼Œä¸€ä¸ªæ˜¯rejectï¼Œåˆ†åˆ«æ¥å—æˆåŠŸå’Œå¤±è´¥æ—¶çš„å›è°ƒã€‚åœ¨Promiseçš„å†…éƒ¨åˆæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆstateï¼‰ï¼Œåˆ†åˆ«æ˜¯pendingï¼ˆåŸå§‹æ€ï¼‰ï¼Œfulfilledï¼ˆæˆåŠŸæ€ï¼‰å’Œrejectedï¼ˆå¤±è´¥æ€ï¼‰ã€‚å…¶ä¸­çŠ¶æ€åªèƒ½ç”±pendingè½¬ä¸ºfulfilledæˆ–rejectedï¼Œfulfilledå’Œrejectedæ—¢ä¸èƒ½å˜å›pendingï¼Œä¹Ÿä¸èƒ½ç›¸äº’è½¬æ¢ã€‚</p>
<p>â€‹	ä¸¾ä¸ªä¾‹å­ï¼šnew Promiseæ˜¯è–›å®šè°”çš„çŒ«ï¼ŒçŒ«æ´»ç€å°±æ˜¯resolveï¼Œå¯„äº†å°±æ˜¯rejectã€‚å…¶ä¸­pendingæ˜¯æ—¢æ´»åˆå¯„çš„å åŠ æ€ï¼Œæ‰“å¼€å®¹å™¨åï¼ŒçŒ«æ—¢å¯ä»¥æ´»ç€å˜ä¸ºfulfilledï¼Œä¹Ÿå¯ä»¥å¯„äº†å˜ä¸ºrejectedï¼Œä½†æ˜¯çŒ«çš„çŠ¶æ€å·²ç»ç¡®å®šï¼Œä½ ä¸èƒ½ç”¨ä¸¤çº§åè½¬å†æŠŠçŒ«å˜å›â€œå¯„-æ´»å åŠ æ€â€ï¼Œä¹Ÿä¸èƒ½ç”¨æ­»è€…è‹ç”Ÿä»å¢“åœ°å¤æ´»çŒ«æˆ–æ˜¯æŠŠå“ˆåŸºç±³å˜æˆå“ˆå¯„ç±³ğŸ˜¡ã€‚</p>
<h2 id="2-3-Promiseçš„å®ä¾‹æ–¹æ³•"><a href="#2-3-Promiseçš„å®ä¾‹æ–¹æ³•" class="headerlink" title="2.3 Promiseçš„å®ä¾‹æ–¹æ³•"></a>2.3 Promiseçš„å®ä¾‹æ–¹æ³•</h2><p>â€‹	Promiseå®ä¾‹å¯¹è±¡æœ‰æˆåŠŸçš„ç»“æœï¼ˆvalueï¼‰å’Œå¤±è´¥çš„ç»“æœï¼ˆreasonï¼‰ï¼Œå¦‚æœå¤–éƒ¨ä»£ç æƒ³è¦è®¿é—®è¿™ä¸ªæˆåŠŸæˆ–å¤±è´¥çš„å€¼ï¼Œå°±éœ€è¦ç”¨åˆ°Promiseçš„å®ä¾‹æ–¹æ³•äº†ã€‚</p>
<h3 id="2-3-1-then"><a href="#2-3-1-then" class="headerlink" title="2.3.1 then"></a>2.3.1 then</h3><p>â€‹	thenæ˜¯Promiseçš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå®ƒèƒ½æ¥å—æœ€å¤šä¸¤ä¸ªå‚æ•°â€”onFulfilledå’ŒonRejectedï¼Œé€šè¿‡å®ƒä»¬æˆ‘ä»¬å¯ä»¥æ‹¿åˆ°æˆåŠŸæˆ–å¤±è´¥æ—¶çš„ç»“æœï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹å¯¹è±¡ã€‚å› ä¸ºåˆä¼šè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå› æ­¤thenæ”¯æŒé“¾å¼è°ƒç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="title function_">resolve</span>(<span class="string">`6`</span>)</span><br><span class="line">           <span class="title function_">reject</span>(<span class="string">`7`</span>)</span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">       promise.<span class="title function_">then</span>(</span><br><span class="line">           <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> value + <span class="string">`6`</span></span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> reason + <span class="string">`7`</span></span><br><span class="line">           &#125;</span><br><span class="line">       ).<span class="title function_">then</span>(</span><br><span class="line">           <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(value); </span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line">           &#125;</span><br><span class="line">       )</span><br><span class="line"><span class="comment">// =&gt; 66</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å¯ä»¥çœ‹åˆ°thençš„æ‰§è¡Œä¾èµ–äºä¸Šä¸€æ­¥çš„ç»“æœï¼Œå¦‚æœå…¶ä¸­ä»»æ„ä¸€æ­¥å‡ºé”™å°±ä¼šä½¿æ•´ä¸ªç¨‹åºå‡ºé”™ã€‚</p>
<hr>
<p>â€‹	ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œç¨‹åºæ—¶éƒ½ä¼šå¸Œæœ›ä»–æ˜¯æˆåŠŸçš„ï¼Œå› æ­¤ä¸€æ­¥ä¸€ä¸ªrejectä¸ä»…å†™èµ·æ¥éº»çƒ¦ï¼Œè€Œä¸”çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚ä¸ºäº†çœç•¥rejectï¼Œæˆ‘ä»¬å°±ç”¨åˆ°äº†Promiseçš„å¦ä¸€ç§æ–¹æ³•ã€‚</p>
<h3 id="2-3-2-catch"><a href="#2-3-2-catch" class="headerlink" title="2.3.2 catch"></a>2.3.2 catch</h3><p>â€‹	catchç”¨äºåœ¨Promiseå¤±è´¥æˆ–æŠ›å‡ºé”™è¯¯æ—¶æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå®ƒåªæ¥å—ä¸€ä¸ªå¤±è´¥çš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ä¸thenç›¸åŒï¼ŒcatchåŒæ ·æ”¯æŒé“¾å¼è°ƒç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">	 <span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">11</span>)</span><br><span class="line">            <span class="keyword">if</span>(num &gt; <span class="number">5</span>)&#123;</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="string">`å¯¹äº†`</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="string">`é”™äº†`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        promise.<span class="title function_">then</span>(</span><br><span class="line">            <span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(error)</span><br><span class="line">            &#125; )</span><br><span class="line"><span class="comment">//å½“num &gt; 5æ—¶</span></span><br><span class="line"><span class="comment">//-&gt; å¯¹äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦åˆ™</span></span><br><span class="line"><span class="comment">//-&gt; Uncaught (in promise) Error: é”™äº†</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>â€‹	åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ç”¨thenå¤„ç†æ­£ç¡®çš„ç»“æœï¼Œç”¨catchå¤„ç†é”™è¯¯æˆ–å¼‚å¸¸çš„ç»“æœã€‚ä½†å®é™…ä¸Šï¼Œæœ‰äº›æ“ä½œæ— è®ºç»“æœæ­£ç¡®æˆ–æ˜¯å¤±è´¥éƒ½å¾—æ‰§è¡Œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆç”¨åˆ°äº†finallyæ–¹æ³•ã€‚</p>
<h3 id="2-3-3-finally"><a href="#2-3-3-finally" class="headerlink" title="2.3.3 finally"></a>2.3.3 finally</h3><p>â€‹	finallyä¼šåœ¨PromiseçŠ¶æ€å†³å®šæ—¶è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œè€Œä¸åœ¨æ„å½“å‰Promiseçš„çŠ¶æ€å¦‚ä½•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">11</span>)</span><br><span class="line">            <span class="keyword">if</span>(num &gt; <span class="number">5</span>)&#123;</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="string">`æˆ‘å¯¹äº†å—ï¼Ÿ`</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="string">`æˆ‘é”™äº†å—ï¼Ÿ`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        promise.<span class="title function_">then</span>(</span><br><span class="line">            <span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">            &#125;</span><br><span class="line">        ).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;æˆ‘é”™äº†å—&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åæ­£æˆ‘å®Œäº†`</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>æ€»ç»“ä¸€ä¸‹è¿™ä¸‰ä½</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">11</span>)</span><br><span class="line">            <span class="keyword">if</span>(num &gt; <span class="number">5</span>)&#123;</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="string">`æˆ‘æ˜¯æ—å…‹`</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="string">`æ²¡é†’`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">                value = <span class="string">`æˆ‘é†’äº†`</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">                value =<span class="string">`æˆ‘æ‰¾åˆ°äº†åŒä¼´`</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">                value =<span class="string">`æˆ‘æ‰“å€’äº†åæ´¾`</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">                value = <span class="string">`æˆ‘æ‰¾åˆ°äº†åœ£å…½`</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">                value = <span class="string">`æˆ‘æ‰“å€’äº†ç›–ä¾,æ•‘å‡ºäº†å¡å°”è¾¾`</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">                </span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åæ­£å¡å°”è¾¾åˆä¼šè¢«æŠ“äº†`</span>);</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-4-Promiseé™æ€æ–¹æ³•"><a href="#2-4-Promiseé™æ€æ–¹æ³•" class="headerlink" title="2.4 Promiseé™æ€æ–¹æ³•"></a>2.4 Promiseé™æ€æ–¹æ³•</h2><h3 id="2-4-1-Promise-all"><a href="#2-4-1-Promise-all" class="headerlink" title="2.4.1 Promise.all"></a>2.4.1 Promise.all</h3><p>â€‹	Promise.allæ¥å—ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼ˆä¸€èˆ¬æ˜¯æ•°ç»„ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª æ–°çš„promiseå¯¹è±¡ã€‚å½“æ‰€æœ‰è¾“å…¥çš„ Promise éƒ½è¢«æˆåŠŸæ—¶ï¼Œè¿”å›çš„ Promise ä¹Ÿå°†è¢«æˆåŠŸï¼ˆç©ºçš„ä¹Ÿè¡Œï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰æˆåŠŸç»“æœçš„æ•°ç»„ï¼›å¦‚æœè¾“å…¥çš„ä»»æ„ä¸€ä¸ª Promise å¤±è´¥ï¼Œåˆ™è¿”å›çš„ Promise ä¹Ÿå°†å¤±è´¥ï¼Œå¹¶å¸¦æœ‰ç¬¬ä¸€ä¸ªå¤±è´¥çš„åŸå› ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">       <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">       <span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">       <span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1,promise2,promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"> <span class="comment">//-&gt;[6,6,6]</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">       <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">       <span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`é”™äº†`</span>)</span><br><span class="line">       <span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1,promise2,promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"> <span class="comment">//-&gt; Uncaught (in promise) é”™äº†</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-Promise-allSettled"><a href="#2-4-2-Promise-allSettled" class="headerlink" title="2.4.2 Promise.allSettled"></a>2.4.2 Promise.allSettled</h3><p>â€‹	Promise.allSettledæ¥å—ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼ˆä¸€èˆ¬æ˜¯æ•°ç»„ï¼‰ï¼Œæ— è®ºè¾“å…¥çš„Promiseå¯¹è±¡ç»“æœå¦‚ä½•ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ª æ–°çš„promiseå¯¹è±¡ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»“æœçš„å¯¹è±¡æ•°ç»„ï¼ˆåŒ…æ‹¬çŠ¶æ€ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">		<span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">`èŠœ`</span>)</span><br><span class="line">        <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`æ¹–`</span>)</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">allSettled</span>([promise1,promise2]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//-&gt; </span></span><br><span class="line">	[</span><br><span class="line">        &#123;<span class="attr">status</span>: <span class="string">&#x27;fulfilled&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;èŠœ&#x27;</span>&#125;</span><br><span class="line">		&#123;<span class="attr">status</span>: <span class="string">&#x27;rejected&#x27;</span>, <span class="attr">reason</span>: <span class="string">&#x27;æ¹–&#x27;</span>&#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<h3 id="2-4-3-Promise-any"><a href="#2-4-3-Promise-any" class="headerlink" title="2.4.3 Promise.any"></a>2.4.3 Promise.any</h3><p>â€‹	Promise.allæ¥å—ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼ˆä¸€èˆ¬æ˜¯æ•°ç»„ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª æ–°çš„promiseå¯¹è±¡ã€‚å½“è¾“å…¥çš„ Promise ä»»æ„ä¸€ä¸ªæˆåŠŸæ—¶ï¼Œè¿”å›çš„ Promise ä¹Ÿå°†è¢«æˆåŠŸï¼ˆç©ºçš„ä¹Ÿè¡Œï¼‰ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„è¿”å›å€¼ï¼›å¦‚æœè¾“å…¥çš„æ‰€æœ‰ Promise å¤±è´¥ï¼Œåˆ™è¿”å›çš„ Promise ä¹Ÿå°†å¤±è´¥ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªå¤±è´¥çš„åŸå› ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">`èŠœæ¹–`</span>)</span><br><span class="line">        <span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">`æ¹–èŠœ`</span>)</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value));</span><br><span class="line"><span class="comment">//-&gt; èŠœæ¹–</span></span><br><span class="line">		<span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`é”™äº†å—`</span>);</span><br><span class="line">        <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`é”™äº†å§`</span>)</span><br><span class="line">        <span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`åº”è¯¥å…¨é”™äº†`</span>)</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value));</span><br><span class="line"><span class="comment">//-&gt; Uncaught (in promise) AggregateError: All promises were rejected</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-4Promise-race"><a href="#2-4-4Promise-race" class="headerlink" title="2.4.4Promise.race"></a>2.4.4Promise.race</h3><p>â€‹	Promise.raceæ¥å—ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ª Promiseã€‚è¿™ä¸ªè¿”å›çš„ promiseçš„çŠ¶æ€ ä¼šéšç€ç¬¬ä¸€ä¸ª promise çš„çŠ¶æ€çš„å†³å®šè€Œå†³å®šã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">function</span> <span class="title function_">writeHomework</span>(<span class="params">time,action</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">resolve</span>(action)</span><br><span class="line">                &#125; ,time)</span><br><span class="line">        &#125;)</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">const</span> promise1 = <span class="title function_">writeHomework</span>(<span class="string">`100`</span>,<span class="string">`ç¡è§‰`</span>)</span><br><span class="line">       <span class="keyword">const</span> promise2 = <span class="title function_">writeHomework</span>(<span class="string">`10000`</span>,<span class="string">`å†™ä½œä¸š`</span>)</span><br><span class="line">       <span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1,promise2]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//-&gt; ç¡è§‰</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">writeHomework</span>(<span class="params">time,action</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">reject</span>(action)</span><br><span class="line">                &#125; ,time)</span><br><span class="line">        &#125;)</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">const</span> promise1 = <span class="title function_">writeHomework</span>(<span class="string">`100`</span>,<span class="string">`ç¡è§‰`</span>)</span><br><span class="line">       <span class="keyword">const</span> promise2 = <span class="title function_">writeHomework</span>(<span class="string">`10000`</span>,<span class="string">`å†™ä½œä¸š`</span>)</span><br><span class="line">       <span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1,promise2]).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//-&gt; Uncaught (in promise) ç¡è§‰</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-5-Promise-reject"><a href="#2-4-5-Promise-reject" class="headerlink" title="2.4.5 Promise.reject"></a>2.4.5 Promise.reject</h3><p>Promise.rejectä¼šè¿”å›ä¸€ä¸ªå¤±è´¥çš„ Promise å¯¹è±¡,åŒæ—¶å°†å€¼ä½œä¸ºå¤±è´¥çš„åŸå› ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`é”™äº†`</span>)</span><br><span class="line"><span class="comment">//ç­‰äº</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> <span class="title function_">reject</span>(<span class="string">`é”™äº†`</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`é”™äº†`</span>)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(error === <span class="string">`é”™äº†`</span>))</span><br><span class="line"><span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-6-Promise-resolve"><a href="#2-4-6-Promise-resolve" class="headerlink" title="2.4.6 Promise.resolve"></a>2.4.6 Promise.resolve</h3><p>Promise.resolveä¼šå°†ç»™å®šçš„å€¼è½¬æ¢ä¸ºä¸€ä¸ªPromiseå¯¹è±¡ã€‚å¦‚æœè¯¥å€¼æœ¬èº«å°±æ˜¯ä¸€ä¸ªPromiseï¼Œå°±å°†è¯¥Promiseè¿”å›ï¼›å¦‚æœè¯¥å€¼æ˜¯ä¸€ä¸ªthenableå¯¹è±¡(æœ‰ç”¨thenæ–¹æ³•çš„å¯¹è±¡)ï¼ŒPromise.resolveå°†è°ƒç”¨å…¶thenæ–¹æ³•åŠå…¶ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">`èŠœæ¹–`</span>)</span><br><span class="line">	promise1.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//-&gt; èŠœæ¹–</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> <span class="title function_">resolve</span>(<span class="number">7777</span>))</span><br><span class="line">    <span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(promise1)</span><br><span class="line">    promise2.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//=&gt; 7777</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  		<span class="attr">then</span>: <span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    		<span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable);</span><br><span class="line">	promise1.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line"><span class="comment">//-&gt; 42</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>â€‹	Promise.all ç›¸å½“äºå®å¯æ¢¦ä¸­æˆåŠŸé›†é½å…«ä¸ªé“é¦†å¾½ç« æ‰èƒ½æŒ‘æˆ˜è”ç›Ÿï¼Œå°‘ä¸€ä¸ªå³ä¸ºå¤±è´¥ã€‚</p>
<p>â€‹	Promise.allSettled ç›¸å½“äºä¸€é¢—è‹¹æœæ ‘ï¼Œä¸ç®¡å¥½åï¼Œåªè¦ç»“è‹¹æœå°±ä¼šæŠŠç»“æœè¿”å›ã€‚</p>
<p>â€‹	Promise.any ç›¸å½“äºä½ æœŸè€ƒæ—¶å†™å¯¹ä¸€ç‚¹æ²¾è¾¹çš„å†…å®¹éƒ½ç®—ä½ æœ‰åˆ†ï¼Œä½†ä½ ä¸€ç‚¹ä¸å¯¹å°±å…¨é”™ã€‚</p>
<p>â€‹	Promise.race ç›¸å½“äºä¸€åœºç«èµ›ï¼Œç¬¬ä¸€ä¸ªåˆ°ç»ˆç‚¹çš„å†³å®šç»“æœã€‚</p>
<p>â€‹	Promise.reject æ„Ÿè§‰åƒæ•™æä¸Šå­¦è¿‡çš„äºšé‡Œå£«å¤šå¾·çš„åè¨€ï¼Œè¿”å›çš„å…¨æ˜¯é”™çš„.</p>
<p>â€‹	Promise.resolve ã€‚ã€‚ã€‚æˆ‘ä¸çŸ¥é“å•Šï¼Œè¿”å›â€œä¸» &#x3D;&#x3D;&#x3D; 6â€ç®—äº†</p>
<hr>
<h2 id="3-asyncå’Œawait"><a href="#3-asyncå’Œawait" class="headerlink" title="3.asyncå’Œawait"></a>3.asyncå’Œawait</h2><p>â€‹	ä¹¦æ¥ä¸Šå›ï¼ŒPromiseåä¹‰ä¸Šè§£å†³çš„å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œä½†å®é™…åœ¨ä»£ç ä¸­ä¾ç„¶å……æ–¥ç€å¤§é‡çš„thenå‡½æ•°ã€‚å› æ­¤ï¼Œasyncå’Œawaitä¾¿è¯ç”Ÿäº†ï¼Œå®ƒä»¬å­˜åœ¨çš„æ„ä¹‰ä¾¿æ˜¯è®©ä»£ç æ›´åŠ ç®€æ´ã€‚</p>
<h2 id="3-1async"><a href="#3-1async" class="headerlink" title="3.1async"></a>3.1async</h2><p>â€‹	asyncæ˜¯ä¸€ä¸ªé€šè¿‡å¼‚æ­¥æ‰§è¡Œå¹¶éšå¼è¿”å›Promiseä½œä¸ºç»“æœçš„å‡½æ•°ã€‚asyncçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å‡½æ•°å‰åŠ ä¸Šasyncå…³é”®å­—æ¥è¡¨ç¤ºå‡½æ•°æ˜¯å¼‚æ­¥çš„ã€‚è€Œå¼‚æ­¥å‡½æ•°çš„è°ƒç”¨å’Œæ™®é€šå‡½æ•°ç›¸åŒï¼ŒåŠ æ‹¬å·è°ƒç”¨å°±è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">yibu</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;æˆ‘æ˜¯å¼‚æ­¥&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">yibu</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">//  [[Prototype]]: Promise</span></span><br><span class="line">	[[<span class="title class_">PromiseState</span>]]: <span class="string">&quot;fulfilled&quot;</span></span><br><span class="line">    [[<span class="title class_">PromiseResult</span>]]: <span class="string">&quot;æˆ‘æ˜¯å¼‚æ­¥&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	ç”±ä¸Šå¯çŸ¥ï¼Œasyncè¿”å›çš„Promiseå¯¹è±¡å¸¦æœ‰stateå’Œresultï¼ŒåŸå› æ˜¯è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ï¼Œå†…éƒ¨ä¼šè°ƒç”¨Promise.resolveï¼ˆï¼‰æ–¹æ³•å°†å®ƒè½¬åŒ–ä¸ºä¸€ä¸ªPromiseå¯¹è±¡è¿”å›ï¼›å¦‚æœå¼‚æ­¥å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œå†…éƒ¨å°±ä¼šè°ƒç”¨Promise.rejectï¼ˆï¼‰è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">yibu2</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`æˆ‘é”™äº†`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">yibu2</span>())</span><br><span class="line"><span class="comment">//[[Prototype]]: Promise</span></span><br><span class="line">[[<span class="title class_">PromiseState</span>]]: <span class="string">&quot;rejected&quot;</span></span><br><span class="line">[[<span class="title class_">PromiseResult</span>]]: <span class="title class_">Error</span>: æˆ‘é”™äº†</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³è¦è·å–asyncå‡½æ•°çš„ç»“æœï¼Œå°±å¯ä»¥è°ƒç”¨thenæˆ–catchã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">yibu3</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`åˆæ˜¯æˆ‘`</span> </span><br><span class="line">    &#125;</span><br><span class="line">	yibu3.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(value))</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å…ˆå»äº†`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘å…ˆå»äº†</span></span><br><span class="line"><span class="comment">//åˆæ˜¯æˆ‘</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œthenèƒ½å¤Ÿè·å–asyncçš„ç»“æœå¹¶æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ï¼Œä¸”åŒæ­¥ä»£ç å…ˆäºå¼‚æ­¥ä»£ç æ‰§è¡Œã€‚</p>
<hr>
<h2 id="3-2await"><a href="#3-2await" class="headerlink" title="3.2await"></a>3.2await</h2><p>â€‹	æ ¹æ®MDNçš„å®šä¹‰ï¼Œawait ç”¨äºç­‰å¾…ä¸€ä¸ª Promise æˆåŠŸå¹¶è·å–å®ƒæˆåŠŸä¹‹åçš„å€¼ã€‚ç”¨äººè¯è¯´ï¼Œawaitåªèƒ½æ”¾å…¥asyncå‡½æ•°ä¸­ï¼Œå¹¶åœ¨ä¹‹åæ¥ä¸Šä¸€ä¸ªèƒ½å¤Ÿè¿”å›Promiseå¯¹è±¡çš„è¡¨è¾¾å¼ã€‚å®ƒç­‰å¾…Promiseå¯¹è±¡æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶è¿”å›ç»“æœã€‚äº‹å®ä¸Šï¼Œawaitå¯ä»¥ç”¨äºä»»æ„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥awaitåé¢å¯ä»¥æ¥æ™®é€šå‡½æ•°ï¼Œåªæ˜¯ä¸å¸¸ç”¨è€Œå·²ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">function</span> <span class="title function_">what</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`è¿™æ˜¯ä»€ä¹ˆ`</span></span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">question</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> promise1 = <span class="keyword">await</span> <span class="title function_">what</span>()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(promise1)</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="title function_">question</span>()</span><br><span class="line"><span class="comment">//è¿™æ˜¯ä»€ä¹ˆ</span></span><br></pre></td></tr></table></figure>

<p>â€‹	äº‹å®ä¸Šï¼Œawaitåœ¨ç­‰å¾…ä¸€ä¸ªPromiseå¯¹è±¡æ—¶ï¼Œä¼šé˜»å¡å‡½æ•°åé¢çš„ä»£ç ï¼Œç­‰å¾…Promiseå¯¹è±¡resolve&#x2F;rejectï¼Œç„¶åå¾—åˆ°resolve&#x2F;rejectçš„å€¼ï¼Œä½œä¸ºawaitè¡¨è¾¾å¼çš„ç»“æœï¼›å¦‚æœç­‰åˆ°äº†ä¸€ä¸ªéPromiseå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¼šéšå¼åœ°è¿”å›ä¸€ä¸ªresolveçš„Promiseå¯¹è±¡ã€‚</p>
<h2 id="3-3å®ƒä»¬æœ‰æ¯›çº¿ç”¨å‘¢"><a href="#3-3å®ƒä»¬æœ‰æ¯›çº¿ç”¨å‘¢" class="headerlink" title="3.3å®ƒä»¬æœ‰æ¯›çº¿ç”¨å‘¢"></a>3.3å®ƒä»¬æœ‰æ¯›çº¿ç”¨å‘¢</h2><p>â€‹	è¿˜æ˜¯é‚£å¥è€è¯ï¼Œasyncå’Œawaitèƒ½å¤Ÿä½¿ä»£ç æ›´ç®€æ´ã€‚</p>
<p>â€‹	ä¸¾ä¸ªä¾‹å­:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">function</span> <span class="title function_">wuhu</span>(<span class="params">name</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">					<span class="title function_">resolve</span>(name + <span class="string">`,`</span> +  <span class="string">`æåœ¨èµ£ç¥é­”`</span>)</span><br><span class="line">				&#125;),<span class="number">2000</span>&#125;)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">let</span> result1 = <span class="keyword">await</span> <span class="title function_">wuhu</span>(<span class="string">`è”š`</span>)</span><br><span class="line">			<span class="keyword">let</span> result2 = <span class="keyword">await</span> <span class="title function_">wuhu</span>(<span class="string">`æ³½ä¸½`</span>)</span><br><span class="line">			<span class="keyword">let</span> result3 = <span class="keyword">await</span> <span class="title function_">wuhu</span>(<span class="string">`ç‘å…¹`</span>)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>([result1,result2,result3]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">test</span>()</span><br><span class="line"><span class="comment">//[ &quot;è”š,æåœ¨èµ£ç¥é­”&quot;</span></span><br><span class="line">	<span class="string">&quot;æ³½ä¸½,æåœ¨èµ£ç¥é­”&quot;</span></span><br><span class="line">	<span class="string">&quot;ç‘å…¹,æåœ¨èµ£ç¥é­”&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>â€‹	ä½ å¯èƒ½æ²¡çœ‹å‡ºæ¥ï¼Œé‚£å†ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">wuhu</span>(<span class="params">name</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">				<span class="title function_">resolve</span>(name + <span class="string">`,`</span> +  <span class="string">`æåœ¨èµ£ç¥é­”`</span>)</span><br><span class="line">			&#125;),<span class="number">2000</span>&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">wuhu</span>(<span class="string">`è”š`</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="title function_">wuhu</span>(<span class="string">`æ³½ä¸½`</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="title function_">wuhu</span>(<span class="string">`ç‘å…¹`</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<p>â€‹	æ˜¾ç„¶ï¼Œç¬¬äºŒç§å†™æ³•æ›´åŠ æŠ½è±¡ï¼Œå½“thenä½¿ç”¨è¶³å¤Ÿå¤šæ—¶ï¼Œä½ ç»å¯¹ä¸ä¼šæƒ³çœ‹ä¸‹å»ï¼Œæ‰€ä»¥awaitåœ¨å¤„ç†thené“¾å¼è°ƒç”¨æ–¹é¢è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p>
<hr>
<h2 id="3-2ï¼ˆè¡¥ï¼‰é˜»å¡"><a href="#3-2ï¼ˆè¡¥ï¼‰é˜»å¡" class="headerlink" title="3.2ï¼ˆè¡¥ï¼‰é˜»å¡"></a>3.2ï¼ˆè¡¥ï¼‰é˜»å¡</h2><p>â€‹	å†æ¥ä»”ç»†è¯´ä¸€ä¸‹é˜»å¡ã€‚å½“é‡åˆ°awaitæ—¶ï¼Œä¼šé˜»å¡å‡½æ•°<strong>å†…éƒ¨</strong>ï¼ˆä¸æ˜¯å…¨éƒ¨ï¼‰å¤„äºå®ƒåé¢çš„ä»£ç ï¼Œå†å»æ‰§è¡Œå‡½æ•°å¤–éƒ¨çš„åŒæ­¥ä»£ç ï¼›å½“å¤–éƒ¨çš„åŒæ­¥ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå†å›åˆ°æ”¹å‡½æ•°æ‰§è¡Œå‰©ä½™çš„ä»£ç ã€‚å½“ç„¶ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä»£ç ä¼šä¼˜å…ˆå¤„ç†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">function</span> <span class="title function_">who</span>(<span class="params">value</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">				<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">					<span class="title function_">resolve</span>(value)</span><br><span class="line">				&#125;,<span class="number">4000</span>)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">after</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">let</span> promise1 = <span class="keyword">await</span> <span class="title function_">who</span>(<span class="string">&#x27;369:&#x27;</span>)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(promise1);</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘è¢«é˜»å¡äº†`</span>);</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">after</span>()</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ²¡è¢«é˜»å¡`</span>)</span><br><span class="line"><span class="comment">//æˆ‘æ²¡è¢«é˜»å¡</span></span><br><span class="line"><span class="comment">// 4så -&gt;&#x27;369:&#x27;  æˆ‘è¢«é˜»å¡äº†</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹	è®²ä¸€ä¸‹æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<p>è°ƒç”¨afterå‡½æ•°ï¼Œé‡Œé¢é‡åˆ°äº†awaitï¼Œä»£ç å°±æš‚åœåˆ°è¿™ï¼Œä¸å†ç»§ç»­æ‰§è¡Œï¼Œç­‰å¾…åé¢çš„whoï¼ˆâ€™369:â€™ï¼‰æ‰§è¡Œå®Œæ¯•ï¼Œ4ç§’åè¿”å›äº†ç»“æœå€¼èµ‹å€¼ç»™promise1å¹¶æ‰“å°ï¼Œæš‚åœç»“æŸï¼Œä»£ç ç»§ç»­æ‰§è¡Œconsole.logè¯­å¥ã€‚</p>
<p>â€‹	è€Œä¸”ï¼Œjså¼•æ“åœ¨ç­‰å¾…Promise.resolveæ—¶ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„åœæ­¢å·¥ä½œï¼Œå®ƒè¿˜å¯ä»¥å¤„ç†å…¶ä»–ä¸€äº›äº‹æƒ…ã€‚æ¯”å¦‚åœ¨afterï¼ˆï¼‰å‡½æ•°åconsole.log()ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤–éƒ¨çš„console.log()è¯­å¥ä¼šå…ˆæ‰§è¡Œã€‚</p>
<p>â€‹	å†æ¥ä¸€ä¸ª</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">first</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘å…ˆæ¥çš„`</span>);</span><br><span class="line">			<span class="keyword">await</span> <span class="title function_">second</span>()</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æœ€å`</span>);</span><br><span class="line">			<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ç¬¬ä¸€å®šæ—¶å™¨`</span>);</span><br><span class="line">			&#125;,<span class="number">0</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">second</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ç¬¬äºŒå®šæ—¶å™¨`</span>);</span><br><span class="line">				</span><br><span class="line">			&#125;,<span class="number">0</span>)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å†åˆ°æˆ‘`</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="title function_">first</span>()</span><br><span class="line"></span><br><span class="line">		<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ç¬¬ä¸‰å®šæ—¶å™¨`</span>);</span><br><span class="line">		&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘åœ¨ç¬¬ä¸‰`</span>);</span><br><span class="line"><span class="comment">// æˆ‘å…ˆæ¥çš„</span></span><br><span class="line"><span class="comment">// å†åˆ°æˆ‘</span></span><br><span class="line"><span class="comment">// æˆ‘åœ¨ç¬¬ä¸‰</span></span><br><span class="line"><span class="comment">// æˆ‘æœ€å</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒå®šæ—¶å™¨</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰å®šæ—¶å™¨</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€å®šæ—¶å™¨</span></span><br></pre></td></tr></table></figure>

<p>â€‹	å†è®²ä¸€ä¸‹æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<p>é¦–å…ˆæ‰§è¡Œfirstï¼ˆï¼‰ï¼Œæ‰“å°å‡ºâ€æˆ‘å…ˆæ¥çš„â€ã€‚</p>
<p>ç„¶åé‡åˆ°await secondï¼ˆï¼‰ï¼Œåœ¨secondï¼ˆï¼‰ä¸­é‡åˆ°ç¬¬äºŒå®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç æ‰“å°â€å†åˆ°æˆ‘â€ã€‚</p>
<p>å› ä¸ºsecondeï¼ˆï¼‰é˜»å¡äº†åé¢ä»£ç çš„æ‰§è¡Œï¼Œæ‰€ä»¥åé¢ä»£ç åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å†åˆ°ç¬¬ä¸‰å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°â€œæˆ‘åœ¨ç¬¬ä¸‰â€ã€‚</p>
<p>å› ä¸ºåŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°â€œæˆ‘æœ€åâ€ï¼Œå†å°†ç¬¬ä¸€å®šæ—¶å™¨åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>æœ€åæ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ä¾æ¬¡æ‰“å°ã€‚</p>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">const</span> <span class="title function_">first</span> = (<span class="params"></span>) =&gt; (<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">                	<span class="title function_">resolve</span>(<span class="number">6</span>);</span><br><span class="line">                	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>)</span><br><span class="line">                	&#125;, <span class="number">0</span>)</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line">            p.<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;));</span><br><span class="line"></span><br><span class="line">        <span class="title function_">first</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line"><span class="comment">//3,7,4,1,2,5,8</span></span><br></pre></td></tr></table></figure>



<p>â€‹	</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://159357254680.github.io/2024/11/01/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/01/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-11-01 21:30:53 / Modified: 21:30:04" itemprop="dateCreated datePublished" datetime="2024-11-01T21:30:53+08:00">2024-11-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">John Doe</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
